/*
Copyright (c) 2010, www.taojianghu.com. All rights reserved.

Date: 2010-05-04 22:13:23
Revision: 27931
*/
if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={}}YAHOO.namespace=function(){var b=arguments,g=null,e,c,f;for(e=0;e<b.length;e=e+1){f=(""+b[e]).split(".");g=YAHOO;for(c=(f[0]=="YAHOO")?1:0;c<f.length;c=c+1){g[f[c]]=g[f[c]]||{};g=g[f[c]]}}return g};YAHOO.log=function(d,a,c){var b=YAHOO.widget.Logger;if(b&&b.log){return b.log(d,a,c)}else{return false}};YAHOO.register=function(a,f,e){var o=YAHOO.env.modules,c,l,h,g,d;if(!o[a]){o[a]={versions:[],builds:[]}}c=o[a];l=e.version;h=e.build;g=YAHOO.env.listeners;c.name=a;c.version=l;c.build=h;c.versions.push(l);c.builds.push(h);c.mainClass=f;for(d=0;d<g.length;d=d+1){g[d](c)}if(f){f.VERSION=l;f.BUILD=h}else{YAHOO.log("mainClass is undefined for module "+a,"warn")}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(a){return YAHOO.env.modules[a]||null};YAHOO.env.ua=function(){var c={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:0},b=navigator.userAgent,a;if((/KHTML/).test(b)){c.webkit=1}a=b.match(/AppleWebKit\/([^\s]*)/);if(a&&a[1]){c.webkit=parseFloat(a[1]);if(/ Mobile\//.test(b)){c.mobile="Apple"}else{a=b.match(/NokiaN[^\/]*/);if(a){c.mobile=a[0]}}a=b.match(/AdobeAIR\/([^\s]*)/);if(a){c.air=a[0]}}if(!c.webkit){a=b.match(/Opera[\s\/]([^\s]*)/);if(a&&a[1]){c.opera=parseFloat(a[1]);a=b.match(/Opera Mini[^;]*/);if(a){c.mobile=a[0]}}else{a=b.match(/MSIE\s([^;]*)/);if(a&&a[1]){c.ie=parseFloat(a[1])}else{a=b.match(/Gecko\/([^\s]*)/);if(a){c.gecko=1;a=b.match(/rv:([^\s\)]*)/);if(a&&a[1]){c.gecko=parseFloat(a[1])}}}}}a=b.match(/Caja\/([^\s]*)/);if(a&&a[1]){c.caja=parseFloat(a[1])}return c}();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var b=YAHOO_config.listener,a=YAHOO.env.listeners,d=true,c;if(b){for(c=0;c<a.length;c=c+1){if(a[c]==b){d=false;break}}if(d){a.push(b)}}}})();YAHOO.lang=YAHOO.lang||{};(function(){var b=YAHOO.lang,f="[object Array]",c="[object Function]",a=Object.prototype,e=["toString","valueOf"],d={isArray:function(g){return a.toString.apply(g)===f},isBoolean:function(g){return typeof g==="boolean"},isFunction:function(g){return a.toString.apply(g)===c},isNull:function(g){return g===null},isNumber:function(g){return typeof g==="number"&&isFinite(g)},isObject:function(g){return(g&&(typeof g==="object"||b.isFunction(g)))||false},isString:function(g){return typeof g==="string"},isUndefined:function(g){return typeof g==="undefined"},_IEEnumFix:(YAHOO.env.ua.ie)?function(l,h){var g,p,o;for(g=0;g<e.length;g=g+1){p=e[g];o=h[p];if(b.isFunction(o)&&o!=a[p]){l[p]=o}}}:function(){},extend:function(o,p,l){if(!p||!o){throw new Error("extend failed, please check that all dependencies are included.")}var h=function(){},g;h.prototype=p.prototype;o.prototype=new h();o.prototype.constructor=o;o.superclass=p.prototype;if(p.prototype.constructor==a.constructor){p.prototype.constructor=p}if(l){for(g in l){if(b.hasOwnProperty(l,g)){o.prototype[g]=l[g]}}b._IEEnumFix(o.prototype,l)}},augmentObject:function(q,o){if(!o||!q){throw new Error("Absorb failed, verify dependencies.")}var g=arguments,l,t,h=g[2];if(h&&h!==true){for(l=2;l<g.length;l=l+1){q[g[l]]=o[g[l]]}}else{for(t in o){if(h||!(t in q)){q[t]=o[t]}}b._IEEnumFix(q,o)}},augmentProto:function(o,l){if(!l||!o){throw new Error("Augment failed, verify dependencies.")}var g=[o.prototype,l.prototype],h;for(h=2;h<arguments.length;h=h+1){g.push(arguments[h])}b.augmentObject.apply(this,g)},dump:function(g,r){var l,q,u=[],v="{...}",h="f(){...}",t=", ",p=" => ";if(!b.isObject(g)){return g+""}else{if(g instanceof Date||("nodeType" in g&&"tagName" in g)){return g}else{if(b.isFunction(g)){return h}}}r=(b.isNumber(r))?r:3;if(b.isArray(g)){u.push("[");for(l=0,q=g.length;l<q;l=l+1){if(b.isObject(g[l])){u.push((r>0)?b.dump(g[l],r-1):v)}else{u.push(g[l])}u.push(t)}if(u.length>1){u.pop()}u.push("]")}else{u.push("{");for(l in g){if(b.hasOwnProperty(g,l)){u.push(l+p);if(b.isObject(g[l])){u.push((r>0)?b.dump(g[l],r-1):v)}else{u.push(g[l])}u.push(t)}}if(u.length>1){u.pop()}u.push("}")}return u.join("")},substitute:function(D,h,w){var r,q,p,z,A,C,y=[],l,t="dump",x=" ",g="{",B="}",u;for(;;){r=D.lastIndexOf(g);if(r<0){break}q=D.indexOf(B,r);if(r+1>=q){break}l=D.substring(r+1,q);z=l;C=null;p=z.indexOf(x);if(p>-1){C=z.substring(p+1);z=z.substring(0,p)}A=h[z];if(w){A=w(z,A,C)}if(b.isObject(A)){if(b.isArray(A)){A=b.dump(A,parseInt(C,10))}else{C=C||"";u=C.indexOf(t);if(u>-1){C=C.substring(4)}if(A.toString===a.toString||u>-1){A=b.dump(A,parseInt(C,10))}else{A=A.toString()}}}else{if(!b.isString(A)&&!b.isNumber(A)){A="~-"+y.length+"-~";y[y.length]=l}}D=D.substring(0,r)+A+D.substring(q+1)}for(r=y.length-1;r>=0;r=r-1){D=D.replace(new RegExp("~-"+r+"-~"),"{"+y[r]+"}","g")}return D},trim:function(g){try{return g.replace(/^\s+|\s+$/g,"")}catch(h){return g}},merge:function(){var q={},h=arguments,g=h.length,p;for(p=0;p<g;p=p+1){b.augmentObject(q,h[p],true)}return q},later:function(t,h,u,l,p){t=t||0;h=h||{};var i=u,s=l,q,g;if(b.isString(u)){i=h[u]}if(!i){throw new TypeError("method undefined")}if(!b.isArray(s)){s=[l]}q=function(){i.apply(h,s)};g=(p)?setInterval(q,t):setTimeout(q,t);return{interval:p,cancel:function(){if(this.interval){clearInterval(g)}else{clearTimeout(g)}}}},isValue:function(g){return(b.isObject(g)||b.isString(g)||b.isNumber(g)||b.isBoolean(g))}};b.hasOwnProperty=(a.hasOwnProperty)?function(g,h){return g&&g.hasOwnProperty(h)}:function(g,h){return !b.isUndefined(g[h])&&g.constructor.prototype[h]!==g[h]};d.augmentObject(b,d,true);YAHOO.util.Lang=b;b.augment=b.augmentProto;YAHOO.augment=b.augmentProto;YAHOO.extend=b.extend})();YAHOO.register("yahoo",YAHOO,{version:"2.7.0",build:"1799"});(function(){YAHOO.env._id_counter=YAHOO.env._id_counter||0;var e=YAHOO.util,o=YAHOO.lang,P=YAHOO.env.ua,a=YAHOO.lang.trim,F={},K={},q=/^t(?:able|d|h)$/i,A=/color$/i,l=window.document,z=l.documentElement,H="ownerDocument",Q="defaultView",Z="documentElement",W="compatMode",D="offsetLeft",s="offsetTop",X="offsetParent",B="parentNode",O="nodeType",c="tagName",r="scrollLeft",L="scrollTop",t="getBoundingClientRect",aa="getComputedStyle",C="currentStyle",p="CSS1Compat",E="BackCompat",J="class",f="className",i="",b=" ",V="(?:^|\\s)",N="(?= |$)",x="g",S="position",I="fixed",y="relative",M="left",R="top",U="medium",T="borderLeftWidth",u="borderTopWidth",d=P.opera,h=P.webkit,g=P.gecko,w=P.ie;e.Dom={CUSTOM_ATTRIBUTES:(!z.hasAttribute)?{"for":"htmlFor","class":f}:{htmlFor:"for",className:J},get:function(ad){var af,ab,ae,ac,G;if(ad){if(ad[O]||ad.item){return ad}if(typeof ad==="string"){af=ad;ad=l.getElementById(ad);if(ad&&ad.id===af){return ad}else{if(ad&&l.all){ad=null;ab=l.all[af];for(ac=0,G=ab.length;ac<G;++ac){if(ab[ac].id===af){return ab[ac]}}}}return ad}if(ad.DOM_EVENTS){ad=ad.get("element")}if("length" in ad){ae=[];for(ac=0,G=ad.length;ac<G;++ac){ae[ae.length]=e.Dom.get(ad[ac])}return ae}return ad}return null},getComputedStyle:function(G,ab){if(window[aa]){return G[H][Q][aa](G,null)[ab]}else{if(G[C]){return e.Dom.IE_ComputedStyle.get(G,ab)}}},getStyle:function(G,ab){return e.Dom.batch(G,e.Dom._getStyle,ab)},_getStyle:function(){if(window[aa]){return function(G,ad){ad=(ad==="float")?ad="cssFloat":e.Dom._toCamel(ad);var ac=G.style[ad],ab;if(!ac){ab=G[H][Q][aa](G,null);if(ab){ac=ab[ad]}}return ac}}else{if(z[C]){return function(G,ad){var ac;switch(ad){case"opacity":ac=100;try{ac=G.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(ae){try{ac=G.filters("alpha").opacity}catch(ab){}}return ac/100;case"float":ad="styleFloat";default:ad=e.Dom._toCamel(ad);ac=G[C]?G[C][ad]:null;return(G.style[ad]||ac)}}}}}(),setStyle:function(G,ab,ac){e.Dom.batch(G,e.Dom._setStyle,{prop:ab,val:ac})},_setStyle:function(){if(w){return function(ab,G){var ac=e.Dom._toCamel(G.prop),ad=G.val;if(ab){switch(ac){case"opacity":if(o.isString(ab.style.filter)){ab.style.filter="alpha(opacity="+ad*100+")";if(!ab[C]||!ab[C].hasLayout){ab.style.zoom=1}}break;case"float":ac="styleFloat";default:ab.style[ac]=ad}}else{}}}else{return function(ab,G){var ac=e.Dom._toCamel(G.prop),ad=G.val;if(ab){if(ac=="float"){ac="cssFloat"}ab.style[ac]=ad}else{}}}}(),getXY:function(G){return e.Dom.batch(G,e.Dom._getXY)},_canPosition:function(G){return(e.Dom._getStyle(G,"display")!=="none"&&e.Dom._inDoc(G))},_getXY:function(){if(l[Z][t]){return function(ad){var ae,ab,af,ak,aj,ai,ah,G,ac,ag=Math.floor,al=false;if(e.Dom._canPosition(ad)){af=ad[t]();ak=ad[H];ae=e.Dom.getDocumentScrollLeft(ak);ab=e.Dom.getDocumentScrollTop(ak);al=[ag(af[M]),ag(af[R])];if(w&&P.ie<8){aj=2;ai=2;ah=ak[W];G=v(ak[Z],T);ac=v(ak[Z],u);if(P.ie===6){if(ah!==E){aj=0;ai=0}}if((ah==E)){if(G!==U){aj=parseInt(G,10)}if(ac!==U){ai=parseInt(ac,10)}}al[0]-=aj;al[1]-=ai}if((ab||ae)){al[0]+=ae;al[1]+=ab}al[0]=ag(al[0]);al[1]=ag(al[1])}else{}return al}}else{return function(ad){var ac,ab,af,ag,ah,ae=false,G=ad;if(e.Dom._canPosition(ad)){ae=[ad[D],ad[s]];ac=e.Dom.getDocumentScrollLeft(ad[H]);ab=e.Dom.getDocumentScrollTop(ad[H]);ah=((g||P.webkit>519)?true:false);while((G=G[X])){ae[0]+=G[D];ae[1]+=G[s];if(ah){ae=e.Dom._calcBorders(G,ae)}}if(e.Dom._getStyle(ad,S)!==I){G=ad;while((G=G[B])&&G[c]){af=G[L];ag=G[r];if(g&&(e.Dom._getStyle(G,"overflow")!=="visible")){ae=e.Dom._calcBorders(G,ae)}if(af||ag){ae[0]-=ag;ae[1]-=af}}ae[0]+=ac;ae[1]+=ab}else{if(d){ae[0]-=ac;ae[1]-=ab}else{if(h||g){ae[0]+=ac;ae[1]+=ab}}}ae[0]=Math.floor(ae[0]);ae[1]=Math.floor(ae[1])}else{}return ae}}}(),getX:function(G){var ab=function(ac){return e.Dom.getXY(ac)[0]};return e.Dom.batch(G,ab,e.Dom,true)},getY:function(G){var ab=function(ac){return e.Dom.getXY(ac)[1]};return e.Dom.batch(G,ab,e.Dom,true)},setXY:function(G,ac,ab){e.Dom.batch(G,e.Dom._setXY,{pos:ac,noRetry:ab})},_setXY:function(G,ae){var af=e.Dom._getStyle(G,S),ad=e.Dom.setStyle,ai=ae.pos,ab=ae.noRetry,ag=[parseInt(e.Dom.getComputedStyle(G,M),10),parseInt(e.Dom.getComputedStyle(G,R),10)],ah,ac;if(af=="static"){af=y;ad(G,S,af)}ah=e.Dom._getXY(G);if(!ai||ah===false){return false}if(isNaN(ag[0])){ag[0]=(af==y)?0:G[D]}if(isNaN(ag[1])){ag[1]=(af==y)?0:G[s]}if(ai[0]!==null){ad(G,M,ai[0]-ah[0]+ag[0]+"px")}if(ai[1]!==null){ad(G,R,ai[1]-ah[1]+ag[1]+"px")}if(!ab){ac=e.Dom._getXY(G);if((ai[0]!==null&&ac[0]!=ai[0])||(ai[1]!==null&&ac[1]!=ai[1])){e.Dom._setXY(G,{pos:ai,noRetry:true})}}},setX:function(ab,G){e.Dom.setXY(ab,[G,null])},setY:function(G,ab){e.Dom.setXY(G,[null,ab])},getRegion:function(G){var ab=function(ac){var ad=false;if(e.Dom._canPosition(ac)){ad=e.Region.getRegion(ac)}else{}return ad};return e.Dom.batch(G,ab,e.Dom,true)},getClientWidth:function(){return e.Dom.getViewportWidth()},getClientHeight:function(){return e.Dom.getViewportHeight()},getElementsByClassName:function(ag,ak,ah,aj,ac,ai){ag=o.trim(ag);ak=ak||"*";ah=(ah)?e.Dom.get(ah):null||l;if(!ah){return[]}var ab=[],G=ah.getElementsByTagName(ak),ae=e.Dom.hasClass;for(var ad=0,af=G.length;ad<af;++ad){if(ae(G[ad],ag)){ab[ab.length]=G[ad]}}if(aj){e.Dom.batch(ab,aj,ac,ai)}return ab},hasClass:function(ab,G){return e.Dom.batch(ab,e.Dom._hasClass,G)},_hasClass:function(ac,ab){var G=false,ad;if(ac&&ab){ad=e.Dom.getAttribute(ac,f)||i;if(ab.exec){G=ab.test(ad)}else{G=ab&&(b+ad+b).indexOf(b+ab+b)>-1}}else{}return G},addClass:function(ab,G){return e.Dom.batch(ab,e.Dom._addClass,G)},_addClass:function(ac,ab){var G=false,ad;if(ac&&ab){ad=e.Dom.getAttribute(ac,f)||i;if(!e.Dom._hasClass(ac,ab)){e.Dom.setAttribute(ac,f,a(ad+b+ab));G=true}}else{}return G},removeClass:function(ab,G){return e.Dom.batch(ab,e.Dom._removeClass,G)},_removeClass:function(ad,ac){var ab=false,af,ae,G;if(ad&&ac){af=e.Dom.getAttribute(ad,f)||i;e.Dom.setAttribute(ad,f,af.replace(e.Dom._getClassRegex(ac),i));ae=e.Dom.getAttribute(ad,f);if(af!==ae){e.Dom.setAttribute(ad,f,a(ae));ab=true;if(e.Dom.getAttribute(ad,f)===""){G=(ad.hasAttribute&&ad.hasAttribute(J))?J:f;ad.removeAttribute(G)}}}else{}return ab},replaceClass:function(ac,ab,G){return e.Dom.batch(ac,e.Dom._replaceClass,{from:ab,to:G})},_replaceClass:function(ad,ac){var ab,ag,af,G=false,ae;if(ad&&ac){ag=ac.from;af=ac.to;if(!af){G=false}else{if(!ag){G=e.Dom._addClass(ad,ac.to)}else{if(ag!==af){ae=e.Dom.getAttribute(ad,f)||i;ab=(b+ae.replace(e.Dom._getClassRegex(ag),b+af)).split(e.Dom._getClassRegex(af));ab.splice(1,0,b+af);e.Dom.setAttribute(ad,f,a(ab.join(i)));G=true}}}}else{}return G},generateId:function(G,ac){ac=ac||"yui-gen";var ab=function(ad){if(ad&&ad.id){return ad.id}var ae=ac+YAHOO.env._id_counter++;if(ad){if(ad[H].getElementById(ae)){return e.Dom.generateId(ad,ae+ac)}ad.id=ae}return ae};return e.Dom.batch(G,ab,e.Dom,true)||ab.apply(e.Dom,arguments)},isAncestor:function(ab,ac){ab=e.Dom.get(ab);ac=e.Dom.get(ac);var G=false;if((ab&&ac)&&(ab[O]&&ac[O])){if(ab.contains&&ab!==ac){G=ab.contains(ac)}else{if(ab.compareDocumentPosition){G=!!(ab.compareDocumentPosition(ac)&16)}}}else{}return G},inDocument:function(G,ab){return e.Dom._inDoc(e.Dom.get(G),ab)},_inDoc:function(ab,ac){var G=false;if(ab&&ab[c]){ac=ac||ab[H];G=e.Dom.isAncestor(ac[Z],ab)}else{}return G},getElementsBy:function(ab,ak,ag,ai,ad,ah,aj){ak=ak||"*";ag=(ag)?e.Dom.get(ag):null||l;if(!ag){return[]}var ac=[],G=ag.getElementsByTagName(ak);for(var ae=0,af=G.length;ae<af;++ae){if(ab(G[ae])){if(aj){ac=G[ae];break}else{ac[ac.length]=G[ae]}}}if(ai){e.Dom.batch(ac,ai,ad,ah)}return ac},getElementBy:function(ac,G,ab){return e.Dom.getElementsBy(ac,G,ab,null,null,null,true)},batch:function(ac,ag,af,ae){var ad=[],ab=(ae)?af:window;ac=(ac&&(ac[c]||ac.item))?ac:e.Dom.get(ac);if(ac&&ag){if(ac[c]||ac.length===undefined){return ag.call(ab,ac,af)}for(var G=0;G<ac.length;++G){ad[ad.length]=ag.call(ab,ac[G],af)}}else{return false}return ad},getDocumentHeight:function(){var ab=(l[W]!=p||h)?l.body.scrollHeight:z.scrollHeight,G=Math.max(ab,e.Dom.getViewportHeight());return G},getDocumentWidth:function(){var ab=(l[W]!=p||h)?l.body.scrollWidth:z.scrollWidth,G=Math.max(ab,e.Dom.getViewportWidth());return G},getViewportHeight:function(){var G=self.innerHeight,ab=l[W];if((ab||w)&&!d){G=(ab==p)?z.clientHeight:l.body.clientHeight}return G},getViewportWidth:function(){var G=self.innerWidth,ab=l[W];if(ab||w){G=(ab==p)?z.clientWidth:l.body.clientWidth}return G},getAncestorBy:function(G,ab){while((G=G[B])){if(e.Dom._testElement(G,ab)){return G}}return null},getAncestorByClassName:function(ab,G){ab=e.Dom.get(ab);if(!ab){return null}var ac=function(ad){return e.Dom.hasClass(ad,G)};return e.Dom.getAncestorBy(ab,ac)},getAncestorByTagName:function(ab,G){ab=e.Dom.get(ab);if(!ab){return null}var ac=function(ad){return ad[c]&&ad[c].toUpperCase()==G.toUpperCase()};return e.Dom.getAncestorBy(ab,ac)},getPreviousSiblingBy:function(G,ab){while(G){G=G.previousSibling;if(e.Dom._testElement(G,ab)){return G}}return null},getPreviousSibling:function(G){G=e.Dom.get(G);if(!G){return null}return e.Dom.getPreviousSiblingBy(G)},getNextSiblingBy:function(G,ab){while(G){G=G.nextSibling;if(e.Dom._testElement(G,ab)){return G}}return null},getNextSibling:function(G){G=e.Dom.get(G);if(!G){return null}return e.Dom.getNextSiblingBy(G)},getFirstChildBy:function(G,ac){var ab=(e.Dom._testElement(G.firstChild,ac))?G.firstChild:null;return ab||e.Dom.getNextSiblingBy(G.firstChild,ac)},getFirstChild:function(G,ab){G=e.Dom.get(G);if(!G){return null}return e.Dom.getFirstChildBy(G)},getLastChildBy:function(G,ac){if(!G){return null}var ab=(e.Dom._testElement(G.lastChild,ac))?G.lastChild:null;return ab||e.Dom.getPreviousSiblingBy(G.lastChild,ac)},getLastChild:function(G){G=e.Dom.get(G);return e.Dom.getLastChildBy(G)},getChildrenBy:function(ab,ad){var ac=e.Dom.getFirstChildBy(ab,ad),G=ac?[ac]:[];e.Dom.getNextSiblingBy(ac,function(ae){if(!ad||ad(ae)){G[G.length]=ae}return false});return G},getChildren:function(G){G=e.Dom.get(G);if(!G){}return e.Dom.getChildrenBy(G)},getDocumentScrollLeft:function(G){G=G||l;return Math.max(G[Z].scrollLeft,G.body.scrollLeft)},getDocumentScrollTop:function(G){G=G||l;return Math.max(G[Z].scrollTop,G.body.scrollTop)},insertBefore:function(ab,G){ab=e.Dom.get(ab);G=e.Dom.get(G);if(!ab||!G||!G[B]){return null}return G[B].insertBefore(ab,G)},insertAfter:function(ab,G){ab=e.Dom.get(ab);G=e.Dom.get(G);if(!ab||!G||!G[B]){return null}if(G.nextSibling){return G[B].insertBefore(ab,G.nextSibling)}else{return G[B].appendChild(ab)}},getClientRegion:function(){var ac=e.Dom.getDocumentScrollTop(),ab=e.Dom.getDocumentScrollLeft(),ad=e.Dom.getViewportWidth()+ab,G=e.Dom.getViewportHeight()+ac;return new e.Region(ac,ad,G,ab)},setAttribute:function(ab,G,ac){G=e.Dom.CUSTOM_ATTRIBUTES[G]||G;ab.setAttribute(G,ac)},getAttribute:function(ab,G){G=e.Dom.CUSTOM_ATTRIBUTES[G]||G;return ab.getAttribute(G)},_toCamel:function(ab){var ac=F;function G(ad,ae){return ae.toUpperCase()}return ac[ab]||(ac[ab]=ab.indexOf("-")===-1?ab:ab.replace(/-([a-z])/gi,G))},_getClassRegex:function(ab){var G;if(ab!==undefined){if(ab.exec){G=ab}else{G=K[ab];if(!G){ab=ab.replace(e.Dom._patterns.CLASS_RE_TOKENS,"\\$1");G=K[ab]=new RegExp(V+ab+N,x)}}}return G},_patterns:{ROOT_TAG:/^body|html$/i,CLASS_RE_TOKENS:/([\.\(\)\^\$\*\+\?\|\[\]\{\}])/g},_testElement:function(G,ab){return G&&G[O]==1&&(!ab||ab(G))},_calcBorders:function(ac,ad){var ab=parseInt(e.Dom[aa](ac,u),10)||0,G=parseInt(e.Dom[aa](ac,T),10)||0;if(g){if(q.test(ac[c])){ab=0;G=0}}ad[0]+=G;ad[1]+=ab;return ad}};var v=e.Dom[aa];if(P.opera){e.Dom[aa]=function(ab,G){var ac=v(ab,G);if(A.test(G)){ac=e.Dom.Color.toRGB(ac)}return ac}}if(P.webkit){e.Dom[aa]=function(ab,G){var ac=v(ab,G);if(ac==="rgba(0, 0, 0, 0)"){ac="transparent"}return ac}}})();YAHOO.util.Region=function(d,e,a,c){this.top=d;this.y=d;this[1]=d;this.right=e;this.bottom=a;this.left=c;this.x=c;this[0]=c;this.width=this.right-this.left;this.height=this.bottom-this.top};YAHOO.util.Region.prototype.contains=function(a){return(a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom)};YAHOO.util.Region.prototype.getArea=function(){return((this.bottom-this.top)*(this.right-this.left))};YAHOO.util.Region.prototype.intersect=function(f){var d=Math.max(this.top,f.top),e=Math.min(this.right,f.right),a=Math.min(this.bottom,f.bottom),c=Math.max(this.left,f.left);if(a>=d&&e>=c){return new YAHOO.util.Region(d,e,a,c)}else{return null}};YAHOO.util.Region.prototype.union=function(f){var d=Math.min(this.top,f.top),e=Math.max(this.right,f.right),a=Math.max(this.bottom,f.bottom),c=Math.min(this.left,f.left);return new YAHOO.util.Region(d,e,a,c)};YAHOO.util.Region.prototype.toString=function(){return("Region {top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+", height: "+this.height+", width: "+this.width+"}")};YAHOO.util.Region.getRegion=function(e){var g=YAHOO.util.Dom.getXY(e),d=g[1],f=g[0]+e.offsetWidth,a=g[1]+e.offsetHeight,c=g[0];return new YAHOO.util.Region(d,f,a,c)};YAHOO.util.Point=function(a,b){if(YAHOO.lang.isArray(a)){b=a[1];a=a[0]}YAHOO.util.Point.superclass.constructor.call(this,b,a,b,a)};YAHOO.extend(YAHOO.util.Point,YAHOO.util.Region);(function(){var b=YAHOO.util,a="clientTop",f="clientLeft",l="parentNode",o="right",A="hasLayout",i="px",y="opacity",p="auto",d="borderLeftWidth",g="borderTopWidth",t="borderRightWidth",z="borderBottomWidth",w="visible",u="transparent",r="height",e="width",h="style",x="currentStyle",v=/^width|height$/,s=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,q={get:function(B,D){var C="",E=B[x][D];if(D===y){C=b.Dom.getStyle(B,y)}else{if(!E||(E.indexOf&&E.indexOf(i)>-1)){C=E}else{if(b.Dom.IE_COMPUTED[D]){C=b.Dom.IE_COMPUTED[D](B,D)}else{if(s.test(E)){C=b.Dom.IE.ComputedStyle.getPixel(B,D)}else{C=E}}}}return C},getOffset:function(D,I){var F=D[x][I],B=I.charAt(0).toUpperCase()+I.substr(1),G="offset"+B,C="pixel"+B,E="",H;if(F==p){H=D[G];if(H===undefined){E=0}E=H;if(v.test(I)){D[h][I]=H;if(D[G]>H){E=H-(D[G]-H)}D[h][I]=p}}else{if(!D[h][C]&&!D[h][I]){D[h][I]=F}E=D[h][C]}return E+i},getBorderWidth:function(B,D){var C=null;if(!B[x][A]){B[h].zoom=1}switch(D){case g:C=B[a];break;case z:C=B.offsetHeight-B.clientHeight-B[a];break;case d:C=B[f];break;case t:C=B.offsetWidth-B.clientWidth-B[f];break}return C+i},getPixel:function(C,B){var E=null,F=C[x][o],D=C[x][B];C[h][o]=D;E=C[h].pixelRight;C[h][o]=F;return E+i},getMargin:function(C,B){var D;if(C[x][B]==p){D=0+i}else{D=b.Dom.IE.ComputedStyle.getPixel(C,B)}return D},getVisibility:function(C,B){var D;while((D=C[x])&&D[B]=="inherit"){C=C[l]}return(D)?D[B]:w},getColor:function(C,B){return b.Dom.Color.toRGB(C[x][B])||u},getBorderColor:function(C,B){var D=C[x],E=D[B]||D.color;return b.Dom.Color.toRGB(b.Dom.Color.toHex(E))}},c={};c.top=c.right=c.bottom=c.left=c[e]=c[r]=q.getOffset;c.color=q.getColor;c[g]=c[t]=c[z]=c[d]=q.getBorderWidth;c.marginTop=c.marginRight=c.marginBottom=c.marginLeft=q.getMargin;c.visibility=q.getVisibility;c.borderColor=c.borderTopColor=c.borderRightColor=c.borderBottomColor=c.borderLeftColor=q.getBorderColor;b.Dom.IE_COMPUTED=c;b.Dom.IE_ComputedStyle=q})();(function(){var c="toString",a=parseInt,b=RegExp,d=YAHOO.util;d.Dom.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(e){if(!d.Dom.Color.re_RGB.test(e)){e=d.Dom.Color.toHex(e)}if(d.Dom.Color.re_hex.exec(e)){e="rgb("+[a(b.$1,16),a(b.$2,16),a(b.$3,16)].join(", ")+")"}return e},toHex:function(i){i=d.Dom.Color.KEYWORDS[i]||i;if(d.Dom.Color.re_RGB.exec(i)){var h=(b.$1.length===1)?"0"+b.$1:Number(b.$1),f=(b.$2.length===1)?"0"+b.$2:Number(b.$2),e=(b.$3.length===1)?"0"+b.$3:Number(b.$3);i=[h[c](16),f[c](16),e[c](16)].join("")}if(i.length<6){i=i.replace(d.Dom.Color.re_hex3,"$1$1")}if(i!=="transparent"&&i.indexOf("#")<0){i="#"+i}return i.toLowerCase()}}}());YAHOO.register("dom",YAHOO.util.Dom,{version:"2.7.0",build:"1799"});YAHOO.util.CustomEvent=function(d,c,b,a){this.type=d;this.scope=c||window;this.silent=b;this.signature=a||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent){}var e="_YUICEOnSubscribe";if(d!==e){this.subscribeEvent=new YAHOO.util.CustomEvent(e,this,true)}this.lastError=null};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(a,b,c){if(!a){throw new Error("Invalid callback for subscriber to '"+this.type+"'")}if(this.subscribeEvent){this.subscribeEvent.fire(a,b,c)}this.subscribers.push(new YAHOO.util.Subscriber(a,b,c))},unsubscribe:function(d,f){if(!d){return this.unsubscribeAll()}var e=false;for(var b=0,a=this.subscribers.length;b<a;++b){var c=this.subscribers[b];if(c&&c.contains(d,f)){this._delete(b);e=true}}return e},fire:function(){this.lastError=null;var q=[],f=this.subscribers.length;if(!f&&this.silent){return true}var o=[].slice.call(arguments,0),h=true,d,p=false;if(!this.silent){}var c=this.subscribers.slice(),a=YAHOO.util.Event.throwErrors;for(d=0;d<f;++d){var t=c[d];if(!t){p=true}else{if(!this.silent){}var r=t.getScope(this.scope);if(this.signature==YAHOO.util.CustomEvent.FLAT){var b=null;if(o.length>0){b=o[0]}try{h=t.fn.call(r,b,t.obj)}catch(g){this.lastError=g;if(a){throw g}}}else{try{h=t.fn.call(r,this.type,o,t.obj)}catch(l){this.lastError=l;if(a){throw l}}}if(false===h){if(!this.silent){}break}}}return(h!==false)},unsubscribeAll:function(){var a=this.subscribers.length,b;for(b=a-1;b>-1;b--){this._delete(b)}this.subscribers=[];return a},_delete:function(a){var b=this.subscribers[a];if(b){delete b.fn;delete b.obj}this.subscribers.splice(a,1)},toString:function(){return"CustomEvent: '"+this.type+"', context: "+this.scope}};YAHOO.util.Subscriber=function(a,b,c){this.fn=a;this.obj=YAHOO.lang.isUndefined(b)?null:b;this.overrideContext=c};YAHOO.util.Subscriber.prototype.getScope=function(a){if(this.overrideContext){if(this.overrideContext===true){return this.obj}else{return this.overrideContext}}return a};YAHOO.util.Subscriber.prototype.contains=function(a,b){if(b){return(this.fn==a&&this.obj==b)}else{return(this.fn==a)}};YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", overrideContext: "+(this.overrideContext||"no")+" }"};if(!YAHOO.util.Event){YAHOO.util.Event=function(){var h=false;var i=[];var l=[];var g=[];var e=[];var c=0;var f=[];var b=[];var a=0;var d={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9};var o=YAHOO.env.ua.ie?"focusin":"focus";var p=YAHOO.env.ua.ie?"focusout":"blur";return{POLL_RETRYS:2000,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:YAHOO.env.ua.ie,_interval:null,_dri:null,DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval){var q=this;var r=function(){q._tryPreloadAttach()};this._interval=setInterval(r,this.POLL_INTERVAL)}},onAvailable:function(w,s,u,v,t){var q=(YAHOO.lang.isString(w))?[w]:w;for(var r=0;r<q.length;r=r+1){f.push({id:q[r],fn:s,obj:u,overrideContext:v,checkReady:t})}c=this.POLL_RETRYS;this.startInterval()},onContentReady:function(t,q,r,s){this.onAvailable(t,q,r,s,true)},onDOMReady:function(q,r,s){if(this.DOMReady){setTimeout(function(){var t=window;if(s){if(s===true){t=r}else{t=s}}q.call(t,"DOMReady",[],r)},0)}else{this.DOMReadyEvent.subscribe(q,r,s)}},_addListener:function(s,q,C,w,A,F){if(!C||!C.call){return false}if(this._isValidCollection(s)){var D=true;for(var x=0,z=s.length;x<z;++x){D=this.on(s[x],q,C,w,A)&&D}return D}else{if(YAHOO.lang.isString(s)){var v=this.getEl(s);if(v){s=v}else{this.onAvailable(s,function(){YAHOO.util.Event.on(s,q,C,w,A)});return true}}}if(!s){return false}if("unload"==q&&w!==this){l[l.length]=[s,q,C,w,A];return true}var r=s;if(A){if(A===true){r=w}else{r=A}}var t=function(G){return C.call(r,YAHOO.util.Event.getEvent(G,s),w)};var E=[s,q,C,t,r,w,A];var y=i.length;i[y]=E;if(this.useLegacyEvent(s,q)){var u=this.getLegacyIndex(s,q);if(u==-1||s!=g[u][0]){u=g.length;b[s.id+q]=u;g[u]=[s,q,s["on"+q]];e[u]=[];s["on"+q]=function(G){YAHOO.util.Event.fireLegacyEvent(YAHOO.util.Event.getEvent(G),u)}}e[u].push(E)}else{try{this._simpleAdd(s,q,t,F)}catch(B){this.lastError=B;this.removeListener(s,q,C);return false}}return true},addListener:function(r,u,q,s,t){return this._addListener(r,u,q,s,t,false)},addFocusListener:function(r,q,s,t){return this._addListener(r,o,q,s,t,true)},removeFocusListener:function(r,q){return this.removeListener(r,o,q)},addBlurListener:function(r,q,s,t){return this._addListener(r,p,q,s,t,true)},removeBlurListener:function(r,q){return this.removeListener(r,p,q)},fireLegacyEvent:function(v,t){var x=true,q,z,y,r,w;z=e[t].slice();for(var s=0,u=z.length;s<u;++s){y=z[s];if(y&&y[this.WFN]){r=y[this.ADJ_SCOPE];w=y[this.WFN].call(r,v);x=(x&&w)}}q=g[t];if(q&&q[2]){q[2](v)}return x},getLegacyIndex:function(r,s){var q=this.generateId(r)+s;if(typeof b[q]=="undefined"){return -1}else{return b[q]}},useLegacyEvent:function(q,r){return(this.webkit&&this.webkit<419&&("click"==r||"dblclick"==r))},removeListener:function(r,q,z){var u,x,B;if(typeof r=="string"){r=this.getEl(r)}else{if(this._isValidCollection(r)){var A=true;for(u=r.length-1;u>-1;u--){A=(this.removeListener(r[u],q,z)&&A)}return A}}if(!z||!z.call){return this.purgeElement(r,false,q)}if("unload"==q){for(u=l.length-1;u>-1;u--){B=l[u];if(B&&B[0]==r&&B[1]==q&&B[2]==z){l.splice(u,1);return true}}return false}var v=null;var w=arguments[3];if("undefined"===typeof w){w=this._getCacheIndex(r,q,z)}if(w>=0){v=i[w]}if(!r||!v){return false}if(this.useLegacyEvent(r,q)){var t=this.getLegacyIndex(r,q);var s=e[t];if(s){for(u=0,x=s.length;u<x;++u){B=s[u];if(B&&B[this.EL]==r&&B[this.TYPE]==q&&B[this.FN]==z){s.splice(u,1);break}}}}else{try{this._simpleRemove(r,q,v[this.WFN],false)}catch(y){this.lastError=y;return false}}delete i[w][this.WFN];delete i[w][this.FN];i.splice(w,1);return true},getTarget:function(s,r){var q=s.target||s.srcElement;return this.resolveTextNode(q)},resolveTextNode:function(r){try{if(r&&3==r.nodeType){return r.parentNode}}catch(q){}return r},getPageX:function(r){var q=r.pageX;if(!q&&0!==q){q=r.clientX||0;if(this.isIE){q+=this._getScrollLeft()}}return q},getPageY:function(q){var r=q.pageY;if(!r&&0!==r){r=q.clientY||0;if(this.isIE){r+=this._getScrollTop()}}return r},getXY:function(q){return[this.getPageX(q),this.getPageY(q)]},getRelatedTarget:function(r){var q=r.relatedTarget;if(!q){if(r.type=="mouseout"){q=r.toElement}else{if(r.type=="mouseover"){q=r.fromElement}}}return this.resolveTextNode(q)},getTime:function(s){if(!s.time){var r=new Date().getTime();try{s.time=r}catch(q){this.lastError=q;return r}}return s.time},stopEvent:function(q){this.stopPropagation(q);this.preventDefault(q)},stopPropagation:function(q){if(q.stopPropagation){q.stopPropagation()}else{q.cancelBubble=true}},preventDefault:function(q){if(q.preventDefault){q.preventDefault()}else{q.returnValue=false}},getEvent:function(s,q){var r=s||window.event;if(!r){var t=this.getEvent.caller;while(t){r=t.arguments[0];if(r&&Event==r.constructor){break}t=t.caller}}return r},getCharCode:function(r){var q=r.keyCode||r.charCode||0;if(YAHOO.env.ua.webkit&&(q in d)){q=d[q]}return q},_getCacheIndex:function(u,v,t){for(var s=0,r=i.length;s<r;s=s+1){var q=i[s];if(q&&q[this.FN]==t&&q[this.EL]==u&&q[this.TYPE]==v){return s}}return -1},generateId:function(q){var r=q.id;if(!r){r="yuievtautoid-"+a;++a;q.id=r}return r},_isValidCollection:function(r){try{return(r&&typeof r!=="string"&&r.length&&!r.tagName&&!r.alert&&typeof r[0]!=="undefined")}catch(q){return false}},elCache:{},getEl:function(q){return(typeof q==="string")?document.getElementById(q):q},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",this),_load:function(r){if(!h){h=true;var q=YAHOO.util.Event;q._ready();q._tryPreloadAttach()}},_ready:function(r){var q=YAHOO.util.Event;if(!q.DOMReady){q.DOMReady=true;q.DOMReadyEvent.fire();q._simpleRemove(document,"DOMContentLoaded",q._ready)}},_tryPreloadAttach:function(){if(f.length===0){c=0;if(this._interval){clearInterval(this._interval);this._interval=null}return}if(this.locked){return}if(this.isIE){if(!this.DOMReady){this.startInterval();return}}this.locked=true;var w=!h;if(!w){w=(c>0&&f.length>0)}var v=[];var x=function(z,A){var y=z;if(A.overrideContext){if(A.overrideContext===true){y=A.obj}else{y=A.overrideContext}}A.fn.call(y,A.obj)};var r,q,u,t,s=[];for(r=0,q=f.length;r<q;r=r+1){u=f[r];if(u){t=this.getEl(u.id);if(t){if(u.checkReady){if(h||t.nextSibling||!w){s.push(u);f[r]=null}}else{x(t,u);f[r]=null}}else{v.push(u)}}}for(r=0,q=s.length;r<q;r=r+1){u=s[r];x(this.getEl(u.id),u)}c--;if(w){for(r=f.length-1;r>-1;r--){u=f[r];if(!u||!u.id){f.splice(r,1)}}this.startInterval()}else{if(this._interval){clearInterval(this._interval);this._interval=null}}this.locked=false},purgeElement:function(u,v,x){var s=(YAHOO.lang.isString(u))?this.getEl(u):u;var w=this.getListeners(s,x),t,q;if(w){for(t=w.length-1;t>-1;t--){var r=w[t];this.removeListener(s,r.type,r.fn)}}if(v&&s&&s.childNodes){for(t=0,q=s.childNodes.length;t<q;++t){this.purgeElement(s.childNodes[t],v,x)}}},getListeners:function(s,q){var v=[],r;if(!q){r=[i,l]}else{if(q==="unload"){r=[l]}else{r=[i]}}var x=(YAHOO.lang.isString(s))?this.getEl(s):s;for(var u=0;u<r.length;u=u+1){var z=r[u];if(z){for(var w=0,y=z.length;w<y;++w){var t=z[w];if(t&&t[this.EL]===x&&(!q||q===t[this.TYPE])){v.push({type:t[this.TYPE],fn:t[this.FN],obj:t[this.OBJ],adjust:t[this.OVERRIDE],scope:t[this.ADJ_SCOPE],index:w})}}}}return(v.length)?v:null},_unload:function(x){var r=YAHOO.util.Event,u,t,s,w,v,y=l.slice(),q;for(u=0,w=l.length;u<w;++u){s=y[u];if(s){q=window;if(s[r.ADJ_SCOPE]){if(s[r.ADJ_SCOPE]===true){q=s[r.UNLOAD_OBJ]}else{q=s[r.ADJ_SCOPE]}}s[r.FN].call(q,r.getEvent(x,s[r.EL]),s[r.UNLOAD_OBJ]);y[u]=null}}s=null;q=null;l=null;if(i){for(t=i.length-1;t>-1;t--){s=i[t];if(s){r.removeListener(s[r.EL],s[r.TYPE],s[r.FN],t)}}s=null}g=null;r._simpleRemove(window,"unload",r._unload)},_getScrollLeft:function(){return this._getScroll()[1]},_getScrollTop:function(){return this._getScroll()[0]},_getScroll:function(){var q=document.documentElement,r=document.body;if(q&&(q.scrollTop||q.scrollLeft)){return[q.scrollTop,q.scrollLeft]}else{if(r){return[r.scrollTop,r.scrollLeft]}else{return[0,0]}}},regCE:function(){},_simpleAdd:function(){if(window.addEventListener){return function(s,t,r,q){s.addEventListener(t,r,(q))}}else{if(window.attachEvent){return function(s,t,r,q){s.attachEvent("on"+t,r)}}else{return function(){}}}}(),_simpleRemove:function(){if(window.removeEventListener){return function(s,t,r,q){s.removeEventListener(t,r,(q))}}else{if(window.detachEvent){return function(r,s,q){r.detachEvent("on"+s,q)}}else{return function(){}}}}()}}();(function(){var a=YAHOO.util.Event;a.on=a.addListener;a.onFocus=a.addFocusListener;a.onBlur=a.addBlurListener;
/* DOMReady: based on work by: Dean Edwards/John Resig/Matthias Miller */
if(a.isIE){YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var b=document.createElement("p");a._dri=setInterval(function(){try{b.doScroll("left");clearInterval(a._dri);a._dri=null;a._ready();b=null}catch(c){}},a.POLL_INTERVAL)}else{if(a.webkit&&a.webkit<525){a._dri=setInterval(function(){var c=document.readyState;if("loaded"==c||"complete"==c){clearInterval(a._dri);a._dri=null;a._ready()}},a.POLL_INTERVAL)}else{a._simpleAdd(document,"DOMContentLoaded",a._ready)}}a._simpleAdd(window,"load",a._load);a._simpleAdd(window,"unload",a._unload);a._tryPreloadAttach()})()}YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(a,c,f,e){this.__yui_events=this.__yui_events||{};var d=this.__yui_events[a];if(d){d.subscribe(c,f,e)}else{this.__yui_subscribers=this.__yui_subscribers||{};var b=this.__yui_subscribers;if(!b[a]){b[a]=[]}b[a].push({fn:c,obj:f,overrideContext:e})}},unsubscribe:function(c,e,g){this.__yui_events=this.__yui_events||{};var a=this.__yui_events;if(c){var f=a[c];if(f){return f.unsubscribe(e,g)}}else{var b=true;for(var d in a){if(YAHOO.lang.hasOwnProperty(a,d)){b=b&&a[d].unsubscribe(e,g)}}return b}return false},unsubscribeAll:function(a){return this.unsubscribe(a)},createEvent:function(g,d){this.__yui_events=this.__yui_events||{};var a=d||{};var l=this.__yui_events;if(l[g]){}else{var h=a.scope||this;var e=(a.silent);var b=new YAHOO.util.CustomEvent(g,h,e,YAHOO.util.CustomEvent.FLAT);l[g]=b;if(a.onSubscribeCallback){b.subscribeEvent.subscribe(a.onSubscribeCallback)}this.__yui_subscribers=this.__yui_subscribers||{};var f=this.__yui_subscribers[g];if(f){for(var c=0;c<f.length;++c){b.subscribe(f[c].fn,f[c].obj,f[c].overrideContext)}}}return l[g]},fireEvent:function(e,d,a,c){this.__yui_events=this.__yui_events||{};var g=this.__yui_events[e];if(!g){return null}var b=[];for(var f=1;f<arguments.length;++f){b.push(arguments[f])}return g.fire.apply(g,b)},hasEvent:function(a){if(this.__yui_events){if(this.__yui_events[a]){return true}}return false}};(function(){var a=YAHOO.util.Event,c=YAHOO.lang;YAHOO.util.KeyListener=function(d,i,e,f){if(!d){}else{if(!i){}else{if(!e){}}}if(!f){f=YAHOO.util.KeyListener.KEYDOWN}var g=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(c.isString(d)){d=document.getElementById(d)}if(c.isFunction(e)){g.subscribe(e)}else{g.subscribe(e.fn,e.scope,e.correctScope)}function h(s,r){if(!i.shift){i.shift=false}if(!i.alt){i.alt=false}if(!i.ctrl){i.ctrl=false}if(s.shiftKey==i.shift&&s.altKey==i.alt&&s.ctrlKey==i.ctrl){var l,q=i.keys,p;if(YAHOO.lang.isArray(q)){for(var o=0;o<q.length;o++){l=q[o];p=a.getCharCode(s);if(l==p){g.fire(p,s);break}}}else{p=a.getCharCode(s);if(q==p){g.fire(p,s)}}}}this.enable=function(){if(!this.enabled){a.on(d,f,h);this.enabledEvent.fire(i)}this.enabled=true};this.disable=function(){if(this.enabled){a.removeListener(d,f,h);this.disabledEvent.fire(i)}this.enabled=false};this.toString=function(){return"KeyListener ["+i.keys+"] "+d.tagName+(d.id?"["+d.id+"]":"")}};var b=YAHOO.util.KeyListener;b.KEYDOWN="keydown";b.KEYUP="keyup";b.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38}})();YAHOO.register("event",YAHOO.util.Event,{version:"2.7.0",build:"1799"});YAHOO.util.Get=function(){var q={},p=0,v=0,e=false,r=YAHOO.env.ua,w=YAHOO.lang;var l=function(A,x,B){var y=B||window,C=y.document,D=C.createElement(A);for(var z in x){if(x[z]&&YAHOO.lang.hasOwnProperty(x,z)){D.setAttribute(z,x[z])}}return D};var i=function(x,y,A){var z=A||"utf-8";return l("link",{id:"yui__dyn_"+(v++),type:"text/css",charset:z,rel:"stylesheet",href:x},y)};var t=function(x,y,A){var z=A||"utf-8";return l("script",{id:"yui__dyn_"+(v++),type:"text/javascript",charset:z,src:x},y)};var a=function(x,y){return{tId:x.tId,win:x.win,data:x.data,nodes:x.nodes,msg:y,purge:function(){d(this.tId)}}};var b=function(x,A){var y=q[A],z=(w.isString(x))?y.win.document.getElementById(x):x;if(!z){u(A,"target node not found: "+x)}return z};var u=function(A,z){var x=q[A];if(x.onFailure){var y=x.scope||x.win;x.onFailure.call(y,a(x,z))}};var c=function(A){var x=q[A];x.finished=true;if(x.aborted){var z="transaction "+A+" was aborted";u(A,z);return}if(x.onSuccess){var y=x.scope||x.win;x.onSuccess.call(y,a(x))}};var s=function(z){var x=q[z];if(x.onTimeout){var y=x.scope||x;x.onTimeout.call(y,a(x))}};var g=function(z,D){var y=q[z];if(y.timer){y.timer.cancel()}if(y.aborted){var B="transaction "+z+" was aborted";u(z,B);return}if(D){y.url.shift();if(y.varName){y.varName.shift()}}else{y.url=(w.isString(y.url))?[y.url]:y.url;if(y.varName){y.varName=(w.isString(y.varName))?[y.varName]:y.varName}}var G=y.win,F=G.document,E=F.getElementsByTagName("head")[0],A;if(y.url.length===0){if(y.type==="script"&&r.webkit&&r.webkit<420&&!y.finalpass&&!y.varName){var C=t(null,y.win,y.charset);C.innerHTML='YAHOO.util.Get._finalize("'+z+'");';y.nodes.push(C);E.appendChild(C)}else{c(z)}return}var x=y.url[0];if(!x){y.url.shift();return g(z)}if(y.timeout){y.timer=w.later(y.timeout,y,s,z)}if(y.type==="script"){A=t(x,G,y.charset)}else{A=i(x,G,y.charset)}f(y.type,A,z,x,G,y.url.length);y.nodes.push(A);if(y.insertBefore){var H=b(y.insertBefore,z);if(H){H.parentNode.insertBefore(A,H)}}else{E.appendChild(A)}if((r.webkit||r.gecko)&&y.type==="css"){g(z,x)}};var o=function(){if(e){return}e=true;for(var x in q){var y=q[x];if(y.autopurge&&y.finished){d(y.tId);delete q[x]}}e=false};var d=function(E){var B=q[E];if(B){var D=B.nodes,x=D.length,C=B.win.document,A=C.getElementsByTagName("head")[0];if(B.insertBefore){var z=b(B.insertBefore,E);if(z){A=z.parentNode}}for(var y=0;y<x;y=y+1){A.removeChild(D[y])}B.nodes=[]}};var h=function(y,x,z){var B="q"+(p++);z=z||{};if(p%YAHOO.util.Get.PURGE_THRESH===0){o()}q[B]=w.merge(z,{tId:B,type:y,url:x,finished:false,aborted:false,nodes:[]});var A=q[B];A.win=A.win||window;A.scope=A.scope||A.win;A.autopurge=("autopurge" in A)?A.autopurge:(y==="script")?true:false;w.later(0,A,g,B);return{tId:B}};var f=function(G,B,A,y,C,D,F){var E=F||g;if(r.ie){B.onreadystatechange=function(){var H=this.readyState;if("loaded"===H||"complete"===H){B.onreadystatechange=null;E(A,y)}}}else{if(r.webkit){if(G==="script"){if(r.webkit>=420){B.addEventListener("load",function(){E(A,y)})}else{var x=q[A];if(x.varName){var z=YAHOO.util.Get.POLL_FREQ;x.maxattempts=YAHOO.util.Get.TIMEOUT/z;x.attempts=0;x._cache=x.varName[0].split(".");x.timer=w.later(z,x,function(M){var J=this._cache,I=J.length,H=this.win,K;for(K=0;K<I;K=K+1){H=H[J[K]];if(!H){this.attempts++;if(this.attempts++>this.maxattempts){var L="Over retry limit, giving up";x.timer.cancel();u(A,L)}else{}return}}x.timer.cancel();E(A,y)},null,true)}else{w.later(YAHOO.util.Get.POLL_FREQ,null,E,[A,y])}}}}else{B.onload=function(){E(A,y)}}}};return{POLL_FREQ:10,PURGE_THRESH:20,TIMEOUT:2000,_finalize:function(x){w.later(0,null,c,x)},abort:function(y){var z=(w.isString(y))?y:y.tId;var x=q[z];if(x){x.aborted=true}},script:function(x,y){return h("script",x,y)},css:function(x,y){return h("css",x,y)}}}();YAHOO.register("get",YAHOO.util.Get,{version:"2.7.0",build:"1799"});if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={}}YAHOO.namespace=function(){var b=arguments,g=null,e,c,f;for(e=0;e<b.length;e=e+1){f=(""+b[e]).split(".");g=YAHOO;for(c=(f[0]=="YAHOO")?1:0;c<f.length;c=c+1){g[f[c]]=g[f[c]]||{};g=g[f[c]]}}return g};YAHOO.log=function(d,a,c){var b=YAHOO.widget.Logger;if(b&&b.log){return b.log(d,a,c)}else{return false}};YAHOO.register=function(a,f,e){var o=YAHOO.env.modules,c,l,h,g,d;if(!o[a]){o[a]={versions:[],builds:[]}}c=o[a];l=e.version;h=e.build;g=YAHOO.env.listeners;c.name=a;c.version=l;c.build=h;c.versions.push(l);c.builds.push(h);c.mainClass=f;for(d=0;d<g.length;d=d+1){g[d](c)}if(f){f.VERSION=l;f.BUILD=h}else{YAHOO.log("mainClass is undefined for module "+a,"warn")}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(a){return YAHOO.env.modules[a]||null};YAHOO.env.ua=function(){var c={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:0},b=navigator.userAgent,a;if((/KHTML/).test(b)){c.webkit=1}a=b.match(/AppleWebKit\/([^\s]*)/);if(a&&a[1]){c.webkit=parseFloat(a[1]);if(/ Mobile\//.test(b)){c.mobile="Apple"}else{a=b.match(/NokiaN[^\/]*/);if(a){c.mobile=a[0]}}a=b.match(/AdobeAIR\/([^\s]*)/);if(a){c.air=a[0]}}if(!c.webkit){a=b.match(/Opera[\s\/]([^\s]*)/);if(a&&a[1]){c.opera=parseFloat(a[1]);a=b.match(/Opera Mini[^;]*/);if(a){c.mobile=a[0]}}else{a=b.match(/MSIE\s([^;]*)/);if(a&&a[1]){c.ie=parseFloat(a[1])}else{a=b.match(/Gecko\/([^\s]*)/);if(a){c.gecko=1;a=b.match(/rv:([^\s\)]*)/);if(a&&a[1]){c.gecko=parseFloat(a[1])}}}}}a=b.match(/Caja\/([^\s]*)/);if(a&&a[1]){c.caja=parseFloat(a[1])}return c}();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var b=YAHOO_config.listener,a=YAHOO.env.listeners,d=true,c;if(b){for(c=0;c<a.length;c=c+1){if(a[c]==b){d=false;break}}if(d){a.push(b)}}}})();YAHOO.lang=YAHOO.lang||{};(function(){var b=YAHOO.lang,f="[object Array]",c="[object Function]",a=Object.prototype,e=["toString","valueOf"],d={isArray:function(g){return a.toString.apply(g)===f},isBoolean:function(g){return typeof g==="boolean"},isFunction:function(g){return a.toString.apply(g)===c},isNull:function(g){return g===null},isNumber:function(g){return typeof g==="number"&&isFinite(g)},isObject:function(g){return(g&&(typeof g==="object"||b.isFunction(g)))||false},isString:function(g){return typeof g==="string"},isUndefined:function(g){return typeof g==="undefined"},_IEEnumFix:(YAHOO.env.ua.ie)?function(l,h){var g,p,o;for(g=0;g<e.length;g=g+1){p=e[g];o=h[p];if(b.isFunction(o)&&o!=a[p]){l[p]=o}}}:function(){},extend:function(o,p,l){if(!p||!o){throw new Error("extend failed, please check that all dependencies are included.")}var h=function(){},g;h.prototype=p.prototype;o.prototype=new h();o.prototype.constructor=o;o.superclass=p.prototype;if(p.prototype.constructor==a.constructor){p.prototype.constructor=p}if(l){for(g in l){if(b.hasOwnProperty(l,g)){o.prototype[g]=l[g]}}b._IEEnumFix(o.prototype,l)}},augmentObject:function(q,o){if(!o||!q){throw new Error("Absorb failed, verify dependencies.")}var g=arguments,l,t,h=g[2];if(h&&h!==true){for(l=2;l<g.length;l=l+1){q[g[l]]=o[g[l]]}}else{for(t in o){if(h||!(t in q)){q[t]=o[t]}}b._IEEnumFix(q,o)}},augmentProto:function(o,l){if(!l||!o){throw new Error("Augment failed, verify dependencies.")}var g=[o.prototype,l.prototype],h;for(h=2;h<arguments.length;h=h+1){g.push(arguments[h])}b.augmentObject.apply(this,g)},dump:function(g,r){var l,q,u=[],v="{...}",h="f(){...}",t=", ",p=" => ";if(!b.isObject(g)){return g+""}else{if(g instanceof Date||("nodeType" in g&&"tagName" in g)){return g}else{if(b.isFunction(g)){return h}}}r=(b.isNumber(r))?r:3;if(b.isArray(g)){u.push("[");for(l=0,q=g.length;l<q;l=l+1){if(b.isObject(g[l])){u.push((r>0)?b.dump(g[l],r-1):v)}else{u.push(g[l])}u.push(t)}if(u.length>1){u.pop()}u.push("]")}else{u.push("{");for(l in g){if(b.hasOwnProperty(g,l)){u.push(l+p);if(b.isObject(g[l])){u.push((r>0)?b.dump(g[l],r-1):v)}else{u.push(g[l])}u.push(t)}}if(u.length>1){u.pop()}u.push("}")}return u.join("")},substitute:function(D,h,w){var r,q,p,z,A,C,y=[],l,t="dump",x=" ",g="{",B="}",u;for(;;){r=D.lastIndexOf(g);if(r<0){break}q=D.indexOf(B,r);if(r+1>=q){break}l=D.substring(r+1,q);z=l;C=null;p=z.indexOf(x);if(p>-1){C=z.substring(p+1);z=z.substring(0,p)}A=h[z];if(w){A=w(z,A,C)}if(b.isObject(A)){if(b.isArray(A)){A=b.dump(A,parseInt(C,10))}else{C=C||"";u=C.indexOf(t);if(u>-1){C=C.substring(4)}if(A.toString===a.toString||u>-1){A=b.dump(A,parseInt(C,10))}else{A=A.toString()}}}else{if(!b.isString(A)&&!b.isNumber(A)){A="~-"+y.length+"-~";y[y.length]=l}}D=D.substring(0,r)+A+D.substring(q+1)}for(r=y.length-1;r>=0;r=r-1){D=D.replace(new RegExp("~-"+r+"-~"),"{"+y[r]+"}","g")}return D},trim:function(g){try{return g.replace(/^\s+|\s+$/g,"")}catch(h){return g}},merge:function(){var q={},h=arguments,g=h.length,p;for(p=0;p<g;p=p+1){b.augmentObject(q,h[p],true)}return q},later:function(t,h,u,l,p){t=t||0;h=h||{};var i=u,s=l,q,g;if(b.isString(u)){i=h[u]}if(!i){throw new TypeError("method undefined")}if(!b.isArray(s)){s=[l]}q=function(){i.apply(h,s)};g=(p)?setInterval(q,t):setTimeout(q,t);return{interval:p,cancel:function(){if(this.interval){clearInterval(g)}else{clearTimeout(g)}}}},isValue:function(g){return(b.isObject(g)||b.isString(g)||b.isNumber(g)||b.isBoolean(g))}};b.hasOwnProperty=(a.hasOwnProperty)?function(g,h){return g&&g.hasOwnProperty(h)}:function(g,h){return !b.isUndefined(g[h])&&g.constructor.prototype[h]!==g[h]};d.augmentObject(b,d,true);YAHOO.util.Lang=b;b.augment=b.augmentProto;YAHOO.augment=b.augmentProto;YAHOO.extend=b.extend})();YAHOO.register("yahoo",YAHOO,{version:"2.7.0",build:"1799"});YAHOO.util.Get=function(){var q={},p=0,v=0,e=false,r=YAHOO.env.ua,w=YAHOO.lang;var l=function(A,x,B){var y=B||window,C=y.document,D=C.createElement(A);for(var z in x){if(x[z]&&YAHOO.lang.hasOwnProperty(x,z)){D.setAttribute(z,x[z])}}return D};var i=function(x,y,A){var z=A||"utf-8";return l("link",{id:"yui__dyn_"+(v++),type:"text/css",charset:z,rel:"stylesheet",href:x},y)};var t=function(x,y,A){var z=A||"utf-8";return l("script",{id:"yui__dyn_"+(v++),type:"text/javascript",charset:z,src:x},y)};var a=function(x,y){return{tId:x.tId,win:x.win,data:x.data,nodes:x.nodes,msg:y,purge:function(){d(this.tId)}}};var b=function(x,A){var y=q[A],z=(w.isString(x))?y.win.document.getElementById(x):x;if(!z){u(A,"target node not found: "+x)}return z};var u=function(A,z){var x=q[A];if(x.onFailure){var y=x.scope||x.win;x.onFailure.call(y,a(x,z))}};var c=function(A){var x=q[A];x.finished=true;if(x.aborted){var z="transaction "+A+" was aborted";u(A,z);return}if(x.onSuccess){var y=x.scope||x.win;x.onSuccess.call(y,a(x))}};var s=function(z){var x=q[z];if(x.onTimeout){var y=x.scope||x;x.onTimeout.call(y,a(x))}};var g=function(z,D){var y=q[z];if(y.timer){y.timer.cancel()}if(y.aborted){var B="transaction "+z+" was aborted";u(z,B);return}if(D){y.url.shift();if(y.varName){y.varName.shift()}}else{y.url=(w.isString(y.url))?[y.url]:y.url;if(y.varName){y.varName=(w.isString(y.varName))?[y.varName]:y.varName}}var G=y.win,F=G.document,E=F.getElementsByTagName("head")[0],A;if(y.url.length===0){if(y.type==="script"&&r.webkit&&r.webkit<420&&!y.finalpass&&!y.varName){var C=t(null,y.win,y.charset);C.innerHTML='YAHOO.util.Get._finalize("'+z+'");';y.nodes.push(C);E.appendChild(C)}else{c(z)}return}var x=y.url[0];if(!x){y.url.shift();return g(z)}if(y.timeout){y.timer=w.later(y.timeout,y,s,z)}if(y.type==="script"){A=t(x,G,y.charset)}else{A=i(x,G,y.charset)}f(y.type,A,z,x,G,y.url.length);y.nodes.push(A);if(y.insertBefore){var H=b(y.insertBefore,z);if(H){H.parentNode.insertBefore(A,H)}}else{E.appendChild(A)}if((r.webkit||r.gecko)&&y.type==="css"){g(z,x)}};var o=function(){if(e){return}e=true;for(var x in q){var y=q[x];if(y.autopurge&&y.finished){d(y.tId);delete q[x]}}e=false};var d=function(E){var B=q[E];if(B){var D=B.nodes,x=D.length,C=B.win.document,A=C.getElementsByTagName("head")[0];if(B.insertBefore){var z=b(B.insertBefore,E);if(z){A=z.parentNode}}for(var y=0;y<x;y=y+1){A.removeChild(D[y])}B.nodes=[]}};var h=function(y,x,z){var B="q"+(p++);z=z||{};if(p%YAHOO.util.Get.PURGE_THRESH===0){o()}q[B]=w.merge(z,{tId:B,type:y,url:x,finished:false,aborted:false,nodes:[]});var A=q[B];A.win=A.win||window;A.scope=A.scope||A.win;A.autopurge=("autopurge" in A)?A.autopurge:(y==="script")?true:false;w.later(0,A,g,B);return{tId:B}};var f=function(G,B,A,y,C,D,F){var E=F||g;if(r.ie){B.onreadystatechange=function(){var H=this.readyState;if("loaded"===H||"complete"===H){B.onreadystatechange=null;E(A,y)}}}else{if(r.webkit){if(G==="script"){if(r.webkit>=420){B.addEventListener("load",function(){E(A,y)})}else{var x=q[A];if(x.varName){var z=YAHOO.util.Get.POLL_FREQ;x.maxattempts=YAHOO.util.Get.TIMEOUT/z;x.attempts=0;x._cache=x.varName[0].split(".");x.timer=w.later(z,x,function(M){var J=this._cache,I=J.length,H=this.win,K;for(K=0;K<I;K=K+1){H=H[J[K]];if(!H){this.attempts++;if(this.attempts++>this.maxattempts){var L="Over retry limit, giving up";x.timer.cancel();u(A,L)}else{}return}}x.timer.cancel();E(A,y)},null,true)}else{w.later(YAHOO.util.Get.POLL_FREQ,null,E,[A,y])}}}}else{B.onload=function(){E(A,y)}}}};return{POLL_FREQ:10,PURGE_THRESH:20,TIMEOUT:2000,_finalize:function(x){w.later(0,null,c,x)},abort:function(y){var z=(w.isString(y))?y:y.tId;var x=q[z];if(x){x.aborted=true}},script:function(x,y){return h("script",x,y)},css:function(x,y){return h("css",x,y)}}}();YAHOO.register("get",YAHOO.util.Get,{version:"2.7.0",build:"1799"});(function(){var Y=YAHOO,util=Y.util,lang=Y.lang,env=Y.env,PROV="_provides",SUPER="_supersedes",REQ="expanded",AFTER="_after";var YUI={dupsAllowed:{yahoo:true,get:true},info:{root:"2.7.0/build/",base:"http://yui.yahooapis.com/2.7.0/build/",comboBase:"http://yui.yahooapis.com/combo?",skin:{defaultSkin:"sam",base:"assets/skins/",path:"skin.css",after:["reset","fonts","grids","base"],rollup:3},dupsAllowed:["yahoo","get"],moduleInfo:{animation:{type:"js",path:"animation/animation-min.js",requires:["dom","event"]},autocomplete:{type:"js",path:"autocomplete/autocomplete-min.js",requires:["dom","event","datasource"],optional:["connection","animation"],skinnable:true},base:{type:"css",path:"base/base-min.css",after:["reset","fonts","grids"]},button:{type:"js",path:"button/button-min.js",requires:["element"],optional:["menu"],skinnable:true},calendar:{type:"js",path:"calendar/calendar-min.js",requires:["event","dom"],skinnable:true},carousel:{type:"js",path:"carousel/carousel-min.js",requires:["element"],optional:["animation"],skinnable:true},charts:{type:"js",path:"charts/charts-min.js",requires:["element","json","datasource"]},colorpicker:{type:"js",path:"colorpicker/colorpicker-min.js",requires:["slider","element"],optional:["animation"],skinnable:true},connection:{type:"js",path:"connection/connection-min.js",requires:["event"]},container:{type:"js",path:"container/container-min.js",requires:["dom","event"],optional:["dragdrop","animation","connection"],supersedes:["containercore"],skinnable:true},containercore:{type:"js",path:"container/container_core-min.js",requires:["dom","event"],pkg:"container"},cookie:{type:"js",path:"cookie/cookie-min.js",requires:["yahoo"]},datasource:{type:"js",path:"datasource/datasource-min.js",requires:["event"],optional:["connection"]},datatable:{type:"js",path:"datatable/datatable-min.js",requires:["element","datasource"],optional:["calendar","dragdrop","paginator"],skinnable:true},dom:{type:"js",path:"dom/dom-min.js",requires:["yahoo"]},dragdrop:{type:"js",path:"dragdrop/dragdrop-min.js",requires:["dom","event"]},editor:{type:"js",path:"editor/editor-min.js",requires:["menu","element","button"],optional:["animation","dragdrop"],supersedes:["simpleeditor"],skinnable:true},element:{type:"js",path:"element/element-min.js",requires:["dom","event"]},event:{type:"js",path:"event/event-min.js",requires:["yahoo"]},fonts:{type:"css",path:"fonts/fonts-min.css"},get:{type:"js",path:"get/get-min.js",requires:["yahoo"]},grids:{type:"css",path:"grids/grids-min.css",requires:["fonts"],optional:["reset"]},history:{type:"js",path:"history/history-min.js",requires:["event"]},imagecropper:{type:"js",path:"imagecropper/imagecropper-min.js",requires:["dom","event","dragdrop","element","resize"],skinnable:true},imageloader:{type:"js",path:"imageloader/imageloader-min.js",requires:["event","dom"]},json:{type:"js",path:"json/json-min.js",requires:["yahoo"]},layout:{type:"js",path:"layout/layout-min.js",requires:["dom","event","element"],optional:["animation","dragdrop","resize","selector"],skinnable:true},logger:{type:"js",path:"logger/logger-min.js",requires:["event","dom"],optional:["dragdrop"],skinnable:true},menu:{type:"js",path:"menu/menu-min.js",requires:["containercore"],skinnable:true},paginator:{type:"js",path:"paginator/paginator-min.js",requires:["element"],skinnable:true},profiler:{type:"js",path:"profiler/profiler-min.js",requires:["yahoo"]},profilerviewer:{type:"js",path:"profilerviewer/profilerviewer-min.js",requires:["profiler","yuiloader","element"],skinnable:true},reset:{type:"css",path:"reset/reset-min.css"},"reset-fonts-grids":{type:"css",path:"reset-fonts-grids/reset-fonts-grids.css",supersedes:["reset","fonts","grids","reset-fonts"],rollup:4},"reset-fonts":{type:"css",path:"reset-fonts/reset-fonts.css",supersedes:["reset","fonts"],rollup:2},resize:{type:"js",path:"resize/resize-min.js",requires:["dom","event","dragdrop","element"],optional:["animation"],skinnable:true},selector:{type:"js",path:"selector/selector-min.js",requires:["yahoo","dom"]},simpleeditor:{type:"js",path:"editor/simpleeditor-min.js",requires:["element"],optional:["containercore","menu","button","animation","dragdrop"],skinnable:true,pkg:"editor"},slider:{type:"js",path:"slider/slider-min.js",requires:["dragdrop"],optional:["animation"],skinnable:true},stylesheet:{type:"js",path:"stylesheet/stylesheet-min.js",requires:["yahoo"]},tabview:{type:"js",path:"tabview/tabview-min.js",requires:["element"],optional:["connection"],skinnable:true},treeview:{type:"js",path:"treeview/treeview-min.js",requires:["event","dom"],optional:["json"],skinnable:true},uploader:{type:"js",path:"uploader/uploader.js",requires:["element"]},utilities:{type:"js",path:"utilities/utilities.js",supersedes:["yahoo","event","dragdrop","animation","dom","connection","element","yahoo-dom-event","get","yuiloader","yuiloader-dom-event"],rollup:8},yahoo:{type:"js",path:"yahoo/yahoo-min.js"},"yahoo-dom-event":{type:"js",path:"yahoo-dom-event/yahoo-dom-event.js",supersedes:["yahoo","event","dom"],rollup:3},yuiloader:{type:"js",path:"yuiloader/yuiloader-min.js",supersedes:["yahoo","get"]},"yuiloader-dom-event":{type:"js",path:"yuiloader-dom-event/yuiloader-dom-event.js",supersedes:["yahoo","dom","event","get","yuiloader","yahoo-dom-event"],rollup:5},yuitest:{type:"js",path:"yuitest/yuitest-min.js",requires:["logger"],skinnable:true}}},ObjectUtil:{appendArray:function(o,a){if(a){for(var i=0;i<a.length;i=i+1){o[a[i]]=true}}},keys:function(o,ordered){var a=[],i;for(i in o){if(lang.hasOwnProperty(o,i)){a.push(i)}}return a}},ArrayUtil:{appendArray:function(a1,a2){Array.prototype.push.apply(a1,a2)},indexOf:function(a,val){for(var i=0;i<a.length;i=i+1){if(a[i]===val){return i}}return -1},toObject:function(a){var o={};for(var i=0;i<a.length;i=i+1){o[a[i]]=true}return o},uniq:function(a){return YUI.ObjectUtil.keys(YUI.ArrayUtil.toObject(a))}}};YAHOO.util.YUILoader=function(o){this._internalCallback=null;this._useYahooListener=false;this.onSuccess=null;this.onFailure=Y.log;this.onProgress=null;this.onTimeout=null;this.scope=this;this.data=null;this.insertBefore=null;this.charset=null;this.varName=null;this.base=YUI.info.base;this.comboBase=YUI.info.comboBase;this.combine=false;this.root=YUI.info.root;this.timeout=0;this.ignore=null;this.force=null;this.allowRollup=true;this.filter=null;this.required={};this.moduleInfo=lang.merge(YUI.info.moduleInfo);this.rollups=null;this.loadOptional=false;this.sorted=[];this.loaded={};this.dirty=true;this.inserted={};var self=this;env.listeners.push(function(m){if(self._useYahooListener){self.loadNext(m.name)}});this.skin=lang.merge(YUI.info.skin);this._config(o)};Y.util.YUILoader.prototype={FILTERS:{RAW:{searchExp:"-min\\.js",replaceStr:".js"},DEBUG:{searchExp:"-min\\.js",replaceStr:"-debug.js"}},SKIN_PREFIX:"skin-",_config:function(o){if(o){for(var i in o){if(lang.hasOwnProperty(o,i)){if(i=="require"){this.require(o[i])}else{this[i]=o[i]}}}}var f=this.filter;if(lang.isString(f)){f=f.toUpperCase();if(f==="DEBUG"){this.require("logger")}if(!Y.widget.LogWriter){Y.widget.LogWriter=function(){return Y}}this.filter=this.FILTERS[f]}},addModule:function(o){if(!o||!o.name||!o.type||(!o.path&&!o.fullpath)){return false}o.ext=("ext" in o)?o.ext:true;o.requires=o.requires||[];this.moduleInfo[o.name]=o;this.dirty=true;return true},require:function(what){var a=(typeof what==="string")?arguments:what;this.dirty=true;YUI.ObjectUtil.appendArray(this.required,a)},_addSkin:function(skin,mod){var name=this.formatSkin(skin),info=this.moduleInfo,sinf=this.skin,ext=info[mod]&&info[mod].ext;if(!info[name]){this.addModule({name:name,type:"css",path:sinf.base+skin+"/"+sinf.path,after:sinf.after,rollup:sinf.rollup,ext:ext})}if(mod){name=this.formatSkin(skin,mod);if(!info[name]){var mdef=info[mod],pkg=mdef.pkg||mod;this.addModule({name:name,type:"css",after:sinf.after,path:pkg+"/"+sinf.base+skin+"/"+mod+".css",ext:ext})}}return name},getRequires:function(mod){if(!mod){return[]}if(!this.dirty&&mod.expanded){return mod.expanded}mod.requires=mod.requires||[];var i,d=[],r=mod.requires,o=mod.optional,info=this.moduleInfo,m;for(i=0;i<r.length;i=i+1){d.push(r[i]);m=info[r[i]];YUI.ArrayUtil.appendArray(d,this.getRequires(m))}if(o&&this.loadOptional){for(i=0;i<o.length;i=i+1){d.push(o[i]);YUI.ArrayUtil.appendArray(d,this.getRequires(info[o[i]]))}}mod.expanded=YUI.ArrayUtil.uniq(d);return mod.expanded},getProvides:function(name,notMe){var addMe=!(notMe),ckey=(addMe)?PROV:SUPER,m=this.moduleInfo[name],o={};if(!m){return o}if(m[ckey]){return m[ckey]}var s=m.supersedes,done={},me=this;var add=function(mm){if(!done[mm]){done[mm]=true;lang.augmentObject(o,me.getProvides(mm))}};if(s){for(var i=0;i<s.length;i=i+1){add(s[i])}}m[SUPER]=o;m[PROV]=lang.merge(o);m[PROV][name]=true;return m[ckey]},calculate:function(o){if(o||this.dirty){this._config(o);this._setup();this._explode();if(this.allowRollup){this._rollup()}this._reduce();this._sort();this.dirty=false}},_setup:function(){var info=this.moduleInfo,name,i,j;for(name in info){if(lang.hasOwnProperty(info,name)){var m=info[name];if(m&&m.skinnable){var o=this.skin.overrides,smod;if(o&&o[name]){for(i=0;i<o[name].length;i=i+1){smod=this._addSkin(o[name][i],name)}}else{smod=this._addSkin(this.skin.defaultSkin,name)}m.requires.push(smod)}}}var l=lang.merge(this.inserted);if(!this._sandbox){l=lang.merge(l,env.modules)}if(this.ignore){YUI.ObjectUtil.appendArray(l,this.ignore)}if(this.force){for(i=0;i<this.force.length;i=i+1){if(this.force[i] in l){delete l[this.force[i]]}}}for(j in l){if(lang.hasOwnProperty(l,j)){lang.augmentObject(l,this.getProvides(j))}}this.loaded=l},_explode:function(){var r=this.required,i,mod;for(i in r){if(lang.hasOwnProperty(r,i)){mod=this.moduleInfo[i];if(mod){var req=this.getRequires(mod);if(req){YUI.ObjectUtil.appendArray(r,req)}}}}},_skin:function(){},formatSkin:function(skin,mod){var s=this.SKIN_PREFIX+skin;if(mod){s=s+"-"+mod}return s},parseSkin:function(mod){if(mod.indexOf(this.SKIN_PREFIX)===0){var a=mod.split("-");return{skin:a[1],module:a[2]}}return null},_rollup:function(){var i,j,m,s,rollups={},r=this.required,roll,info=this.moduleInfo;if(this.dirty||!this.rollups){for(i in info){if(lang.hasOwnProperty(info,i)){m=info[i];if(m&&m.rollup){rollups[i]=m}}}this.rollups=rollups}for(;;){var rolled=false;for(i in rollups){if(!r[i]&&!this.loaded[i]){m=info[i];s=m.supersedes;roll=false;if(!m.rollup){continue}var skin=(m.ext)?false:this.parseSkin(i),c=0;if(skin){for(j in r){if(lang.hasOwnProperty(r,j)){if(i!==j&&this.parseSkin(j)){c++;roll=(c>=m.rollup);if(roll){break}}}}}else{for(j=0;j<s.length;j=j+1){if(this.loaded[s[j]]&&(!YUI.dupsAllowed[s[j]])){roll=false;break}else{if(r[s[j]]){c++;roll=(c>=m.rollup);if(roll){break}}}}}if(roll){r[i]=true;rolled=true;this.getRequires(m)}}}if(!rolled){break}}},_reduce:function(){var i,j,s,m,r=this.required;for(i in r){if(i in this.loaded){delete r[i]}else{var skinDef=this.parseSkin(i);if(skinDef){if(!skinDef.module){var skin_pre=this.SKIN_PREFIX+skinDef.skin;for(j in r){if(lang.hasOwnProperty(r,j)){m=this.moduleInfo[j];var ext=m&&m.ext;if(!ext&&j!==i&&j.indexOf(skin_pre)>-1){delete r[j]}}}}}else{m=this.moduleInfo[i];s=m&&m.supersedes;if(s){for(j=0;j<s.length;j=j+1){if(s[j] in r){delete r[s[j]]}}}}}}},_onFailure:function(msg){YAHOO.log("Failure","info","loader");var f=this.onFailure;if(f){f.call(this.scope,{msg:"failure: "+msg,data:this.data,success:false})}},_onTimeout:function(){YAHOO.log("Timeout","info","loader");var f=this.onTimeout;if(f){f.call(this.scope,{msg:"timeout",data:this.data,success:false})}},_sort:function(){var s=[],info=this.moduleInfo,loaded=this.loaded,checkOptional=!this.loadOptional,me=this;var requires=function(aa,bb){var mm=info[aa];if(loaded[bb]||!mm){return false}var ii,rr=mm.expanded,after=mm.after,other=info[bb],optional=mm.optional;if(rr&&YUI.ArrayUtil.indexOf(rr,bb)>-1){return true}if(after&&YUI.ArrayUtil.indexOf(after,bb)>-1){return true}if(checkOptional&&optional&&YUI.ArrayUtil.indexOf(optional,bb)>-1){return true}var ss=info[bb]&&info[bb].supersedes;if(ss){for(ii=0;ii<ss.length;ii=ii+1){if(requires(aa,ss[ii])){return true}}}if(mm.ext&&mm.type=="css"&&!other.ext&&other.type=="css"){return true}return false};for(var i in this.required){if(lang.hasOwnProperty(this.required,i)){s.push(i)}}var p=0;for(;;){var l=s.length,a,b,j,k,moved=false;for(j=p;j<l;j=j+1){a=s[j];for(k=j+1;k<l;k=k+1){if(requires(a,s[k])){b=s.splice(k,1);s.splice(j,0,b[0]);moved=true;break}}if(moved){break}else{p=p+1}}if(!moved){break}}this.sorted=s},toString:function(){var o={type:"YUILoader",base:this.base,filter:this.filter,required:this.required,loaded:this.loaded,inserted:this.inserted};lang.dump(o,1)},_combine:function(){this._combining=[];var self=this,s=this.sorted,len=s.length,js=this.comboBase,css=this.comboBase,target,startLen=js.length,i,m,type=this.loadType;YAHOO.log("type "+type);for(i=0;i<len;i=i+1){m=this.moduleInfo[s[i]];if(m&&!m.ext&&(!type||type===m.type)){target=this.root+m.path;target+="&";if(m.type=="js"){js+=target}else{css+=target}this._combining.push(s[i])}}if(this._combining.length){YAHOO.log("Attempting to combine: "+this._combining,"info","loader");var callback=function(o){var c=this._combining,len=c.length,i,m;for(i=0;i<len;i=i+1){this.inserted[c[i]]=true}this.loadNext(o.data)},loadScript=function(){if(js.length>startLen){YAHOO.util.Get.script(self._filter(js),{data:self._loading,onSuccess:callback,onFailure:self._onFailure,onTimeout:self._onTimeout,insertBefore:self.insertBefore,charset:self.charset,timeout:self.timeout,scope:self})}};if(css.length>startLen){YAHOO.util.Get.css(this._filter(css),{data:this._loading,onSuccess:loadScript,onFailure:this._onFailure,onTimeout:this._onTimeout,insertBefore:this.insertBefore,charset:this.charset,timeout:this.timeout,scope:self})}else{loadScript()}return}else{this.loadNext(this._loading)}},insert:function(o,type){this.calculate(o);this._loading=true;this.loadType=type;if(this.combine){return this._combine()}if(!type){var self=this;this._internalCallback=function(){self._internalCallback=null;self.insert(null,"js")};this.insert(null,"css");return}this.loadNext()},sandbox:function(o,type){this._config(o);if(!this.onSuccess){throw new Error("You must supply an onSuccess handler for your sandbox")}this._sandbox=true;var self=this;if(!type||type!=="js"){this._internalCallback=function(){self._internalCallback=null;self.sandbox(null,"js")};this.insert(null,"css");return}if(!util.Connect){var ld=new YAHOO.util.YUILoader();ld.insert({base:this.base,filter:this.filter,require:"connection",insertBefore:this.insertBefore,charset:this.charset,onSuccess:function(){this.sandbox(null,"js")},scope:this},"js");return}this._scriptText=[];this._loadCount=0;this._stopCount=this.sorted.length;this._xhr=[];this.calculate();var s=this.sorted,l=s.length,i,m,url;for(i=0;i<l;i=i+1){m=this.moduleInfo[s[i]];if(!m){this._onFailure("undefined module "+m);for(var j=0;j<this._xhr.length;j=j+1){this._xhr[j].abort()}return}if(m.type!=="js"){this._loadCount++;continue}url=m.fullpath;url=(url)?this._filter(url):this._url(m.path);var xhrData={success:function(o){var idx=o.argument[0],name=o.argument[2];this._scriptText[idx]=o.responseText;if(this.onProgress){this.onProgress.call(this.scope,{name:name,scriptText:o.responseText,xhrResponse:o,data:this.data})}this._loadCount++;if(this._loadCount>=this._stopCount){var v=this.varName||"YAHOO";var t="(function() {\n";var b="\nreturn "+v+";\n})();";var ref=eval(t+this._scriptText.join("\n")+b);this._pushEvents(ref);if(ref){this.onSuccess.call(this.scope,{reference:ref,data:this.data})}else{this._onFailure.call(this.varName+" reference failure")}}},failure:function(o){this.onFailure.call(this.scope,{msg:"XHR failure",xhrResponse:o,data:this.data})},scope:this,argument:[i,url,s[i]]};this._xhr.push(util.Connect.asyncRequest("GET",url,xhrData))}},loadNext:function(mname){if(!this._loading){return}if(mname){if(mname!==this._loading){return}this.inserted[mname]=true;if(this.onProgress){this.onProgress.call(this.scope,{name:mname,data:this.data})}}var s=this.sorted,len=s.length,i,m;for(i=0;i<len;i=i+1){if(s[i] in this.inserted){continue}if(s[i]===this._loading){return}m=this.moduleInfo[s[i]];if(!m){this.onFailure.call(this.scope,{msg:"undefined module "+m,data:this.data});return}if(!this.loadType||this.loadType===m.type){this._loading=s[i];var fn=(m.type==="css")?util.Get.css:util.Get.script,url=m.fullpath,self=this,c=function(o){self.loadNext(o.data)};url=(url)?this._filter(url):this._url(m.path);if(env.ua.webkit&&env.ua.webkit<420&&m.type==="js"&&!m.varName){c=null;this._useYahooListener=true}fn(url,{data:s[i],onSuccess:c,onFailure:this._onFailure,onTimeout:this._onTimeout,insertBefore:this.insertBefore,charset:this.charset,timeout:this.timeout,varName:m.varName,scope:self});return}}this._loading=null;if(this._internalCallback){var f=this._internalCallback;this._internalCallback=null;f.call(this)}else{if(this.onSuccess){this._pushEvents();this.onSuccess.call(this.scope,{data:this.data})}}},_pushEvents:function(ref){var r=ref||YAHOO;if(r.util&&r.util.Event){r.util.Event._load()}},_filter:function(str){var f=this.filter;return(f)?str.replace(new RegExp(f.searchExp,"g"),f.replaceStr):str},_url:function(path){return this._filter((this.base||"")+path)}}})();YAHOO.register("yuiloader",YAHOO.util.YUILoader,{version:"2.7.0",build:"1799"});YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_isFormSubmit:false,_isFileUpload:false,_formNode:null,_sFormData:null,_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,_submitElementValue:null,_hasSubmitListener:(function(){if(YAHOO.util.Event){YAHOO.util.Event.addListener(document,"click",function(c){var b=YAHOO.util.Event.getTarget(c),a=b.nodeName.toLowerCase();if((a==="input"||a==="button")&&(b.type&&b.type.toLowerCase()=="submit")){YAHOO.util.Connect._submitElementValue=encodeURIComponent(b.name)+"="+encodeURIComponent(b.value)}});return true}return false})(),startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),uploadEvent:new YAHOO.util.CustomEvent("upload"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(a){this._msxml_progid.unshift(a)},setDefaultPostHeader:function(a){if(typeof a=="string"){this._default_post_header=a}else{if(typeof a=="boolean"){this._use_default_post_header=a}}},setDefaultXhrHeader:function(a){if(typeof a=="string"){this._default_xhr_header=a}else{this._use_default_xhr_header=a}},setPollingInterval:function(a){if(typeof a=="number"&&isFinite(a)){this._polling_interval=a}},createXhrObject:function(g){var f,a;try{a=new XMLHttpRequest();f={conn:a,tId:g}}catch(d){for(var b=0;b<this._msxml_progid.length;++b){try{a=new ActiveXObject(this._msxml_progid[b]);f={conn:a,tId:g};break}catch(c){}}}finally{return f}},getConnectionObject:function(a){var c;var d=this._transaction_id;try{if(!a){c=this.createXhrObject(d)}else{c={};c.tId=d;c.isUpload=true}if(c){this._transaction_id++}}catch(b){}finally{return c}},asyncRequest:function(f,c,e,a){var d=(this._isFileUpload)?this.getConnectionObject(true):this.getConnectionObject();var b=(e&&e.argument)?e.argument:null;if(!d){return null}else{if(e&&e.customevents){this.initCustomEvents(d,e)}if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(d,e,c,a);return d}if(f.toUpperCase()=="GET"){if(this._sFormData.length!==0){c+=((c.indexOf("?")==-1)?"?":"&")+this._sFormData}}else{if(f.toUpperCase()=="POST"){a=a?this._sFormData+"&"+a:this._sFormData}}}if(f.toUpperCase()=="GET"&&(e&&e.cache===false)){c+=((c.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString()}d.conn.open(f,c,true);if(this._use_default_xhr_header){if(!this._default_headers["X-Requested-With"]){this.initHeader("X-Requested-With",this._default_xhr_header,true)}}if((f.toUpperCase()==="POST"&&this._use_default_post_header)&&this._isFormSubmit===false){this.initHeader("Content-Type",this._default_post_header)}if(this._has_default_headers||this._has_http_headers){this.setHeader(d)}this.handleReadyState(d,e);d.conn.send(a||"");if(this._isFormSubmit===true){this.resetFormState()}this.startEvent.fire(d,b);if(d.startEvent){d.startEvent.fire(d,b)}return d}},initCustomEvents:function(a,c){var b;for(b in c.customevents){if(this._customEvents[b][0]){a[this._customEvents[b][0]]=new YAHOO.util.CustomEvent(this._customEvents[b][1],(c.scope)?c.scope:null);a[this._customEvents[b][0]].subscribe(c.customevents[b])}}},handleReadyState:function(c,d){var b=this;var a=(d&&d.argument)?d.argument:null;if(d&&d.timeout){this._timeOut[c.tId]=window.setTimeout(function(){b.abort(c,d,true)},d.timeout)}this._poll[c.tId]=window.setInterval(function(){if(c.conn&&c.conn.readyState===4){window.clearInterval(b._poll[c.tId]);delete b._poll[c.tId];if(d&&d.timeout){window.clearTimeout(b._timeOut[c.tId]);delete b._timeOut[c.tId]}b.completeEvent.fire(c,a);if(c.completeEvent){c.completeEvent.fire(c,a)}b.handleTransactionResponse(c,d)}},this._polling_interval)},handleTransactionResponse:function(g,h,a){var d,c;var b=(h&&h.argument)?h.argument:null;try{if(g.conn.status!==undefined&&g.conn.status!==0){d=g.conn.status}else{d=13030}}catch(f){d=13030}if(d>=200&&d<300||d===1223){c=this.createResponseObject(g,b);if(h&&h.success){if(!h.scope){h.success(c)}else{h.success.apply(h.scope,[c])}}this.successEvent.fire(c);if(g.successEvent){g.successEvent.fire(c)}}else{switch(d){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:c=this.createExceptionObject(g.tId,b,(a?a:false));if(h&&h.failure){if(!h.scope){h.failure(c)}else{h.failure.apply(h.scope,[c])}}break;default:c=this.createResponseObject(g,b);if(h&&h.failure){if(!h.scope){h.failure(c)}else{h.failure.apply(h.scope,[c])}}}this.failureEvent.fire(c);if(g.failureEvent){g.failureEvent.fire(c)}}this.releaseObject(g);c=null},createResponseObject:function(a,h){var d={};var p={};try{var c=a.conn.getAllResponseHeaders();var g=c.split("\n");for(var f=0;f<g.length;f++){var b=g[f].indexOf(":");if(b!=-1){p[g[f].substring(0,b)]=g[f].substring(b+2)}}}catch(l){}d.tId=a.tId;d.status=(a.conn.status==1223)?204:a.conn.status;d.statusText=(a.conn.status==1223)?"No Content":a.conn.statusText;d.getResponseHeader=p;d.getAllResponseHeaders=c;d.responseText=a.conn.responseText;d.responseXML=a.conn.responseXML;if(h){d.argument=h}return d},createExceptionObject:function(h,d,a){var f=0;var g="communication failure";var c=-1;var b="transaction aborted";var e={};e.tId=h;if(a){e.status=c;e.statusText=b}else{e.status=f;e.statusText=g}if(d){e.argument=d}return e},initHeader:function(a,d,c){var b=(c)?this._default_headers:this._http_headers;b[a]=d;if(c){this._has_default_headers=true}else{this._has_http_headers=true}},setHeader:function(a){var b;if(this._has_default_headers){for(b in this._default_headers){if(YAHOO.lang.hasOwnProperty(this._default_headers,b)){a.conn.setRequestHeader(b,this._default_headers[b])}}}if(this._has_http_headers){for(b in this._http_headers){if(YAHOO.lang.hasOwnProperty(this._http_headers,b)){a.conn.setRequestHeader(b,this._http_headers[b])}}delete this._http_headers;this._http_headers={};this._has_http_headers=false}},resetDefaultHeaders:function(){delete this._default_headers;this._default_headers={};this._has_default_headers=false},setForm:function(r,h,c){var q,b,p,l,u,o=false,f=[],t=0,e,g,d,s,a;this.resetFormState();if(typeof r=="string"){q=(document.getElementById(r)||document.forms[r])}else{if(typeof r=="object"){q=r}else{return}}if(h){this.createFrame(c?c:null);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=q;return}for(e=0,g=q.elements.length;e<g;++e){b=q.elements[e];u=b.disabled;p=b.name;if(!u&&p){p=encodeURIComponent(p)+"=";l=encodeURIComponent(b.value);switch(b.type){case"select-one":if(b.selectedIndex>-1){a=b.options[b.selectedIndex];f[t++]=p+encodeURIComponent((a.attributes.value&&a.attributes.value.specified)?a.value:a.text)}break;case"select-multiple":if(b.selectedIndex>-1){for(d=b.selectedIndex,s=b.options.length;d<s;++d){a=b.options[d];if(a.selected){f[t++]=p+encodeURIComponent((a.attributes.value&&a.attributes.value.specified)?a.value:a.text)}}}break;case"radio":case"checkbox":if(b.checked){f[t++]=p+l}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(o===false){if(this._hasSubmitListener&&this._submitElementValue){f[t++]=this._submitElementValue}o=true}break;default:f[t++]=p+l}}}this._isFormSubmit=true;this._sFormData=f.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData},resetFormState:function(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData=""},createFrame:function(a){var b="yuiIO"+this._transaction_id;var c;if(YAHOO.env.ua.ie){c=document.createElement('<iframe id="'+b+'" name="'+b+'" />');if(typeof a=="boolean"){c.src="javascript:false"}}else{c=document.createElement("iframe");c.id=b;c.name=b}c.style.position="absolute";c.style.top="-1000px";c.style.left="-1000px";document.body.appendChild(c)},appendPostData:function(a){var d=[],b=a.split("&"),c,e;for(c=0;c<b.length;c++){e=b[c].indexOf("=");if(e!=-1){d[c]=document.createElement("input");d[c].type="hidden";d[c].name=decodeURIComponent(b[c].substring(0,e));d[c].value=decodeURIComponent(b[c].substring(e+1));this._formNode.appendChild(d[c])}}return d},uploadFile:function(d,t,e,c){var l="yuiIO"+d.tId,p="multipart/form-data",r=document.getElementById(l),u=this,q=(t&&t.argument)?t.argument:null,s,h,b,g;var a={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",e);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",l);if(YAHOO.env.ua.ie){this._formNode.setAttribute("encoding",p)}else{this._formNode.setAttribute("enctype",p)}if(c){s=this.appendPostData(c)}this._formNode.submit();this.startEvent.fire(d,q);if(d.startEvent){d.startEvent.fire(d,q)}if(t&&t.timeout){this._timeOut[d.tId]=window.setTimeout(function(){u.abort(d,t,true)},t.timeout)}if(s&&s.length>0){for(h=0;h<s.length;h++){this._formNode.removeChild(s[h])}}for(b in a){if(YAHOO.lang.hasOwnProperty(a,b)){if(a[b]){this._formNode.setAttribute(b,a[b])}else{this._formNode.removeAttribute(b)}}}this.resetFormState();var f=function(){if(t&&t.timeout){window.clearTimeout(u._timeOut[d.tId]);delete u._timeOut[d.tId]}u.completeEvent.fire(d,q);if(d.completeEvent){d.completeEvent.fire(d,q)}g={tId:d.tId,argument:t.argument};try{g.responseText=r.contentWindow.document.body?r.contentWindow.document.body.innerHTML:r.contentWindow.document.documentElement.textContent;g.responseXML=r.contentWindow.document.XMLDocument?r.contentWindow.document.XMLDocument:r.contentWindow.document}catch(i){}if(t&&t.upload){if(!t.scope){t.upload(g)}else{t.upload.apply(t.scope,[g])}}u.uploadEvent.fire(g);if(d.uploadEvent){d.uploadEvent.fire(g)}YAHOO.util.Event.removeListener(r,"load",f);setTimeout(function(){document.body.removeChild(r);u.releaseObject(d)},100)};YAHOO.util.Event.addListener(r,"load",f)},abort:function(e,g,a){var d;var b=(g&&g.argument)?g.argument:null;if(e&&e.conn){if(this.isCallInProgress(e)){e.conn.abort();window.clearInterval(this._poll[e.tId]);delete this._poll[e.tId];if(a){window.clearTimeout(this._timeOut[e.tId]);delete this._timeOut[e.tId]}d=true}}else{if(e&&e.isUpload===true){var c="yuiIO"+e.tId;var f=document.getElementById(c);if(f){YAHOO.util.Event.removeListener(f,"load");document.body.removeChild(f);if(a){window.clearTimeout(this._timeOut[e.tId]);delete this._timeOut[e.tId]}d=true}}else{d=false}}if(d===true){this.abortEvent.fire(e,b);if(e.abortEvent){e.abortEvent.fire(e,b)}this.handleTransactionResponse(e,g,true)}return d},isCallInProgress:function(b){if(b&&b.conn){return b.conn.readyState!==4&&b.conn.readyState!==0}else{if(b&&b.isUpload===true){var a="yuiIO"+b.tId;return document.getElementById(a)?true:false}else{return false}}},releaseObject:function(a){if(a&&a.conn){a.conn=null;a=null}}};YAHOO.register("connection",YAHOO.util.Connect,{version:"2.7.0",build:"1799"});(function(){var b=YAHOO.util;var a=function(d,c,e,f){if(!d){}this.init(d,c,e,f)};a.NAME="Anim";a.prototype={toString:function(){var c=this.getEl()||{};var d=c.id||c.tagName;return(this.constructor.NAME+": "+d)},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(c,e,d){return this.method(this.currentFrame,e,d-e,this.totalFrames)},setAttribute:function(c,f,e){var d=this.getEl();if(this.patterns.noNegatives.test(c)){f=(f>0)?f:0}if("style" in d){b.Dom.setStyle(d,c,f+e)}else{if(c in d){d[c]=f}}},getAttribute:function(c){var e=this.getEl();var g=b.Dom.getStyle(e,c);if(g!=="auto"&&!this.patterns.offsetUnit.test(g)){return parseFloat(g)}var d=this.patterns.offsetAttribute.exec(c)||[];var h=!!(d[3]);var f=!!(d[2]);if("style" in e){if(f||(b.Dom.getStyle(e,"position")=="absolute"&&h)){g=e["offset"+d[0].charAt(0).toUpperCase()+d[0].substr(1)]}else{g=0}}else{if(c in e){g=e[c]}}return g},getDefaultUnit:function(c){if(this.patterns.defaultUnit.test(c)){return"px"}return""},setRuntimeAttribute:function(d){var l;var e;var f=this.attributes;this.runtimeAttributes[d]={};var h=function(i){return(typeof i!=="undefined")};if(!h(f[d]["to"])&&!h(f[d]["by"])){return false}l=(h(f[d]["from"]))?f[d]["from"]:this.getAttribute(d);if(h(f[d]["to"])){e=f[d]["to"]}else{if(h(f[d]["by"])){if(l.constructor==Array){e=[];for(var g=0,c=l.length;g<c;++g){e[g]=l[g]+f[d]["by"][g]*1}}else{e=l+f[d]["by"]*1}}}this.runtimeAttributes[d].start=l;this.runtimeAttributes[d].end=e;this.runtimeAttributes[d].unit=(h(f[d].unit))?f[d]["unit"]:this.getDefaultUnit(d);return true},init:function(e,l,i,c){var d=false;var f=null;var h=0;e=b.Dom.get(e);this.attributes=l||{};this.duration=!YAHOO.lang.isUndefined(i)?i:1;this.method=c||b.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=b.AnimMgr.fps;this.setEl=function(q){e=b.Dom.get(q)};this.getEl=function(){return e};this.isAnimated=function(){return d};this.getStartTime=function(){return f};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(b.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds){this.totalFrames=1}b.AnimMgr.registerElement(this);return true};this.stop=function(q){if(!this.isAnimated()){return false}if(q){this.currentFrame=this.totalFrames;this._onTween.fire()}b.AnimMgr.stop(this)};var p=function(){this.onStart.fire();this.runtimeAttributes={};for(var q in this.attributes){this.setRuntimeAttribute(q)}d=true;h=0;f=new Date()};var o=function(){var s={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};s.toString=function(){return("duration: "+s.duration+", currentFrame: "+s.currentFrame)};this.onTween.fire(s);var r=this.runtimeAttributes;for(var q in r){this.setAttribute(q,this.doMethod(q,r[q].start,r[q].end),r[q].unit)}h+=1};var g=function(){var q=(new Date()-f)/1000;var r={duration:q,frames:h,fps:h/q};r.toString=function(){return("duration: "+r.duration+", frames: "+r.frames+", fps: "+r.fps)};d=false;h=0;this.onComplete.fire(r)};this._onStart=new b.CustomEvent("_start",this,true);this.onStart=new b.CustomEvent("start",this);this.onTween=new b.CustomEvent("tween",this);this._onTween=new b.CustomEvent("_tween",this,true);this.onComplete=new b.CustomEvent("complete",this);this._onComplete=new b.CustomEvent("_complete",this,true);this._onStart.subscribe(p);this._onTween.subscribe(o);this._onComplete.subscribe(g)}};b.Anim=a})();YAHOO.util.AnimMgr=new function(){var c=null;var b=[];var a=0;this.fps=1000;this.delay=1;this.registerElement=function(f){b[b.length]=f;a+=1;f._onStart.fire();this.start()};this.unRegister=function(g,f){f=f||e(g);if(!g.isAnimated()||f==-1){return false}g._onComplete.fire();b.splice(f,1);a-=1;if(a<=0){this.stop()}return true};this.start=function(){if(c===null){c=setInterval(this.run,this.delay)}};this.stop=function(h){if(!h){clearInterval(c);for(var g=0,f=b.length;g<f;++g){this.unRegister(b[0],0)}b=[];c=null;a=0}else{this.unRegister(h)}};this.run=function(){for(var h=0,f=b.length;h<f;++h){var g=b[h];if(!g||!g.isAnimated()){continue}if(g.currentFrame<g.totalFrames||g.totalFrames===null){g.currentFrame+=1;if(g.useSeconds){d(g)}g._onTween.fire()}else{YAHOO.util.AnimMgr.stop(g,h)}}};var e=function(h){for(var g=0,f=b.length;g<f;++g){if(b[g]==h){return g}}return -1};var d=function(g){var l=g.totalFrames;var i=g.currentFrame;var h=(g.currentFrame*g.duration*1000/g.totalFrames);var f=(new Date()-g.getStartTime());var o=0;if(f<g.duration*1000){o=Math.round((f/h-1)*g.currentFrame)}else{o=l-(i+1)}if(o>0&&isFinite(o)){if(g.currentFrame+o>=l){o=l-(i+1)}g.currentFrame+=o}}};YAHOO.util.Bezier=new function(){this.getPosition=function(e,d){var f=e.length;var c=[];for(var b=0;b<f;++b){c[b]=[e[b][0],e[b][1]]}for(var a=1;a<f;++a){for(b=0;b<f-a;++b){c[b][0]=(1-d)*c[b][0]+d*c[parseInt(b+1,10)][0];c[b][1]=(1-d)*c[b][1]+d*c[parseInt(b+1,10)][1]}}return[c[0][0],c[0][1]]}};(function(){var a=function(f,e,g,h){a.superclass.constructor.call(this,f,e,g,h)};a.NAME="ColorAnim";a.DEFAULT_BGCOLOR="#fff";var c=YAHOO.util;YAHOO.extend(a,c.Anim);var d=a.superclass;var b=a.prototype;b.patterns.color=/color$/i;b.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;b.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;b.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;b.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;b.parseColor=function(e){if(e.length==3){return e}var f=this.patterns.hex.exec(e);if(f&&f.length==4){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}f=this.patterns.rgb.exec(e);if(f&&f.length==4){return[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]}f=this.patterns.hex3.exec(e);if(f&&f.length==4){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}return null};b.getAttribute=function(e){var g=this.getEl();if(this.patterns.color.test(e)){var i=YAHOO.util.Dom.getStyle(g,e);var h=this;if(this.patterns.transparent.test(i)){var f=YAHOO.util.Dom.getAncestorBy(g,function(l){return !h.patterns.transparent.test(i)});if(f){i=c.Dom.getStyle(f,e)}else{i=a.DEFAULT_BGCOLOR}}}else{i=d.getAttribute.call(this,e)}return i};b.doMethod=function(f,o,g){var l;if(this.patterns.color.test(f)){l=[];for(var h=0,e=o.length;h<e;++h){l[h]=d.doMethod.call(this,f,o[h],g[h])}l="rgb("+Math.floor(l[0])+","+Math.floor(l[1])+","+Math.floor(l[2])+")"}else{l=d.doMethod.call(this,f,o,g)}return l};b.setRuntimeAttribute=function(f){d.setRuntimeAttribute.call(this,f);if(this.patterns.color.test(f)){var h=this.attributes;var o=this.parseColor(this.runtimeAttributes[f].start);var g=this.parseColor(this.runtimeAttributes[f].end);if(typeof h[f]["to"]==="undefined"&&typeof h[f]["by"]!=="undefined"){g=this.parseColor(h[f].by);for(var l=0,e=o.length;l<e;++l){g[l]=o[l]+g[l]}}this.runtimeAttributes[f].start=o;this.runtimeAttributes[f].end=g}};c.ColorAnim=a})();
/*
TERMS OF USE - EASING EQUATIONS
Open source under the BSD License.
Copyright 2001 Robert Penner All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

 * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
 * Neither the name of the author nor the names of contributors may be used to endorse or promote products derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
YAHOO.util.Easing={easeNone:function(e,a,g,f){return g*e/f+a},easeIn:function(e,a,g,f){return g*(e/=f)*e+a},easeOut:function(e,a,g,f){return -g*(e/=f)*(e-2)+a},easeBoth:function(e,a,g,f){if((e/=f/2)<1){return g/2*e*e+a}return -g/2*((--e)*(e-2)-1)+a},easeInStrong:function(e,a,g,f){return g*(e/=f)*e*e*e+a},easeOutStrong:function(e,a,g,f){return -g*((e=e/f-1)*e*e*e-1)+a},easeBothStrong:function(e,a,g,f){if((e/=f/2)<1){return g/2*e*e*e*e+a}return -g/2*((e-=2)*e*e*e-2)+a},elasticIn:function(g,e,o,l,f,i){if(g==0){return e}if((g/=l)==1){return e+o}if(!i){i=l*0.3}if(!f||f<Math.abs(o)){f=o;var h=i/4}else{var h=i/(2*Math.PI)*Math.asin(o/f)}return -(f*Math.pow(2,10*(g-=1))*Math.sin((g*l-h)*(2*Math.PI)/i))+e},elasticOut:function(g,e,o,l,f,i){if(g==0){return e}if((g/=l)==1){return e+o}if(!i){i=l*0.3}if(!f||f<Math.abs(o)){f=o;var h=i/4}else{var h=i/(2*Math.PI)*Math.asin(o/f)}return f*Math.pow(2,-10*g)*Math.sin((g*l-h)*(2*Math.PI)/i)+o+e},elasticBoth:function(g,e,o,l,f,i){if(g==0){return e}if((g/=l/2)==2){return e+o}if(!i){i=l*(0.3*1.5)}if(!f||f<Math.abs(o)){f=o;var h=i/4}else{var h=i/(2*Math.PI)*Math.asin(o/f)}if(g<1){return -0.5*(f*Math.pow(2,10*(g-=1))*Math.sin((g*l-h)*(2*Math.PI)/i))+e}return f*Math.pow(2,-10*(g-=1))*Math.sin((g*l-h)*(2*Math.PI)/i)*0.5+o+e},backIn:function(e,a,h,g,f){if(typeof f=="undefined"){f=1.70158}return h*(e/=g)*e*((f+1)*e-f)+a},backOut:function(e,a,h,g,f){if(typeof f=="undefined"){f=1.70158}return h*((e=e/g-1)*e*((f+1)*e+f)+1)+a},backBoth:function(e,a,h,g,f){if(typeof f=="undefined"){f=1.70158}if((e/=g/2)<1){return h/2*(e*e*(((f*=(1.525))+1)*e-f))+a}return h/2*((e-=2)*e*(((f*=(1.525))+1)*e+f)+2)+a},bounceIn:function(e,a,g,f){return g-YAHOO.util.Easing.bounceOut(f-e,0,g,f)+a},bounceOut:function(e,a,g,f){if((e/=f)<(1/2.75)){return g*(7.5625*e*e)+a}else{if(e<(2/2.75)){return g*(7.5625*(e-=(1.5/2.75))*e+0.75)+a}else{if(e<(2.5/2.75)){return g*(7.5625*(e-=(2.25/2.75))*e+0.9375)+a}}}return g*(7.5625*(e-=(2.625/2.75))*e+0.984375)+a},bounceBoth:function(e,a,g,f){if(e<f/2){return YAHOO.util.Easing.bounceIn(e*2,0,g,f)*0.5+a}return YAHOO.util.Easing.bounceOut(e*2-f,0,g,f)*0.5+g*0.5+a}};(function(){var a=function(h,g,i,l){if(h){a.superclass.constructor.call(this,h,g,i,l)}};a.NAME="Motion";var e=YAHOO.util;YAHOO.extend(a,e.ColorAnim);var f=a.superclass;var c=a.prototype;c.patterns.points=/^points$/i;c.setAttribute=function(g,i,h){if(this.patterns.points.test(g)){h=h||"px";f.setAttribute.call(this,"left",i[0],h);f.setAttribute.call(this,"top",i[1],h)}else{f.setAttribute.call(this,g,i,h)}};c.getAttribute=function(g){if(this.patterns.points.test(g)){var h=[f.getAttribute.call(this,"left"),f.getAttribute.call(this,"top")]}else{h=f.getAttribute.call(this,g)}return h};c.doMethod=function(g,o,h){var l=null;if(this.patterns.points.test(g)){var i=this.method(this.currentFrame,0,100,this.totalFrames)/100;l=e.Bezier.getPosition(this.runtimeAttributes[g],i)}else{l=f.doMethod.call(this,g,o,h)}return l};c.setRuntimeAttribute=function(u){if(this.patterns.points.test(u)){var h=this.getEl();var o=this.attributes;var g;var q=o.points["control"]||[];var l;var r,t;if(q.length>0&&!(q[0] instanceof Array)){q=[q]}else{var p=[];for(r=0,t=q.length;r<t;++r){p[r]=q[r]}q=p}if(e.Dom.getStyle(h,"position")=="static"){e.Dom.setStyle(h,"position","relative")}if(d(o.points["from"])){e.Dom.setXY(h,o.points["from"])}else{e.Dom.setXY(h,e.Dom.getXY(h))}g=this.getAttribute("points");if(d(o.points["to"])){l=b.call(this,o.points["to"],g);var s=e.Dom.getXY(this.getEl());for(r=0,t=q.length;r<t;++r){q[r]=b.call(this,q[r],g)}}else{if(d(o.points["by"])){l=[g[0]+o.points["by"][0],g[1]+o.points["by"][1]];for(r=0,t=q.length;r<t;++r){q[r]=[g[0]+q[r][0],g[1]+q[r][1]]}}}this.runtimeAttributes[u]=[g];if(q.length>0){this.runtimeAttributes[u]=this.runtimeAttributes[u].concat(q)}this.runtimeAttributes[u][this.runtimeAttributes[u].length]=l}else{f.setRuntimeAttribute.call(this,u)}};var b=function(g,i){var h=e.Dom.getXY(this.getEl());g=[g[0]-h[0]+i[0],g[1]-h[1]+i[1]];return g};var d=function(g){return(typeof g!=="undefined")};e.Motion=a})();(function(){var d=function(f,e,g,h){if(f){d.superclass.constructor.call(this,f,e,g,h)}};d.NAME="Scroll";var b=YAHOO.util;YAHOO.extend(d,b.ColorAnim);var c=d.superclass;var a=d.prototype;a.doMethod=function(e,h,f){var g=null;if(e=="scroll"){g=[this.method(this.currentFrame,h[0],f[0]-h[0],this.totalFrames),this.method(this.currentFrame,h[1],f[1]-h[1],this.totalFrames)]}else{g=c.doMethod.call(this,e,h,f)}return g};a.getAttribute=function(e){var g=null;var f=this.getEl();if(e=="scroll"){g=[f.scrollLeft,f.scrollTop]}else{g=c.getAttribute.call(this,e)}return g};a.setAttribute=function(e,h,g){var f=this.getEl();if(e=="scroll"){f.scrollLeft=h[0];f.scrollTop=h[1]}else{c.setAttribute.call(this,e,h,g)}};b.Scroll=d})();YAHOO.register("animation",YAHOO.util.Anim,{version:"2.7.0",build:"1799"});if(!YAHOO.util.DragDropMgr){YAHOO.util.DragDropMgr=function(){var a=YAHOO.util.Event,b=YAHOO.util.Dom;return{useShim:false,_shimActive:false,_shimState:false,_debugShim:false,_createShim:function(){var c=document.createElement("div");c.id="yui-ddm-shim";if(document.body.firstChild){document.body.insertBefore(c,document.body.firstChild)}else{document.body.appendChild(c)}c.style.display="none";c.style.backgroundColor="red";c.style.position="absolute";c.style.zIndex="99999";b.setStyle(c,"opacity","0");this._shim=c;a.on(c,"mouseup",this.handleMouseUp,this,true);a.on(c,"mousemove",this.handleMouseMove,this,true);a.on(window,"scroll",this._sizeShim,this,true)},_sizeShim:function(){if(this._shimActive){var c=this._shim;c.style.height=b.getDocumentHeight()+"px";c.style.width=b.getDocumentWidth()+"px";c.style.top="0";c.style.left="0"}},_activateShim:function(){if(this.useShim){if(!this._shim){this._createShim()}this._shimActive=true;var c=this._shim,d="0";if(this._debugShim){d=".5"}b.setStyle(c,"opacity",d);this._sizeShim();c.style.display="block"}},_deactivateShim:function(){this._shim.style.display="none";this._shimActive=false},_shim:null,ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,interactionInfo:null,init:function(){this.initialized=true},POINT:0,INTERSECT:1,STRICT_INTERSECT:2,mode:0,_execOnAll:function(e,d){for(var f in this.ids){for(var c in this.ids[f]){var g=this.ids[f][c];if(!this.isTypeOfDD(g)){continue}g[e].apply(g,d)}}},_onLoad:function(){this.init();a.on(document,"mouseup",this.handleMouseUp,this,true);a.on(document,"mousemove",this.handleMouseMove,this,true);a.on(window,"unload",this._onUnload,this,true);a.on(window,"resize",this._onResize,this,true)},_onResize:function(c){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:1000,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,fromTimeout:false,regDragDrop:function(d,c){if(!this.initialized){this.init()}if(!this.ids[c]){this.ids[c]={}}this.ids[c][d.id]=d},removeDDFromGroup:function(e,c){if(!this.ids[c]){this.ids[c]={}}var d=this.ids[c];if(d&&d[e.id]){delete d[e.id]}},_remove:function(e){for(var d in e.groups){if(d){var c=this.ids[d];if(c&&c[e.id]){delete c[e.id]}}}delete this.handleIds[e.id]},regHandle:function(d,c){if(!this.handleIds[d]){this.handleIds[d]={}}this.handleIds[d][c]=c},isDragDrop:function(c){return(this.getDDById(c))?true:false},getRelated:function(h,d){var g=[];for(var f in h.groups){for(var e in this.ids[f]){var c=this.ids[f][e];if(!this.isTypeOfDD(c)){continue}if(!d||c.isTarget){g[g.length]=c}}}return g},isLegalTarget:function(g,f){var d=this.getRelated(g,true);for(var e=0,c=d.length;e<c;++e){if(d[e].id==f.id){return true}}return false},isTypeOfDD:function(c){return(c&&c.__ygDragDrop)},isHandle:function(d,c){return(this.handleIds[d]&&this.handleIds[d][c])},getDDById:function(d){for(var c in this.ids){if(this.ids[c][d]){return this.ids[c][d]}}return null},handleMouseDown:function(f,d){this.currentTarget=YAHOO.util.Event.getTarget(f);this.dragCurrent=d;var c=d.getEl();this.startX=YAHOO.util.Event.getPageX(f);this.startY=YAHOO.util.Event.getPageY(f);this.deltaX=this.startX-c.offsetLeft;this.deltaY=this.startY-c.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var e=YAHOO.util.DDM;e.startDrag(e.startX,e.startY);e.fromTimeout=true},this.clickTimeThresh)},startDrag:function(c,e){if(this.dragCurrent&&this.dragCurrent.useShim){this._shimState=this.useShim;this.useShim=true}this._activateShim();clearTimeout(this.clickTimeout);var d=this.dragCurrent;if(d&&d.events.b4StartDrag){d.b4StartDrag(c,e);d.fireEvent("b4StartDragEvent",{x:c,y:e})}if(d&&d.events.startDrag){d.startDrag(c,e);d.fireEvent("startDragEvent",{x:c,y:e})}this.dragThreshMet=true},handleMouseUp:function(c){if(this.dragCurrent){clearTimeout(this.clickTimeout);if(this.dragThreshMet){if(this.fromTimeout){this.fromTimeout=false;this.handleMouseMove(c)}this.fromTimeout=false;this.fireEvents(c,true)}else{}this.stopDrag(c);this.stopEvent(c)}},stopEvent:function(c){if(this.stopPropagation){YAHOO.util.Event.stopPropagation(c)}if(this.preventDefault){YAHOO.util.Event.preventDefault(c)}},stopDrag:function(f,d){var c=this.dragCurrent;if(c&&!d){if(this.dragThreshMet){if(c.events.b4EndDrag){c.b4EndDrag(f);c.fireEvent("b4EndDragEvent",{e:f})}if(c.events.endDrag){c.endDrag(f);c.fireEvent("endDragEvent",{e:f})}}if(c.events.mouseUp){c.onMouseUp(f);c.fireEvent("mouseUpEvent",{e:f})}}if(this._shimActive){this._deactivateShim();if(this.dragCurrent&&this.dragCurrent.useShim){this.useShim=this._shimState;this._shimState=false}}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(g){var c=this.dragCurrent;if(c){if(YAHOO.util.Event.isIE&&!g.button){this.stopEvent(g);return this.handleMouseUp(g)}else{if(g.clientX<0||g.clientY<0){}}if(!this.dragThreshMet){var f=Math.abs(this.startX-YAHOO.util.Event.getPageX(g));var d=Math.abs(this.startY-YAHOO.util.Event.getPageY(g));if(f>this.clickPixelThresh||d>this.clickPixelThresh){this.startDrag(this.startX,this.startY)}}if(this.dragThreshMet){if(c&&c.events.b4Drag){c.b4Drag(g);c.fireEvent("b4DragEvent",{e:g})}if(c&&c.events.drag){c.onDrag(g);c.fireEvent("dragEvent",{e:g})}if(c){this.fireEvents(g,false)}}this.stopEvent(g)}},fireEvents:function(D,r){var I=this.dragCurrent;if(!I||I.isLocked()||I.dragOnly){return}var t=YAHOO.util.Event.getPageX(D),s=YAHOO.util.Event.getPageY(D),v=new YAHOO.util.Point(t,s),q=I.getTargetCoord(v.x,v.y),g=I.getDragEl(),f=["out","over","drop","enter"],C=new YAHOO.util.Region(q.y,q.x+g.offsetWidth,q.y+g.offsetHeight,q.x),o=[],d={},w=[],J={outEvts:[],overEvts:[],dropEvts:[],enterEvts:[]};for(var A in this.dragOvers){var K=this.dragOvers[A];if(!this.isTypeOfDD(K)){continue}if(!this.isOverTarget(v,K,this.mode,C)){J.outEvts.push(K)}o[A]=true;delete this.dragOvers[A]}for(var z in I.groups){if("string"!=typeof z){continue}for(A in this.ids[z]){var h=this.ids[z][A];if(!this.isTypeOfDD(h)){continue}if(h.isTarget&&!h.isLocked()&&h!=I){if(this.isOverTarget(v,h,this.mode,C)){d[z]=true;if(r){J.dropEvts.push(h)}else{if(!o[h.id]){J.enterEvts.push(h)}else{J.overEvts.push(h)}this.dragOvers[h.id]=h}}}}}this.interactionInfo={out:J.outEvts,enter:J.enterEvts,over:J.overEvts,drop:J.dropEvts,point:v,draggedRegion:C,sourceRegion:this.locationCache[I.id],validDrop:r};for(var c in d){w.push(c)}if(r&&!J.dropEvts.length){this.interactionInfo.validDrop=false;if(I.events.invalidDrop){I.onInvalidDrop(D);I.fireEvent("invalidDropEvent",{e:D})}}for(A=0;A<f.length;A++){var G=null;if(J[f[A]+"Evts"]){G=J[f[A]+"Evts"]}if(G&&G.length){var l=f[A].charAt(0).toUpperCase()+f[A].substr(1),F="onDrag"+l,p="b4Drag"+l,u="drag"+l+"Event",E="drag"+l;if(this.mode){if(I.events[p]){I[p](D,G,w);I.fireEvent(p+"Event",{event:D,info:G,group:w})}if(I.events[E]){I[F](D,G,w);I.fireEvent(u,{event:D,info:G,group:w})}}else{for(var H=0,B=G.length;H<B;++H){if(I.events[p]){I[p](D,G[H].id,w[0]);I.fireEvent(p+"Event",{event:D,info:G[H].id,group:w[0]})}if(I.events[E]){I[F](D,G[H].id,w[0]);I.fireEvent(u,{event:D,info:G[H].id,group:w[0]})}}}}}},getBestMatch:function(e){var g=null;var d=e.length;if(d==1){g=e[0]}else{for(var f=0;f<d;++f){var c=e[f];if(this.mode==this.INTERSECT&&c.cursorIsOver){g=c;break}else{if(!g||!g.overlap||(c.overlap&&g.overlap.getArea()<c.overlap.getArea())){g=c}}}}return g},refreshCache:function(d){var f=d||this.ids;for(var c in f){if("string"!=typeof c){continue}for(var e in this.ids[c]){var h=this.ids[c][e];if(this.isTypeOfDD(h)){var l=this.getLocation(h);if(l){this.locationCache[h.id]=l}else{delete this.locationCache[h.id]}}}}},verifyEl:function(d){try{if(d){var c=d.offsetParent;if(c){return true}}}catch(f){}return false},getLocation:function(i){if(!this.isTypeOfDD(i)){return null}var g=i.getEl(),q,f,d,u,s,v,c,p,h;try{q=YAHOO.util.Dom.getXY(g)}catch(o){}if(!q){return null}f=q[0];d=f+g.offsetWidth;u=q[1];s=u+g.offsetHeight;v=u-i.padding[0];c=d+i.padding[1];p=s+i.padding[2];h=f-i.padding[3];return new YAHOO.util.Region(v,c,p,h)},isOverTarget:function(o,c,e,f){var g=this.locationCache[c.id];if(!g||!this.useCache){g=this.getLocation(c);this.locationCache[c.id]=g}if(!g){return false}c.cursorIsOver=g.contains(o);var l=this.dragCurrent;if(!l||(!e&&!l.constrainX&&!l.constrainY)){return c.cursorIsOver}c.overlap=null;if(!f){var h=l.getTargetCoord(o.x,o.y);var d=l.getDragEl();f=new YAHOO.util.Region(h.y,h.x+d.offsetWidth,h.y+d.offsetHeight,h.x)}var i=f.intersect(g);if(i){c.overlap=i;return(e)?true:c.cursorIsOver}else{return false}},_onUnload:function(d,c){this.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll("unreg",[]);this.ids={}},elementCache:{},getElWrapper:function(d){var c=this.elementCache[d];if(!c||!c.el){c=this.elementCache[d]=new this.ElementWrapper(YAHOO.util.Dom.get(d))}return c},getElement:function(c){return YAHOO.util.Dom.get(c)},getCss:function(d){var c=YAHOO.util.Dom.get(d);return(c)?c.style:null},ElementWrapper:function(c){this.el=c||null;this.id=this.el&&c.id;this.css=this.el&&c.style},getPosX:function(c){return YAHOO.util.Dom.getX(c)},getPosY:function(c){return YAHOO.util.Dom.getY(c)},swapNode:function(e,c){if(e.swapNode){e.swapNode(c)}else{var f=c.parentNode;var d=c.nextSibling;if(d==e){f.insertBefore(e,c)}else{if(c==e.nextSibling){f.insertBefore(c,e)}else{e.parentNode.replaceChild(c,e);f.insertBefore(e,d)}}}},getScroll:function(){var e,c,f=document.documentElement,d=document.body;if(f&&(f.scrollTop||f.scrollLeft)){e=f.scrollTop;c=f.scrollLeft}else{if(d){e=d.scrollTop;c=d.scrollLeft}else{}}return{top:e,left:c}},getStyle:function(d,c){return YAHOO.util.Dom.getStyle(d,c)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(c,e){var d=YAHOO.util.Dom.getXY(e);YAHOO.util.Dom.setXY(c,d)},getClientHeight:function(){return YAHOO.util.Dom.getViewportHeight()},getClientWidth:function(){return YAHOO.util.Dom.getViewportWidth()},numericSort:function(d,c){return(d-c)},_timeoutCount:0,_addListeners:function(){var c=YAHOO.util.DDM;if(YAHOO.util.Event&&document){c._onLoad()}else{if(c._timeoutCount>2000){}else{setTimeout(c._addListeners,10);if(document&&document.body){c._timeoutCount+=1}}}},handleWasClicked:function(c,e){if(this.isHandle(e,c.id)){return true}else{var d=c.parentNode;while(d){if(this.isHandle(e,d.id)){return true}else{d=d.parentNode}}}return false}}}();YAHOO.util.DDM=YAHOO.util.DragDropMgr;YAHOO.util.DDM._addListeners()}(function(){var a=YAHOO.util.Event;var b=YAHOO.util.Dom;YAHOO.util.DragDrop=function(e,c,d){if(e){this.init(e,c,d)}};YAHOO.util.DragDrop.prototype={events:null,on:function(){this.subscribe.apply(this,arguments)},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},unlock:function(){this.locked=false},isTarget:true,padding:null,dragOnly:false,useShim:false,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,deltaX:0,deltaY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,cursorIsOver:false,overlap:null,b4StartDrag:function(c,d){},startDrag:function(c,d){},b4Drag:function(c){},onDrag:function(c){},onDragEnter:function(c,d){},b4DragOver:function(c){},onDragOver:function(c,d){},b4DragOut:function(c){},onDragOut:function(c,d){},b4DragDrop:function(c){},onDragDrop:function(c,d){},onInvalidDrop:function(c){},b4EndDrag:function(c){},endDrag:function(c){},b4MouseDown:function(c){},onMouseDown:function(c){},onMouseUp:function(c){},onAvailable:function(){},getEl:function(){if(!this._domRef){this._domRef=b.get(this.id)}return this._domRef},getDragEl:function(){return b.get(this.dragElId)},init:function(f,c,d){this.initTarget(f,c,d);a.on(this._domRef||this.id,"mousedown",this.handleMouseDown,this,true);for(var e in this.events){this.createEvent(e+"Event")}},initTarget:function(e,c,d){this.config=d||{};this.events={};this.DDM=YAHOO.util.DDM;this.groups={};if(typeof e!=="string"){this._domRef=e;e=b.generateId(e)}this.id=e;this.addToGroup((c)?c:"default");this.handleElId=e;a.onAvailable(e,this.handleOnAvailable,this,true);this.setDragElId(e);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig()},applyConfig:function(){this.events={mouseDown:true,b4MouseDown:true,mouseUp:true,b4StartDrag:true,startDrag:true,b4EndDrag:true,endDrag:true,drag:true,b4Drag:true,invalidDrop:true,b4DragOut:true,dragOut:true,dragEnter:true,b4DragOver:true,dragOver:true,b4DragDrop:true,dragDrop:true};if(this.config.events){for(var c in this.config.events){if(this.config.events[c]===false){this.events[c]=false}}}this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false);this.dragOnly=((this.config.dragOnly===true)?true:false);this.useShim=((this.config.useShim===true)?true:false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(e,c,f,d){if(!c&&0!==c){this.padding=[e,e,e,e]}else{if(!f&&0!==f){this.padding=[e,c,e,c]}else{this.padding=[e,c,f,d]}}},setInitPosition:function(f,e){var g=this.getEl();if(!this.DDM.verifyEl(g)){if(g&&g.style&&(g.style.display=="none")){}else{}return}var d=f||0;var c=e||0;var h=b.getXY(g);this.initPageX=h[0]-d;this.initPageY=h[1]-c;this.lastPageX=h[0];this.lastPageY=h[1];this.setStartPosition(h)},setStartPosition:function(d){var c=d||b.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=c[0];this.startPageY=c[1]},addToGroup:function(c){this.groups[c]=true;this.DDM.regDragDrop(this,c)},removeFromGroup:function(c){if(this.groups[c]){delete this.groups[c]}this.DDM.removeDDFromGroup(this,c)},setDragElId:function(c){this.dragElId=c},setHandleElId:function(c){if(typeof c!=="string"){c=b.generateId(c)}this.handleElId=c;this.DDM.regHandle(this.id,c)},setOuterHandleElId:function(c){if(typeof c!=="string"){c=b.generateId(c)}a.on(c,"mousedown",this.handleMouseDown,this,true);this.setHandleElId(c);this.hasOuterHandles=true},unreg:function(){a.removeListener(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},isLocked:function(){return(this.DDM.isLocked()||this.locked)},handleMouseDown:function(o,l){var d=o.which||o.button;if(this.primaryButtonOnly&&d>1){return}if(this.isLocked()){return}var c=this.b4MouseDown(o),g=true;if(this.events.b4MouseDown){g=this.fireEvent("b4MouseDownEvent",o)}var f=this.onMouseDown(o),i=true;if(this.events.mouseDown){i=this.fireEvent("mouseDownEvent",o)}if((c===false)||(f===false)||(g===false)||(i===false)){return}this.DDM.refreshCache(this.groups);var h=new YAHOO.util.Point(a.getPageX(o),a.getPageY(o));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(h,this)){}else{if(this.clickValidator(o)){this.setStartPosition();this.DDM.handleMouseDown(o,this);this.DDM.stopEvent(o)}else{}}},clickValidator:function(d){var c=YAHOO.util.Event.getTarget(d);return(this.isValidHandleChild(c)&&(this.id==this.handleElId||this.DDM.handleWasClicked(c,this.id)))},getTargetCoord:function(e,d){var c=e-this.deltaX;var f=d-this.deltaY;if(this.constrainX){if(c<this.minX){c=this.minX}if(c>this.maxX){c=this.maxX}}if(this.constrainY){if(f<this.minY){f=this.minY}if(f>this.maxY){f=this.maxY}}c=this.getTick(c,this.xTicks);f=this.getTick(f,this.yTicks);return{x:c,y:f}},addInvalidHandleType:function(c){var d=c.toUpperCase();this.invalidHandleTypes[d]=d},addInvalidHandleId:function(c){if(typeof c!=="string"){c=b.generateId(c)}this.invalidHandleIds[c]=c},addInvalidHandleClass:function(c){this.invalidHandleClasses.push(c)},removeInvalidHandleType:function(c){var d=c.toUpperCase();delete this.invalidHandleTypes[d]},removeInvalidHandleId:function(c){if(typeof c!=="string"){c=b.generateId(c)}delete this.invalidHandleIds[c]},removeInvalidHandleClass:function(d){for(var e=0,c=this.invalidHandleClasses.length;e<c;++e){if(this.invalidHandleClasses[e]==d){delete this.invalidHandleClasses[e]}}},isValidHandleChild:function(g){var f=true;var l;try{l=g.nodeName.toUpperCase()}catch(h){l=g.nodeName}f=f&&!this.invalidHandleTypes[l];f=f&&!this.invalidHandleIds[g.id];for(var d=0,c=this.invalidHandleClasses.length;f&&d<c;++d){f=!b.hasClass(g,this.invalidHandleClasses[d])}return f},setXTicks:function(f,c){this.xTicks=[];this.xTickSize=c;var e={};for(var d=this.initPageX;d>=this.minX;d=d-c){if(!e[d]){this.xTicks[this.xTicks.length]=d;e[d]=true}}for(d=this.initPageX;d<=this.maxX;d=d+c){if(!e[d]){this.xTicks[this.xTicks.length]=d;e[d]=true}}this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(f,c){this.yTicks=[];this.yTickSize=c;var e={};for(var d=this.initPageY;d>=this.minY;d=d-c){if(!e[d]){this.yTicks[this.yTicks.length]=d;e[d]=true}}for(d=this.initPageY;d<=this.maxY;d=d+c){if(!e[d]){this.yTicks[this.yTicks.length]=d;e[d]=true}}this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(e,d,c){this.leftConstraint=parseInt(e,10);this.rightConstraint=parseInt(d,10);this.minX=this.initPageX-this.leftConstraint;this.maxX=this.initPageX+this.rightConstraint;if(c){this.setXTicks(this.initPageX,c)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(c,e,d){this.topConstraint=parseInt(c,10);this.bottomConstraint=parseInt(e,10);this.minY=this.initPageY-this.topConstraint;this.maxY=this.initPageY+this.bottomConstraint;if(d){this.setYTicks(this.initPageY,d)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var d=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var c=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(d,c)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(l,f){if(!f){return l}else{if(f[0]>=l){return f[0]}else{for(var d=0,c=f.length;d<c;++d){var e=d+1;if(f[e]&&f[e]>=l){var h=l-f[d];var g=f[e]-l;return(g>h)?f[d]:f[e]}}return f[f.length-1]}}},toString:function(){return("DragDrop "+this.id)}};YAHOO.augment(YAHOO.util.DragDrop,YAHOO.util.EventProvider)})();YAHOO.util.DD=function(c,a,b){if(c){this.init(c,a,b)}};YAHOO.extend(YAHOO.util.DD,YAHOO.util.DragDrop,{scroll:true,autoOffset:function(c,b){var a=c-this.startPageX;var d=b-this.startPageY;this.setDelta(a,d)},setDelta:function(b,a){this.deltaX=b;this.deltaY=a},setDragElPos:function(c,b){var a=this.getDragEl();this.alignElWithMouse(a,c,b)},alignElWithMouse:function(c,g,f){var e=this.getTargetCoord(g,f);if(!this.deltaSetXY){var h=[e.x,e.y];YAHOO.util.Dom.setXY(c,h);var d=parseInt(YAHOO.util.Dom.getStyle(c,"left"),10);var b=parseInt(YAHOO.util.Dom.getStyle(c,"top"),10);this.deltaSetXY=[d-e.x,b-e.y]}else{YAHOO.util.Dom.setStyle(c,"left",(e.x+this.deltaSetXY[0])+"px");YAHOO.util.Dom.setStyle(c,"top",(e.y+this.deltaSetXY[1])+"px")}this.cachePosition(e.x,e.y);var a=this;setTimeout(function(){a.autoScroll.call(a,e.x,e.y,c.offsetHeight,c.offsetWidth)},0)},cachePosition:function(b,a){if(b){this.lastPageX=b;this.lastPageY=a}else{var c=YAHOO.util.Dom.getXY(this.getEl());this.lastPageX=c[0];this.lastPageY=c[1]}},autoScroll:function(o,l,e,p){if(this.scroll){var q=this.DDM.getClientHeight();var b=this.DDM.getClientWidth();var s=this.DDM.getScrollTop();var d=this.DDM.getScrollLeft();var i=e+l;var r=p+o;var g=(q+s-l-this.deltaY);var f=(b+d-o-this.deltaX);var c=40;var a=(document.all)?80:30;if(i>q&&g<c){window.scrollTo(d,s+a)}if(l<s&&s>0&&l-s<c){window.scrollTo(d,s-a)}if(r>b&&f<c){window.scrollTo(d+a,s)}if(o<d&&d>0&&o-d<c){window.scrollTo(d-a,s)}}},applyConfig:function(){YAHOO.util.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(a){this.setStartPosition();this.autoOffset(YAHOO.util.Event.getPageX(a),YAHOO.util.Event.getPageY(a))},b4Drag:function(a){this.setDragElPos(YAHOO.util.Event.getPageX(a),YAHOO.util.Event.getPageY(a))},toString:function(){return("DD "+this.id)}});YAHOO.util.DDProxy=function(c,a,b){if(c){this.init(c,a,b);this.initFrame()}};YAHOO.util.DDProxy.dragElId="ygddfdiv";YAHOO.extend(YAHOO.util.DDProxy,YAHOO.util.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var b=this,a=document.body;if(!a||!a.firstChild){setTimeout(function(){b.createFrame()},50);return}var f=this.getDragEl(),e=YAHOO.util.Dom;if(!f){f=document.createElement("div");f.id=this.dragElId;var d=f.style;d.position="absolute";d.visibility="hidden";d.cursor="move";d.border="2px solid #aaa";d.zIndex=999;d.height="25px";d.width="25px";var c=document.createElement("div");e.setStyle(c,"height","100%");e.setStyle(c,"width","100%");e.setStyle(c,"background-color","#ccc");e.setStyle(c,"opacity","0");f.appendChild(c);a.insertBefore(f,a.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){YAHOO.util.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||YAHOO.util.DDProxy.dragElId)},showFrame:function(e,d){var c=this.getEl();var a=this.getDragEl();var b=a.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(b.width,10)/2),Math.round(parseInt(b.height,10)/2))}this.setDragElPos(e,d);YAHOO.util.Dom.setStyle(a,"visibility","visible")},_resizeProxy:function(){if(this.resizeFrame){var h=YAHOO.util.Dom;var b=this.getEl();var c=this.getDragEl();var g=parseInt(h.getStyle(c,"borderTopWidth"),10);var i=parseInt(h.getStyle(c,"borderRightWidth"),10);var f=parseInt(h.getStyle(c,"borderBottomWidth"),10);var d=parseInt(h.getStyle(c,"borderLeftWidth"),10);if(isNaN(g)){g=0}if(isNaN(i)){i=0}if(isNaN(f)){f=0}if(isNaN(d)){d=0}var e=Math.max(0,b.offsetWidth-i-d);var a=Math.max(0,b.offsetHeight-g-f);h.setStyle(c,"width",e+"px");h.setStyle(c,"height",a+"px")}},b4MouseDown:function(b){this.setStartPosition();var a=YAHOO.util.Event.getPageX(b);var c=YAHOO.util.Event.getPageY(b);this.autoOffset(a,c)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){YAHOO.util.Dom.setStyle(this.getDragEl(),"visibility","hidden")},endDrag:function(d){var c=YAHOO.util.Dom;var b=this.getEl();var a=this.getDragEl();c.setStyle(a,"visibility","");c.setStyle(b,"visibility","hidden");YAHOO.util.DDM.moveToEl(b,a);c.setStyle(a,"visibility","hidden");c.setStyle(b,"visibility","")},toString:function(){return("DDProxy "+this.id)}});YAHOO.util.DDTarget=function(c,a,b){if(c){this.initTarget(c,a,b)}};YAHOO.extend(YAHOO.util.DDTarget,YAHOO.util.DragDrop,{toString:function(){return("DDTarget "+this.id)}});YAHOO.register("dragdrop",YAHOO.util.DragDropMgr,{version:"2.7.0",build:"1799"});YAHOO.lang.JSON=(function(){var l=YAHOO.lang,_UNICODE_EXCEPTIONS=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_ESCAPES=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,_VALUES=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_BRACKETS=/(?:^|:|,)(?:\s*\[)+/g,_INVALID=/^[\],:{}\s]*$/,_SPECIAL_CHARS=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_CHARS={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function _revive(data,reviver){var walk=function(o,key){var k,v,value=o[key];if(value&&typeof value==="object"){for(k in value){if(l.hasOwnProperty(value,k)){v=walk(value,k);if(v===undefined){delete value[k]}else{value[k]=v}}}}return reviver.call(o,key,value)};return typeof reviver==="function"?walk({"":data},""):data}function _char(c){if(!_CHARS[c]){_CHARS[c]="\\u"+("0000"+(+(c.charCodeAt(0))).toString(16)).slice(-4)}return _CHARS[c]}function _prepare(s){return s.replace(_UNICODE_EXCEPTIONS,_char)}function _isValid(str){return l.isString(str)&&_INVALID.test(str.replace(_ESCAPES,"@").replace(_VALUES,"]").replace(_BRACKETS,""))}function _string(s){return'"'+s.replace(_SPECIAL_CHARS,_char)+'"'}function _stringify(h,key,d,w,pstack){var o=typeof w==="function"?w.call(h,key,h[key]):h[key],i,len,j,k,v,isArray,a;if(o instanceof Date){o=l.JSON.dateToString(o)}else{if(o instanceof String||o instanceof Boolean||o instanceof Number){o=o.valueOf()}}switch(typeof o){case"string":return _string(o);case"number":return isFinite(o)?String(o):"null";case"boolean":return String(o);case"object":if(o===null){return"null"}for(i=pstack.length-1;i>=0;--i){if(pstack[i]===o){return"null"}}pstack[pstack.length]=o;a=[];isArray=l.isArray(o);if(d>0){if(isArray){for(i=o.length-1;i>=0;--i){a[i]=_stringify(o,i,d-1,w,pstack)||"null"}}else{j=0;if(l.isArray(w)){for(i=0,len=w.length;i<len;++i){k=w[i];v=_stringify(o,k,d-1,w,pstack);if(v){a[j++]=_string(k)+":"+v}}}else{for(k in o){if(typeof k==="string"&&l.hasOwnProperty(o,k)){v=_stringify(o,k,d-1,w,pstack);if(v){a[j++]=_string(k)+":"+v}}}}a.sort()}}pstack.pop();return isArray?"["+a.join(",")+"]":"{"+a.join(",")+"}"}return undefined}return{isValid:function(s){return _isValid(_prepare(s))},parse:function(s,reviver){s=_prepare(s);if(_isValid(s)){return _revive(eval("("+s+")"),reviver)}throw new SyntaxError("parseJSON")},stringify:function(o,w,d){if(o!==undefined){if(l.isArray(w)){w=(function(a){var uniq=[],map={},v,i,j,len;for(i=0,j=0,len=a.length;i<len;++i){v=a[i];if(typeof v==="string"&&map[v]===undefined){uniq[(map[v]=j++)]=v}}return uniq})(w)}d=d>=0?d:1/0;return _stringify({"":o},"",d,w,[])}return undefined},dateToString:function(d){function _zeroPad(v){return v<10?"0"+v:v}return d.getUTCFullYear()+"-"+_zeroPad(d.getUTCMonth()+1)+"-"+_zeroPad(d.getUTCDate())+"T"+_zeroPad(d.getUTCHours())+":"+_zeroPad(d.getUTCMinutes())+":"+_zeroPad(d.getUTCSeconds())+"Z"},stringToDate:function(str){if(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})Z$/.test(str)){var d=new Date();d.setUTCFullYear(RegExp.$1,(RegExp.$2|0)-1,RegExp.$3);d.setUTCHours(RegExp.$4,RegExp.$5,RegExp.$6);return d}return str}}})();YAHOO.register("json",YAHOO.lang.JSON,{version:"2.7.0",build:"1799"});YAHOO.namespace("util");YAHOO.util.Cookie={_createCookieString:function(b,d,c,a){var f=YAHOO.lang;var e=encodeURIComponent(b)+"="+(c?encodeURIComponent(d):d);if(f.isObject(a)){if(a.expires instanceof Date){e+="; expires="+a.expires.toGMTString()}if(f.isString(a.path)&&a.path!=""){e+="; path="+a.path}if(f.isString(a.domain)&&a.domain!=""){e+="; domain="+a.domain}if(a.secure===true){e+="; secure"}}return e},_createCookieHashString:function(b){var d=YAHOO.lang;if(!d.isObject(b)){throw new TypeError("Cookie._createCookieHashString(): Argument must be an object.")}var c=new Array();for(var a in b){if(d.hasOwnProperty(b,a)&&!d.isFunction(b[a])&&!d.isUndefined(b[a])){c.push(encodeURIComponent(a)+"="+encodeURIComponent(String(b[a])))}}return c.join("&")},_parseCookieHash:function(e){var d=e.split("&"),f=null,c=new Object();if(e.length>0){for(var b=0,a=d.length;b<a;b++){f=d[b].split("=");c[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}}return c},_parseCookieString:function(o,a){var p=new Object();if(YAHOO.lang.isString(o)&&o.length>0){var b=(a===false?function(i){return i}:decodeURIComponent);if(/[^=]+=[^=;]?(?:; [^=]+=[^=]?)?/.test(o)){var h=o.split(/;\s/g),l=null,c=null,e=null;for(var d=0,f=h.length;d<f;d++){e=h[d].match(/([^=]+)=/i);if(e instanceof Array){try{l=decodeURIComponent(e[1]);c=b(h[d].substring(e[1].length+1))}catch(g){}}else{l=decodeURIComponent(h[d]);c=l}p[l]=c}}}return p},get:function(a,b){var d=YAHOO.lang;var c=this._parseCookieString(document.cookie);if(!d.isString(a)||a===""){throw new TypeError("Cookie.get(): Cookie name must be a non-empty string.")}if(d.isUndefined(c[a])){return null}if(!d.isFunction(b)){return c[a]}else{return b(c[a])}},getSub:function(a,c,b){var e=YAHOO.lang;var d=this.getSubs(a);if(d!==null){if(!e.isString(c)||c===""){throw new TypeError("Cookie.getSub(): Subcookie name must be a non-empty string.")}if(e.isUndefined(d[c])){return null}if(!e.isFunction(b)){return d[c]}else{return b(d[c])}}else{return null}},getSubs:function(a){if(!YAHOO.lang.isString(a)||a===""){throw new TypeError("Cookie.getSubs(): Cookie name must be a non-empty string.")}var b=this._parseCookieString(document.cookie,false);if(YAHOO.lang.isString(b[a])){return this._parseCookieHash(b[a])}return null},remove:function(b,a){if(!YAHOO.lang.isString(b)||b===""){throw new TypeError("Cookie.remove(): Cookie name must be a non-empty string.")}a=a||{};a.expires=new Date(0);return this.set(b,"",a)},removeSub:function(b,d,a){if(!YAHOO.lang.isString(b)||b===""){throw new TypeError("Cookie.removeSub(): Cookie name must be a non-empty string.")}if(!YAHOO.lang.isString(d)||d===""){throw new TypeError("Cookie.removeSub(): Subcookie name must be a non-empty string.")}var c=this.getSubs(b);if(YAHOO.lang.isObject(c)&&YAHOO.lang.hasOwnProperty(c,d)){delete c[d];return this.setSubs(b,c,a)}else{return""}},set:function(b,c,a){var e=YAHOO.lang;if(!e.isString(b)){throw new TypeError("Cookie.set(): Cookie name must be a string.")}if(e.isUndefined(c)){throw new TypeError("Cookie.set(): Value cannot be undefined.")}var d=this._createCookieString(b,c,true,a);document.cookie=d;return d},setSub:function(b,d,c,a){var f=YAHOO.lang;if(!f.isString(b)||b===""){throw new TypeError("Cookie.setSub(): Cookie name must be a non-empty string.")}if(!f.isString(d)||d===""){throw new TypeError("Cookie.setSub(): Subcookie name must be a non-empty string.")}if(f.isUndefined(c)){throw new TypeError("Cookie.setSub(): Subcookie value cannot be undefined.")}var e=this.getSubs(b);if(!f.isObject(e)){e=new Object()}e[d]=c;return this.setSubs(b,e,a)},setSubs:function(b,c,a){var e=YAHOO.lang;if(!e.isString(b)){throw new TypeError("Cookie.setSubs(): Cookie name must be a string.")}if(!e.isObject(c)){throw new TypeError("Cookie.setSubs(): Cookie value must be an object.")}var d=this._createCookieString(b,this._createCookieHashString(c),false,a);document.cookie=d;return d}};YAHOO.register("cookie",YAHOO.util.Cookie,{version:"2.7.0",build:"1799"});
/*
Taobao JavaScript Framework base on YUI.
T-Bra or TB-ra whatever you like name it...
version 1.0
*/
if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,b){if(b==null){b=0}else{if(b<0){b=Math.max(0,this.length+b)}}for(var a=b;a<this.length;a++){if(this[a]===c){return a}}return -1}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(c,b){if(b==null){b=this.length-1}else{if(b<0){b=Math.max(0,this.length+b)}}for(var a=b;a>=0;a--){if(this[a]===c){return a}}return -1}}if(!Array.prototype.forEach){Array.prototype.forEach=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this){b.call(d,this[c],c,this)}}}}if(!Array.prototype.filter){Array.prototype.filter=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var e=[];var d=arguments[1];for(var c=0;c<a;c++){if(c in this){var f=this[c];if(b.call(d,f,c,this)){e.push(f)}}}return e}}if(!Array.prototype.map){Array.prototype.map=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var e=new Array(a);var d=arguments[1];for(var c=0;c<a;c++){if(c in this){e[c]=b.call(d,this[c],c,this)}}return e}}if(!Array.prototype.some){Array.prototype.some=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this&&b.call(d,this[c],c,this)){return true}}return false}}if(!Array.prototype.every){Array.prototype.every=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this&&!b.call(d,this[c],c,this)){return false}}return true}}Array.prototype.copy=function(){var a=this.length;var c=new Array(a);for(var b=0;b<a;b++){c[b]=this[b]}return c};Array.prototype.remove=function(a){var b=this.indexOf(a);return(b!=-1)?this.splice(b,1):false};(function(){["indexOf","lastIndexOf","forEach","filter","map","some","every","copy"].forEach(function(a){if(!Array[a]){Array[a]=function(b){return Array.prototype[a].apply(b,Array.prototype.slice.call(arguments,1))}}})})();if(!String.prototype.toQueryParams){String.prototype.toQueryParams=function(){var f={};var g=this.split("&");var d=/([^=]*)=(.*)/;for(var b=0;b<g.length;b++){var a=d.exec(g[b]);if(!a){continue}var c=decodeURIComponent(a[1]);var e=a[2]?decodeURIComponent(a[2]):undefined;if(f[c]!==undefined){if(f[c].constructor!=Array){f[c]=[f[c]]}if(e){f[c].push(e)}}else{f[c]=e}}return f}}if(!String.prototype.trim){String.prototype.trim=function(){var a=/^\s+|\s+$/g;return function(){return this.replace(a,"")}}()}if(!String.prototype.replaceAll){String.prototype.replaceAll=function(b,a){return this.replace(new RegExp(b,"gm"),a)}}Math.randomInt=function(a){return Math.floor(Math.random()*(a+1))};TB=YAHOO.namespace("TB");TB.namespace=function(){var a=Array.prototype.slice.call(arguments,0),b;for(b=0;b<a.length;++b){if(a[b].indexOf("TB")!=0){a[b]="TB."+a[b]}}return YAHOO.namespace.apply(null,a)};TB.namespace("env");TB.env={hostname:"taobao.com",debug:false,yuipath:"http://a.tbcdn.cn/yui/2.7.0/",lang:"zh-cn"};TB.namespace("locale");TB.locale={Messages:{},getMessage:function(a){return TB.locale.Messages[a]||a},setMessage:function(a,b){TB.locale.Messages[a]=b}};$M=TB.locale.getMessage;TB.trace=function(a){if(!TB.env.debug){return}if(window.console){window.console.debug(a)}else{alert(a)}};TB.init=function(){this.namespace("widget","dom","bom","util","form","anim");if(location.hostname.indexOf("taobao.com")==-1){TB.env.hostname=location.hostname;TB.env.debug=true}var a=document.getElementsByTagName("script");var c=/tbra(?:[\w\.\-]*?)\.js(?:$|\?(.*))/;var e;for(var b=0;b<a.length;++b){if(e=c.exec(a[b].src)){TB.env.path=a[b].src.substring(0,e.index);if(e[1]){var d=e[1].toQueryParams();for(n in d){if(n=="t"||n=="timestamp"){TB.env.timestamp=parseInt(d[n]);continue}TB.env[n]=d[n]}}}}};TB.init();TB.common={trim:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")},escapeHTML:function(b){var c=document.createElement("div");var a=document.createTextNode(b);c.appendChild(a);return c.innerHTML},unescapeHTML:function(a){var b=document.createElement("div");b.innerHTML=a.replace(/<\/?[^>]+>/gi,"");return b.childNodes[0]?b.childNodes[0].nodeValue:""},stripTags:function(a){return a.replace(/<\/?[^>]+>/gi,"")},toArray:function(b,d){var c=[];for(var a=d||0;a<b.length;a++){c[c.length]=b[a]}return c},applyIf:function(c,a){if(c&&a&&typeof a=="object"){for(var b in a){if(!YAHOO.lang.hasOwnProperty(c,b)){c[b]=a[b]}}}return c},apply:function(c,a){if(c&&a&&typeof a=="object"){for(var b in a){c[b]=a[b]}}return c},formatMessage:function(d,a,b){var c=/\{([\w-]+)?\}/g;return function(g,e,f){return g.replace(c,function(h,i){return f?f(e[i],i):e[i]})}}(),parseUri:(function(){var b=["source","prePath","scheme","username","password","host","port","path","dir","file","query","fragment"];var a=/^((?:([^:\/?#.]+):)?(?:\/\/)?(?:([^:@]*):?([^:@]*)?@)?([^:\/?#]*)(?::(\d*))?)((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?/;return function(f){var e={};var c=a.exec(f);for(var d=0;d<c.length;++d){e[b[d]]=(c[d]?c[d]:"")}return e}})()};TB.applyIf=TB.common.applyIf;TB.apply=TB.common.apply;TB.locale.Messages={loading:"\u52a0\u8f7d\u4e2d...",pleaseWait:"\u6b63\u5728\u5904\u7406\uff0c\u8bf7\u7a0d\u5019...",ajaxError:"\u5bf9\u4e0d\u8d77\uff0c\u53ef\u80fd\u56e0\u4e3a\u7f51\u7edc\u6545\u969c\u5bfc\u81f4\u7cfb\u7edf\u53d1\u751f\u5f02\u5e38\u9519\u8bef\uff01",prevPageText:"\u4e0a\u4e00\u9875",nextPageText:"\u4e0b\u4e00\u9875",year:"\u5e74",month:"\u6708",day:"\u5929",hour:"\u5c0f\u65f6",minute:"\u5206\u949f",second:"\u79d2",timeoutText:"\u65f6\u95f4\u5230"};(function(){var e=navigator.userAgent.toLowerCase();var b=e.indexOf("opera")!=-1,g=e.indexOf("safari")!=-1,a=!b&&!g&&e.indexOf("gecko")>-1,c=!b&&e.indexOf("msie")!=-1,f=!b&&e.indexOf("msie 6")!=-1,d=!b&&e.indexOf("msie 7")!=-1;TB.bom={isOpera:b,isSafari:g,isGecko:a,isIE:c,isIE6:f,isIE7:d,getCookie:function(h){var i=document.cookie.match("(?:^|;)\\s*"+h+"=([^;]*)");return i?unescape(i[1]):""},setCookie:function(l,p,h,o,q){p=escape(p);p+=(o)?"; domain="+o:"";p+=(q)?"; path="+q:"";if(h){var i=new Date();i.setTime(i.getTime()+(h*86400000));p+="; expires="+i.toGMTString()}document.cookie=l+"="+p},removeCookie:function(h){this.setCookie(h,"",-1)},pickDocumentDomain:function(){var o=arguments[1]||location.hostname;var l=o.split("."),h=l.length;var i=arguments[0]||(h<3?0:1);if(i>=h||h-i<2){i=h-2}return l.slice(i).join(".")},addBookmark:function(i,h){if(window.sidebar){window.sidebar.addPanel(i,h,"")}else{if(window.external){window.external.AddFavorite(h,i)}else{}}}}})();TB.dom={insertAfter:function(b,a){return YAHOO.util.Dom.insertAfter(b,a)},getAncestorByTagName:function(b,a){return YAHOO.util.Dom.getAncestorByTagName(b,a)},getAncestorByClassName:function(b,a){return YAHOO.util.Dom.getAncestorByClassName(b,a)},getNextSibling:function(a){return YAHOO.util.Dom.getNextSibling(a)},getPreviousSibling:function(a){return YAHOO.util.Dom.getPreviousSibling(a)},getFieldLabelHtml:function(e,d){var b=YAHOO.util.Dom.get(e),f=(d||b.parentNode).getElementsByTagName("label");for(var c=0;c<f.length;c++){var a=f[c].htmlFor||f[c].getAttribute("for");if(a==b.id){return f[c].innerHTML}}return null},getIframeDocument:function(b){var a=YAHOO.util.Dom.get(b);return a.contentWindow?a.contentWindow.document:a.contentDocument},setFormAction:function(e,c){e=YAHOO.util.Dom.get(e);var b=e.elements.action;var d;if(b){var a=e.removeChild(b);d=function(){e.appendChild(a)}}e.action=c;if(d){d()}return true},addCSS:function(a,c){c=c||document;var b=c.createElement("style");b.type="text/css";c.getElementsByTagName("head")[0].appendChild(b);if(b.styleSheet){b.styleSheet.cssText=a}else{b.appendChild(c.createTextNode(a))}},getScriptParams:function(c){var f=/\?(.*?)($|\.js)/;var b;if(YAHOO.lang.isObject(c)&&c.tagName&&c.tagName.toLowerCase()=="script"){if(c.src&&(b=c.src.match(f))){return b[1].toQueryParams()}}else{if(YAHOO.lang.isString(c)){c=new RegExp(c,"i")}var a=document.getElementsByTagName("script");var g,e;for(var d=0;d<a.length;++d){e=a[d].src;if(e&&c.test(e)&&(b=e.match(f))){return b[1].toQueryParams()}}}}};TB.util.Indicator=new function(){var e=YAHOO.util,a=e.Dom,c=e.Lang;var b={message:"loading",useShim:false,useIFrame:false,centerIndicator:true};var d=function(g,f){var i=document.createElement("div");i.className="tb-indic-shim";a.setStyle(i,"display","none");g.parentNode.insertBefore(i,g);if(f){var h=document.createElement("iframe");h.setAttribute("frameBorder",0);h.className="tb-indic-shim-iframe";g.parentNode.insertBefore(h,g)}return i};this.attach=function(i,g){i=a.get(i);g=c.merge(b,g||{});var f=document.createElement("div");f.className="tb-indic";a.setStyle(f,"display","none");a.setStyle(f,"position","static");f.innerHTML="<span>"+$M(g.message)+"</span>";if(g.useShim){var l=d(i,g.useIFrame);l.appendChild(f)}else{i.parentNode.insertBefore(f,i)}var h={};h.show=function(p){if(g.useShim){var o=a.getRegion(i);var r=f.parentNode;a.setStyle(r,"display","block");a.setXY(r,[o[0],o[1]]);a.setStyle(r,"width",(o.right-o.left)+"px");a.setStyle(r,"height",(o.bottom-o.top)+"px");if(g.useIFrame){var q=r.nextSibling;a.setStyle(q,"width",(o.right-o.left)+"px");a.setStyle(q,"height",(o.bottom-o.top)+"px");a.setStyle(q,"display","block")}a.setStyle(f,"display","block");a.setStyle(f,"position","absolute");if(g.centerIndicator){a.setStyle(f,"top","50%");a.setStyle(f,"left","50%");f.style.marginTop=-(f.offsetHeight/2)+"px";f.style.marginLeft=-(f.offsetWidth/2)+"px"}}else{a.setStyle(f,"display","");if(p){a.setStyle(f,"position","absolute");a.setXY(f,p)}}};h.hide=function(){if(g.useShim){var p=f.parentNode;a.setStyle(f,"display","none");a.setStyle(p,"display","none");if(g.useIFrame){a.setStyle(f.parentNode.nextSibling,"display","none")}try{if(g.useIFrame){p.parentNode.removeChild(p.nextSibling)}p.parentNode.removeChild(p)}catch(o){}}else{a.setStyle(f,"display","none");try{f.parentNode.removeChild(f)}catch(o){}}};return h}};var TB=TB||{};TB.util=TB.util||{};TB.util.SecurityUtil=(function(){var b="0123456789ABCDEF";function a(f){var e=b.substr(f&15,1);while(f>15){f>>=4;e=b.substr(f&15,1)+e}return e}function c(d){return(d>=97&&d<=122)||(d>=65&&d<=90)||(d>=48&&d<=57)||d==32||d==44||d==46}return{version:"1.2",encodeHTML:function(g){if(!g){return g}var e="";for(var f=0,d=g.length;f<d;++f){var h=g.charCodeAt(f);if(c(h)){e+=g.charAt(f)}else{e+="&#"+h+";"}}return e},encodeJS:function(h){if(!h){return h}var e="",g;for(var f=0,d=h.length;f<d;++f){var l=h.charCodeAt(f);if(c(l)){e+=h.charAt(f)}else{if(l<=127){g=a(l);if(g.length<2){g="0"+g}e+="\\x"+g}else{g=a(l);while(g.length<4){g="0"+g}e+="\\u"+g}}}return e},secureURI:function(e){var d=e.toLowerCase();if(d.indexOf("http://")==0||d.indexOf("https://")==0||d.indexOf("/")==0||d.indexOf("./")==0){return e}return"./"+e}}})();TB.widget.SimplePopup=new function(){var b=YAHOO.util,d=b.Dom,l=b.Event,f=b.Lang;var h={position:"right",align:"top",autoFit:true,eventType:"mouse",delay:0.1,disableClick:true,width:200,height:200};var i=function(o){var p=l.getTarget(o);if(i._target==p){this.popup.style.display=="block"?this.hide():this.show()}else{this.show()}l.preventDefault(o);i._target=p};var a=function(p){clearTimeout(this._popupHideTimeId);var o=this;this._popupShowTimeId=setTimeout(function(){o.show()},this.config.delay*1000);if(this.config.disableClick&&!this.trigger.onclick){this.trigger.onclick=function(q){l.preventDefault(l.getEvent(q))}}};var g=function(o){clearTimeout(this._popupShowTimeId);var p=l.getRelatedTarget(o);if(this.popup!=p&&!d.isAncestor(this.popup,p)){this.delayHide()}l.preventDefault(o)};var e=function(q){var r=this.currentHandle?this.currentHandle:this;if(this._handles){for(var p=0,o=this._handles;p<o.length;++p){clearTimeout(o[p]._popupHideTimeId)}}else{clearTimeout(r._popupHideTimeId)}};var c=function(o){var p=this.currentHandle?this.currentHandle:this,q=l.getRelatedTarget(o);if(p.popup!=q&&!d.isAncestor(p.popup,q)){p.delayHide()}};this.decorate=function(q,o,r){if(f.isArray(q)||(f.isObject(q)&&q.length)){r.shareSinglePopup=true;var t={};t._handles=[];for(var s=0;s<q.length;s++){var u=this.decorate(q[s],o,r);u._beforeShow=function(){t.currentHandle=this;return true};t._handles[s]=u}if(r.eventType=="mouse"){l.on(o,"mouseover",e,t,true);l.on(o,"mouseout",c,t,true)}return t}q=d.get(q);o=d.get(o);if(!q||!o){return}r=f.merge(h,r||{});var w={};w._popupShowTimeId=null;w._popupHideTimeId=null;w._beforeShow=function(){return true};var p=new b.CustomEvent("onShow",w,false,b.CustomEvent.FLAT);if(r.onShow){p.subscribe(r.onShow)}var v=new b.CustomEvent("onHide",w,false,b.CustomEvent.FLAT);if(r.onHide){v.subscribe(r.onHide)}if(r.eventType=="mouse"){l.on(q,"mouseover",a,w,true);l.on(q,"mouseout",g,w,true);if(!r.shareSinglePopup){l.on(o,"mouseover",e,w,true);l.on(o,"mouseout",c,w,true)}}else{if(r.eventType=="click"){l.on(q,"click",i,w,true)}}f.augmentObject(w,{popup:o,trigger:q,config:r,show:function(){if(!this._beforeShow()){return}var F=d.getXY(this.trigger);if(f.isArray(this.config.offset)){F[0]+=parseInt(this.config.offset[0]);F[1]+=parseInt(this.config.offset[1])}var C=this.trigger.offsetWidth,y=this.trigger.offsetHeight,G=r.width,D=r.height,x=d.getViewportWidth(),E=d.getViewportHeight(),A=d.getDocumentScrollLeft(),I=d.getDocumentScrollTop(),z=F[0],H=F[1];if(r.position=="left"){z=F[0]-G;H=(r.align=="center")?(H-D/2+y/2):(r.align=="bottom")?(H+y-D):H}else{if(r.position=="right"){z=F[0]+C;H=(r.align=="center")?(H-D/2+y/2):(r.align=="bottom")?(H+y-D):H}else{if(r.position=="bottom"){H=H+y;z=(r.align=="center")?(z+C/2-G/2):(r.align=="right")?(z+C-G):z}else{if(r.position=="top"){H=H-D;z=(r.align=="center")?(z+C/2-G/2):(r.align=="right")?(z+C-G):z}}}}if(H<0){H=0}if(z<0){z=0}if(this.config.autoFit){if(H-I+D>E){H=E-D+I-2;if(H<0){H=0}}}this.popup.style.position="absolute";this.popup.style.top=H+"px";this.popup.style.left=z+"px";if(this.config.effect){if(this.config.effect=="fade"){d.setStyle(this.popup,"opacity",0);this.popup.style.display="block";var B=new b.Anim(this.popup,{opacity:{to:1}},0.4);B.animate()}}else{this.popup.style.display="block"}p.fire()},hide:function(){d.setStyle(this.popup,"display","none");v.fire()},delayHide:function(){var x=this;this._popupHideTimeId=setTimeout(function(){x.hide()},this.config.delay*1000)}},true);d.setStyle(o,"display","none");return w}};TB.widget.SimpleTab=new function(){var e=YAHOO.util,b=e.Dom,a=e.Event,d=e.Lang;var c={eventType:"click",currentClass:"Current",tabClass:"",tabPanelClass:"",autoSwitchToFirst:true,stopEvent:true,delay:0.1};this.decorate=function(f,i){f=b.get(f);i=d.merge(c,i||{});var q={},h,r,g,o,t;h=b.getFirstChild(f);g=h.getElementsByTagName("li");if(i.tabClass){o=b.getElementsByClassName(i.tabClass,"*",f)}else{o=Array.copy(h.getElementsByTagName("a"))}if(i.tabPanelClass){r=b.getElementsByClassName(i.tabPanelClass,"*",f)}else{r=b.getChildren(f).slice(1)}var u=new e.CustomEvent("onSwitch",null,false,e.CustomEvent.FLAT);if(i.onSwitch){u.subscribe(i.onSwitch)}var p=function(w){if(t){s()}var v=o.indexOf(this);q.switchTab(v);if(i.stopEvent){try{a.preventDefault(w)}catch(x){}}return !i.stopEvent};var l=function(v){var w=this;t=setTimeout(function(){p.call(w,v)},i.delay*1000);if(i.stopEvent){a.preventDefault(v)}return !i.stopEvent};var s=function(){clearTimeout(t)};if(i.eventType=="mouse"){a.on(o,"focus",p);a.on(o,"mouseover",i.delay?l:p);a.on(o,"mouseout",s)}a.on(o,"click",p);d.augmentObject(q,{switchTab:function(v){b.setStyle(r,"display","none");b.removeClass(g,i.currentClass);b.addClass(g[v],i.currentClass);b.setStyle(r[v],"display","block");u.fire(v)},subscribeOnSwitch:function(v){u.subscribe(v)}},true);q.onSwitch=q.subscribeOnSwitch;b.setStyle(r,"display","none");if(i.autoSwitchToFirst){q.switchTab(0)}return q}};TB.form.CheckboxGroup=new function(){var h=YAHOO.util,b=h.Dom,a=h.Event,e=h.Lang;var d={checkAllBox:"CheckAll",checkAllBoxClass:"tb:chack-all",checkOnInit:true};var g=function(p,l){return p.checked};var c=function(p,l){if(p.type&&p.type.toLowerCase()=="checkbox"){p.checked=true}};var f=function(p,l){if(p.type&&p.type.toLowerCase()=="checkbox"){p.checked=false}};this.attach=function(r,l){l=e.merge(d,l||{});var q={};var o=new h.CustomEvent("onCheck",q,false,h.CustomEvent.FLAT);var p=[];if(r){if(r.length){p=Array.copy(r)}else{p[0]=r}}var s=[];if(l.checkAllBoxClass){s=b.getElementsByClassName(l.checkAllBoxClass,null,p[0].form)}if(b.get(l.checkAllBox)){s.push(b.get(l.checkAllBox))}var i=function(){var v=p.filter(g);if(p.length==0){s.forEach(f)}else{s.forEach((v.length==p.length)?c:f)}q._checkedBoxCount=v.length};var t=function(v){var w=a.getTarget(v);i();o.fire(w);return true};e.augmentObject(q,{_checkedBoxCount:0,onCheck:function(v){o.subscribe(v)},isCheckAll:function(){return this._checkedBoxCount==p.length},isCheckNone:function(){return this._checkedBoxCount==0},isCheckSome:function(){return this._checkedBoxCount!=0},isCheckSingle:function(){return this._checkedBoxCount==1},isCheckMulti:function(){return this._checkedBoxCount>1},toggleCheckAll:function(){var v=p.every(g);p.forEach(v?f:c);if(p.length==0){s.forEach(f)}else{s.forEach(v?f:c)}q._checkedBoxCount=(v)?0:p.length;p.forEach(function(w){o.fire(w)})},toggleChecked:function(v){v.checked=!v.checked;i();o.fire(v)},getCheckedBoxes:function(){return p.filter(g)}});a.on(p,"click",t);if(l.onCheck&&e.isFunction(l.onCheck)){o.subscribe(l.onCheck,q,true)}if(s.length>0){a.on(s,"click",q.toggleCheckAll)}if(l.checkOnInit){i();var u=function(){p.forEach(function(v){o.fire(v)})};setTimeout(u,10)}return q}};TB.form.TagAssistor=new function(){var g=YAHOO.util,c=g.Dom,a=g.Event,e=g.Lang;var d={separator:" ",selectedClass:"Selected"};var b=function(i,h){return i.indexOf(e.trim(h.innerHTML))!=-1};var f=function(h,i){var l=h.value.replace(/\s+/g," ").trim();if(l.length>0){return l.split(i)}else{return[]}};this.attach=function(i,l,o){i=c.get(i);l=c.get(l);o=e.merge(d,o||{});var p=Array.copy(l.getElementsByTagName("a"));var r=function(t){var s=f(i,o.separator);var u=a.getTarget(t);if(b(s,u)){s.remove(e.trim(u.innerHTML))}else{s.push(e.trim(u.innerHTML))}h(s);i.value=s.join(o.separator)};var h=function(s){p.forEach(function(u,t){if(b(s,u)){c.addClass(u,o.selectedClass)}else{c.removeClass(u,o.selectedClass)}})};var q={};q.init=function(){var s=f(i,o.separator);p.forEach(function(u,t){if(b(s,u)){c.addClass(u,o.selectedClass)}a.on(u,"click",r)});a.on(i,"keyup",function(u){var t=f(i,o.separator);h(t)})};q.init()}};TB.namespace("ww");(function(){if(TB.ww&&TB.ww.lightAll){return}var e=YAHOO.util,c=e.Dom,w=e.Event,i=e.Lang;var q="J_WangWangScript";var v=/tbww_v2(\.source)?\.js(\??[^#]*)/;var s="http://web2.im.alisoft.com";var h="http://amos.im.alisoft.com";var f="http://webwwtb.im.alisoft.com";var l="http://a.tbcdn.cn";var p=h+"/muliuserstatus.aw?beginnum=0&site=cntaobao&charset=utf-8&uids=";var r=h+"/online.aw?v=2&site=cntaobao&charset=utf-8&uid=";var o=s+"/GetData/GetTribeInfoByKeywords?site=cntaobao&v=2";var d=s+"/GetData/GetTribeInfoByUid?site=cntaobao&v=2";var b=l+"/sys/wangwang/website.js?t=20090319.js";var t="chrome://wangwangapi/content/api.js";window.online=[];window.tracenick=window.tracenick||"";window.clearWW=function(){var x=c.get("webWWFrame");if(x){x.parentNode.removeChild(x)}};var a="\u70b9\u6b64\u53ef\u4ee5\u76f4\u63a5\u548c\u5356\u5bb6\n\u4ea4\u6d41\u9009\u597d\u7684\u5b9d\u8d1d\uff0c\u6216\n\u76f8\u4e92\u4ea4\u6d41\u7f51\u8d2d\u4f53\u9a8c\uff0c\n\u8fd8\u652f\u6301\u8bed\u97f3\u89c6\u9891\u5662\u3002";var g=100;var u={};u.installed=false;u.version="";u._onStatusDataLoadEvent=new e.CustomEvent("statusDataLoad",u,false,e.CustomEvent.FLAT);u.light=function(y,x){var z=u.getParamsFromData(y);y.appendChild(u._buildWWLink(z,x))};u.lightByIcon=function(x,z){var C=u.getParamsFromData(x);var B=r+encodeURIComponent(C.nick);B+="&s="+((C.icon&&C.icon.toLowerCase()=="small")?2:1);if(C&&C.nick){var y='<img src="'+B+'" border="0" />';var A=u._buildWWLink(C);A.innerHTML=y;x.innerHTML="";x.appendChild(A)}};u.getParamsFromData=function(x){var y={};if(c.hasClass(x,"J_WangWang")){y.nick=x.getAttribute("data-nick");if(x.getAttribute("data-item")){y.item=x.getAttribute("data-item")}y.display=x.getAttribute("data-display");y.icon=x.getAttribute("data-icon");if(!y.tnick){y.tnick=y.nick}y.enableClick=x.getAttribute("data-click")==="false"?false:true}else{if(c.hasClass(x,"ww:token")){y=x.getAttribute("ww:params").toQueryParams()}}i.augmentObject(y,u._scriptParams,false);return y};u._buildWWLink=function(A,B){var E=A.icon?A.icon.toLowerCase():"large";var C=A.display?A.display.toLowerCase():"block";var x=A.nick||"";var G=A.tnick||"";var F=A.item||window._item||"";var z=A.oid||"";var D=document.createElement("a");D.href="javascript: void(0);";D.setAttribute("target","_blank");if(B==1){c.addClass(D,"sns-icon icon-online")}else{if(B==4||B==5){c.addClass(D,"ww-mobile")}else{if(B==0||B==2||B==3||B==6){c.addClass(D,"ww-offline")}}}if(typeof B!="undefined"){}if(A.enableClick===false){YAHOO.util.Dom.setStyle(D,"cursor","default");D.onclick=function(){return false}}else{if(u.installed){if(window.onlinewangWangSend){D.onclick=function(){var H="nick="+x+"&uid_t="+G+"&status="+B+"&gid="+F+"&suid="+window.tracenick+"&portalid=taojianghu";if(z){H+="&oid="+z}onlinewangWangSend("cntaobao",window.tracenick,"cntaobao",x,B,H);return false}}else{if(YAHOO.env.ua.gecko){var y;if(u.installed&1){y="aliim:sendmsg?portalid=taojianghu&touid=cntaobao"+x+"&uid="+window.tracenick+"&gid="+F}else{if(u.installed&2){y="wangwang:SendIM?uid="+x+"&uid_t="+G+"&suid="+window.tracenick+"&gid="+F}else{if(u.installed&4){y="alitalk:SendIM?uid="+x+"&AliLoginID="+window.tracenick+"&gid="+F}}}D.target="_self";w.on(D,"click",function(H){window.location=y;w.preventDefault(H)})}}}else{D.target="_blank";D.href=f+"/wangwang/ww1.htm?t="+new Date().getTime()+"&uid="+escape(window.tracenick)+"&tid="+escape(x);if(YAHOO.env.ua.gecko){D.onclick=function(H){H.target.target="_blank";return true}}else{if(YAHOO.env.ua.ie){D.href="http://www.taobao.com/wangwang/";D.target="_blank"}else{D.onclick=function(H){window.open(D.href,"","width=0,height=0,left=0,top=0,location=yes,menubar=yes,toolbar=yes,status=yes,resizable=yes,scrollbars=yes");return false}}}}}return D};u.login=function(y){if(i.isString(y)&&y.trim().length>1&&u.installed){try{var z="wangwang:login?suid="+y+"&autologin=1&auto=1";var x=window.frames.aliwangwangSendmsgShowFrame;if(!x){x=document.createElement("iframe");document.body.appendChild(x);iframe.setAttribute("target","_blank");iframe.setAttribute("src",z)}else{x.location=z}}catch(A){}}};u.talk=function(x,y){y=y||{};if(i.isString(x)&&x.trim().length>1&&u.installed){var z="nick="+x+"&suid="+window.tracenick;for(k in y){z+="&"+k+"="+y[k]}onlinewangWangSend("cntaobao",window.tracenick,"cntaobao",x,y.status||1,z)}};u.loadTribes=function(x){var z="";if(x.keywords){z=o+"&keywords="+x.keywords}else{if(x.uid){z=d+"&uid="+x.uid+"&type="+x.type}else{return}}if(x.count){z+="&count="+x.count}var y=c.generateId(null,"tribe");window["display_"+y]=function(){x.callback(window[y+"Obj"])};z+="&name="+y;var A=(document.charset||document.characterSet).toLowerCase();e.Get.script(z,{onSuccess:function(){},varName:y+"Obj",charset:A})};u.buildTribeLink=function(A,z){var x=z;if(z.length>9){x=z.substr(0,7)+"..."}var B="http://www2.im.alisoft.com/webim/tribe/tribe_detail.htm?userId=cntaobao&tribeId="+A;var y="window.open('"+B+"', '_blank', 'height=400, width=500, top=60, left=150, toolbar=no, menubar=no, scrollbars=yes, resizable=no,location=no, status=no'); return false;";return'<a href="#" onclick="'+y+'" target="_blank" title="'+z+'">'+x+"</a>"};u._statusMap={};u.lightAll=function(I,M){if(M){this._scriptParams=i.merge(this._scriptParams,M)}var J=c.getElementsByClassName("ww:token","span",c.get(I));var L=c.getElementsByClassName("J_WangWang","span",c.get(I));J=J.concat(L);L=c.getElementsByClassName("J_WangWang","i",c.get(I));J=J.concat(L);J=Array.filter(J,function(S){return !S.getAttribute("data-wwlight")});if(J.length==0){return}var E=[],R,Q;for(var N=0;N<J.length;N++){Q=u.getParamsFromData(J[N]);R=Q.nick||"";J[N].setAttribute("ww:nick",R);J[N].setAttribute("data-wwlight","lighted");E.push(R)}var C=function(U){var V=U.data.nicks,T=U.data.tokens;for(var S=0;S<V.length;S++){u._statusMap[V[S]]=window.online[S]}u._onStatusDataLoadEvent.fire(T);if(u.doAfterStatusDataLoad){u.doAfterStatusDataLoad(window.online||[])}window.online.length=0;if(U.data.next){U.data.next()}};var D=function(T,V,U){var S=p;S+=encodeURIComponent(T.join(";"));e.Get.script(S,{onSuccess:C,varName:"online",data:{tokens:V,nicks:T,next:U},charset:"utf-8"})};var y=2000;var x=[];var z=[];var G="",F=0,H=0;for(var K=0,O=E.length;K<O;++K){if(A(G+E[K])||K>g-1||K==O-1){var B=(K==O-1)?O:K;x[H]=E.slice(F,B);z[H]=J.slice(F,B);G="";F=K;H++}G+=E[K]+";"}P(0);function P(S){D(x[S],z[S],function(){H--;if(H){P(S+1)}})}function A(S){if(YAHOO.env.ua.ie){return encodeURIComponent(S).length>y}return false}};u._autoLight=function(){u.lightAll(document.body)};u._init=function(){if(YAHOO.env.ua.ie){e.Get.script(b,{onSuccess:function(){try{if(-1!=checkIMVersionNoMsg("cntaobao")){u.installed=true}}catch(B){}}})}else{if(YAHOO.env.ua.gecko){e.Get.script(t,{onSuccess:function(){try{u.installed=0;if("undefined"!==typeof AliIM&&Object===AliIM.constructor){u.installed+=1}if("undefined"!==typeof WangWang&&Object===WangWang.constructor){u.installed+=2}if("undefined"!==typeof AliTalk&&Object===AliTalk.constructor){u.installed+=4}}catch(B){}}})}}var x;try{x=document.createElement('<iframe name="aliwangwangSendmsgShowFrame" frameborder="0" src="javascript:false">')}catch(A){x=document.createElement("iframe");x.setAttribute("frameBorder","0");x.name="aliwangwangSendmsgShowFrame";x.src="about:blank"}x.id="aliwangwangSendmsgShowFrame";x.className="hidden";x.style.width=x.style.height=0;c.setStyle(x,"display","none");try{c.insertBefore(x,document.body.firstChild)}catch(A){w.on(window,"load",function(){document.body.appendChild(x)})}var y=function(){var K,B,N="",L;try{L=c.get(q)}catch(M){}var F=L?[L]:document.getElementsByTagName("script");for(var J=0,C=F.length;J<C;++J){B=F[J].getAttribute("src");if(B&&(K=B.match(v))!=null){N=K.length>2?K[2].slice(1):""}}var E={},I=N.split("&"),H;for(var G=0,D=I.length;G<D;++G){if(!I[G]){continue}H=I[G].split("=");E[H[0]]=H[1]}return E};var z=y();if(z.auto!="false"){w.onDOMReady(u._autoLight)}u._scriptParams=z;u._onStatusDataLoadEvent.subscribe(function(C){for(var B=0;B<C.length;B++){u.light(C[B],u._statusMap[C[B].getAttribute("ww:nick")]);C[B].removeAttribute("ww:nick")}})};u._init();TB.ww=u})();if(typeof SNS==="undefined"||!SNS){SNS=function(b){var a=SNS;if(!(this instanceof a)){return new a(b)}else{return a._setup(b)}}}(function(a){var b=YAHOO.lang,c=YAHOO.util.Get;b.augmentObject(a,{base:"http://a.tbcdn.cn/app/sns/",mods:{},add:function(d,f,e){this.mods[d]={name:d,fn:f,details:e||{}};return this},config:null,_setup:function(d){d.debug=("debug" in d)?d.debug:false;this.config=d;return this},use:function(){var h=this,e=arguments,g=e[0],f=e[1],d=function(){h._loadModules();if(g){g(h)}};if(f&&!h[app][f]){c.script(h.base+f+".js",{onEnd:function(){d()}})}else{d()}},_attached:{},_loadModules:function(){var g=this.mods,f=this._attached,e,d;for(e in g){d=g[e];if(!f[e]&&d){f[e]=d;if(d.fn){d.fn(this)}}}},namespace:function(){var e=arguments,l=null,g,f,h;for(g=0;g<e.length;g=g+1){h=(""+e[g]).split(".");l=this;for(f=(h[0]=="SNS")?1:0;f<h.length;f=f+1){l[h[f]]=l[h[f]]||{};l=l[h[f]]}}return l},log:function(g,d){var h=this.config,e;if(h&&h.debug){if(typeof console!="undefined"&&!window.opera){e=(d&&console[d])?d:"log";console[e](g)}else{alert(d+":"+m)}}return this}});a.namespace("sys","app","widget")})(SNS);if("undefined"!=TB.bom.pickDocumentDomain){TB.bom.pickDocumentDomain=function(){var e=arguments[1]||location.hostname.toString();var d=e.split("."),b=d.length;var c=arguments[0]||2,c=c>b?b:c;for(var g=0,a=[],f;g<c;g++){if("undefined"!=typeof d[b-g-1]){a[c-g-1]=d[b-g-1]}}return a.join(".")}}SNS.add("sys.Helper",function(f){f.namespace("sys.Helper");var a=YAHOO.util.Dom,t=YAHOO.util.Event,h=YAHOO.lang,i=YAHOO.util.Connect,e=YAHOO.util.Get,q=document;var g=SNS.sys.Helper;var d={apiLightww:"http://amos.im.alisoft.com/mullidstatus.aw",apiToken:"comment:/json/token.htm"};var s={portal:"http://jianghu.{serverHost}",assets:"http://assets.{cdnHost}/app/sns",app:"http://app.jianghu.{serverHost}",comment:"http://comment.jianghu.{serverHost}",poke:"http://poke.jianghu.{serverHost}",share:"http://share.jianghu.{serverHost}",blog:"http://blog.jianghu.{serverHost}",checkCode:"http://comment.jianghu.{serverHost}/json/get_comment_check_code.htm"};var o=function(w,u){u=u||location.hostname;w=w||2;var v=u.split("."),p=[];while(v.length>0&&w>0){p.unshift(v.pop());w--}return p.join(".")};var l=location.hostname,r="taobao.com",c="taobaocdn.com";if(o(3)==="daily.taobao.net"){r="daily.taobao.net";c="daily.taobao.net"}else{if(o(2)==="taobao.com"){r="taobao.com";c="taobaocdn.com"}}for(var b in s){if(typeof s[b]==="string"){s[b]=TB.common.formatMessage(s[b],{serverHost:r,cdnHost:c})}}s.serverHost=r;s.cdnHost=c;setToken=function(u){var v=u||"",x=v.split("="),w=a.get("Jianghu_tb_token"),p;if(!w){w=q.createElement("div");w.id="Jianghu_tb_token";w.innerHTML='<input type="hidden" />';q.body.appendChild(w)}if(v&&x.length===2){p=a.getFirstChild(w);p.name=x[0];p.value=x[1]}};h.augmentObject(g,{pickDocumentDomain:o,buildURI:function(){var p=Array.prototype.slice.call(arguments);if(p.length<2){return p[0]||""}var u=p.shift();u+=u.indexOf("?")>0?"&":"?";return u+p.join("&").replace(/&+/g,"&")},addStamp:function(p){return g.buildURI(p,"t="+new Date().getTime())},regApiServer:function(u,p){h.augmentObject(s,u,!!p)},getApiURI:function(z,u,w){if(!(z.substr(0,7)==="http://"||z.substr(0,8)==="https://")&&z.indexOf(":")>0){var B=z.indexOf(":");var v=s[z.substr(0,z.indexOf(":"))]||"";if(v!==""){z=v+z.substr(B+1)}}if(!u){z=g.addStamp(z)}if(!w){var p=a.get("Jianghu_tb_token");if(p){var A=p.getElementsByTagName("INPUT");for(var x=0;x<A.length;x++){z=g.buildURI(z,[A[x].name,encodeURIComponent(A[x].value)].join("="))}}}var y=TB.common.formatMessage(z,{serverHost:r,cdnHost:c});return y},getServerURI:function(p){return s[p]},getAssetsURI:function(u,p){return g.getApiURI("assets:"+u,p===undefined?true:p)},getCheckCodeURI:function(p,u){var v=new SNS.sys.BasicDataSource({url:g.getServerURI("checkCode")});v.jsonp(u,p)},getParmsByAttr:function(x){var v={};for(var u=0;u<x.attributes.length;u++){var p=x.attributes[u].nodeName;var w=x.attributes[u].nodeValue;if(p.substring(0,5)=="data-"){v[p.substring(5)]=w}}return v},loadFromServer:(function(){var p=function(u){u.innerHTML="<img src='http://img06.taobaocdn.com/tps/i6/T13l0vXhRrXXXXXXXX-24-24.gif' alt='loading ...' /><br /><br />"};return function(u,v,y,A,w){u=a.get(u);if(!u){return null}if(w&&w=="after"){var z=document.createElement("p");u.removeChild(a.getLastChild(u));u.appendChild(z);p(z)}else{p(u)}var x=i.asyncRequest(y?"POST":"GET",v,{success:function(B){var C=B?B.responseText:"";if(w&&w=="after"){u.removeChild(a.getLastChild(u));u.innerHTML+=C}else{u.innerHTML=C}A&&A()}},y||"");return x}})(),addModuleSupport:(function(){var u=function(){this._names=[];this._stroe={}};h.augmentObject(u.prototype,{_names:[],_store:{},add:function(v,w){if(v&&w){this[v]=w;this._names.push(v);this._store[v]=w}},get:function(v){return this._store[v]||null},initAll:function(y){var A=this._names,w=this._store,x,v;for(var z=0;z<A.length;++z){x=A[z];if(w[x]&&w[x].init){v=y[x]||y[x.substr(0,1).toLowerCase()+x.substr(1)]||y[x.toLowerCase()]||null;v&&w[x].init(v,y)}}}});var p=function(y,x,w,v){return function(){if(x.apply(y,arguments)!==false){v.apply(w,arguments)}}};return function(w){var v=new u();w.Modules=v;if(w.init){w.init=p(w,w.init,v,v.initAll)}return v}})(),createCallback:(function(){var p=new Date().getTime();return function(v){var u="json"+p++;window[u]=v;return u}})(),lightww:function(p){var u,y=[],w;if(h.isString(d)){p={container:p}}h.augmentObject(p,{tagName:"A",className:"wwlamp",online:'<img src="http://image.alicdn.com/space/static/icon/icon_ww.gif" border="0" align="absbottom" style="cursor:hand">',propUID:"data-uid"});container=a.get(p.container);if(!container){return}if(h.isArray(container)){u=[];a.batch(container,function(z){if(z&&z.tagName===p.tagName&&a.hasClass(z,p.className)){u[u.length]=z}})}else{u=a.getElementsByClassName(p.className||"wwlamp",p.tagName||"a",container);u=Array.prototype.slice.call(u)}var x=p.propUID,v;if(h.isFunction(x)){for(v=0;v<u.length;++v){y[v]=x(u[v])}}else{for(v=0;v<u.length;++v){y[v]=encodeURIComponent(u[v].getAttribute(x)||"")}}w="uids="+y.join(";");window.online=[];e.script(g.buildURI(d.apiLightww,"beginnum=0",w),{onSuccess:(function(z){var A=z;return function(){var C=window.online;for(var B=0;B<A.length;++B){if(C[B]===1){A[B].innerHTML=p.online}}}})(u),varName:"online"})},fixHover:(function(){if(!YAHOO.env.ua.ie||YAHOO.env.ua.ie!=6){return function(){}}return function(w){if(w===undefined){return}var u=w.container,v=w.tagName,z=w.hoverClass,C=w.itemClass,B=w.elements,A=w.checkPopuped,y=w.onMouseEnter,D=w.onMouseLeave;if(!B&&h.isString(u)&&v){u=a.get(u);B=u.getElementsByTagName(v)}else{if(!B){B=[]}}var p=function(E){a.addClass(t.getTarget(E),z);y&&y(E)};var x=function(E){if(A===true&&t.getTarget(E).getAttribute("popuped")){return}a.removeClass(t.getTarget(E),z);D&&D(E)};a.batch(B,function(E){if(C&&!a.hasClass(E,C)){return}t.on(E,"mouseenter",p);t.on(E,"mouseleave",x)})}})(),insertText:function(w,y){w=a.get(w);var v=w.value;w.focus();if(typeof document.selection!=="undefined"){var u=document.selection.createRange();u.text=y;u.setEndPoint("StartToEnd",u);u.select()}else{var x=w.selectionStart,p=w.selectionEnd;w.value=v.substr(0,x)+y+v.substr(x);w.selectionStart=x+y.length;w.selectionEnd=w.selectionStart;w.setSelectionRange&&w.setSelectionRange(w.selectionEnd,w.selectionEnd)}},doReflow:(YAHOO.env.ua.ie>0&&YAHOO.env.ua.ie<8)?function(p){p=p||document.body;var u="fix-ie-layout-problem-hack";a.addClass(p,u);a.removeClass(p,u)}:function(){},addMaxLenSupport:(function(){var v=function(x){return parseInt(x.getAttribute("maxlength")||"0",10)};var u=function(A){var y=t.getTarget(A),z=y.value,x=v(y);if(x>0&&z.length>x){y.value=z.substr(0,x)}};var w=function(z){var y=t.getTarget(z),x=v(y);if(y.value.length===x){t.preventDefault(z)}};var p=function(B){var z=t.getTarget(B),y=t.getCharCode(B),x=v(z);if(x<1||y===8||y===46||B.ctrlKey||B.altKey){return}var A=z.value;if(A.length>=x){t.preventDefault(B)}};return function(x){t.on(x,"keydown",p);t.on(x,"keyup",u);t.on(x,"change",u);t.on(x,"blur",u);t.on(x,"paste",w)}})(),checkLogin:function(){var u=function(x){var w=document.cookie.match("(?:^|;)\\s*"+x+"=([^;]*)");return(w&&w[1])?decodeURIComponent(w[1]):""};var p=u("_nk_");var v=u("_l_g_")&&p;return !!v},checkDaren:function(){return Boolean(a.get("J_darenStyle"))},checkAndShowLogin:function(x){if(this.checkLogin()){return true}x=x||{};var A=null;if(x.callback){A=x.callback}else{if(x.autoCallback&&arguments.callee.caller){try{var p=arguments.callee.caller,z=p.arguments||[],B=x.callbackScope||{},u=[],v;for(var w=0;w<z.length;++w){v=z[w];if(h.isObject(v)&&v.srcElement){v=h.merge({},v)}u.push(v)}A=p?function(){try{p&&p.apply(B,u)}catch(C){}}:null}catch(y){A=null}}}if(window.UserCheck&&window.UserCheck.init){window.UserCheck.init({width:448,height:235,isLogin:true,callback:A})}else{location.href=g.buildURI(g.getApiURI("portal:/admin/login.htm"),"redirect_url="+encodeURIComponent(location.href))}return false},setToken:function(){YAHOO.util.Get.script(g.buildURI(g.getApiURI("comment:/json/token.htm"),"callback=SNS.app.Modules.get('Feeds').getToken"),{charset:"gbk"})},showMessage:function(u){var p=SNS.sys.snsDialog({content:u,cancelBtn:false});return p},showConfirm:function(p,u){return SNS.sys.snsDialog({content:p,confirmBtn:u})},cutStr:function(v,p){if(p&&p>0){var u=v.replace(/[^\x00-\xFF]/g,"\xFF\xFF");if(u.length>p){v=v.substr(0,p-(u.substr(0,p).match(/[\xFF]/g)||[]).length/2);v+="..."}}return v},fixCursorPosition:(function(){var u=function(y){var z,v;var w=document.selection.createRange(),x;if(w.parentElement().id==y.id){x=document.body.createTextRange();x.moveToElementText(y);for(z=0;x.compareEndPoints("StartToStart",w)<0;z++){x.moveStart("character",1)}x=document.body.createTextRange();x.moveToElementText(y);for(v=0;x.compareEndPoints("StartToEnd",w)<0;v++){x.moveStart("character",1)}}return[z,v]};var p=YAHOO.env.ua.ie>0?function(v){v=a.get(v);if(v.getAttribute("data-cursorfixed")){return}v.setAttribute("data-cursorfixed","true");(function(x){var w=null;t.on(x,"beforedeactivate",function(){w=u(x);x.setAttribute("data-lastcursor",w.join(","))})})(v)}:function(){};return p})(),recoverCursorPos:YAHOO.env.ua.ie>0?function(w){var p=w.getAttribute("data-lastcursor");if(!p){return}if(w.value===""){p="0,0"}p=p.split(",");w.focus();var u=document.selection.createRange(),v;if(u.parentElement().id==w.id){v=document.body.createTextRange();v.moveToElementText(w);u.setEndPoint("StartToStart",v);u.setEndPoint("EndToStart",u);u.moveStart("character",p[0]*1);u.moveEnd("character",p[1]*1-p[0]*1);u.select()}}:function(){},fixTextAreaFocus:(YAHOO.env.ua.ie===6||YAHOO.env.ua.ie===7)?function(u){var p=function(w){var v=t.getTarget(w);t.removeListener(v,"click",arguments.callee);setTimeout(function(){var x=document.body.createTextRange();x.moveToElementText(v);x.select();v.focus();v.select();g.recoverCursorPos(v)},0)};g.fixTextAreaFocus=function(v){t.on(v,"click",p)};return g.fixTextAreaFocus(u)}:function(){},setToken:function(p){setToken(p)},getToken:function(){if(isRelogin){e.script(g.buildURI(g.getApiURI(d.apiToken),"callback=SNS.sys.Helper.setToken"),{charset:"gbk"})}}});TB.namespace("widget").SimplePopupPlus={decorate:function(){var w=TB.widget.SimplePopupPlus;var B=document.createElement("DIV");a.setStyle(B,"position",YAHOO.env.ua.ie==6?"absolute":"fixed");a.setStyle(B,"width","100%");a.setStyle(B,"height","100%");a.setStyle(B,"top","0");a.setStyle(B,"left","0");a.setStyle(B,"display","none");a.setStyle(B,"z-index","8900");a.setStyle(B,"opacity","0");a.setStyle(B,"background-color","white");a.setStyle(B,"display","none");document.body.appendChild(B);var z=new YAHOO.util.CustomEvent("onClickMask");t.on(B,"click",function(C){z.fire(C)});var u=function(D,E){var C=t.getTarget(E);if(a.isAncestor(this.popup,C)){return}if(z.subscribers.length<2){this.hide()}};var p=null;var A=function(F){var E=t.getTarget(F),C=t.getCharCode(F);if(C!==9||(a.isAncestor(p,E)&&!F.shiftKey)){return}t.stopEvent(F);if(!F.shiftKey){try{var D=p.getElementsByTagName("A")[0];D&&D.focus()}catch(F){}}};var y=function(C){p=C;t.on(document,"keydown",A)};var v=function(){p=null;t.removeListener(document,"keydown",A)};var x=function(E){if(!E.config.autoFit){return}var F=a.getViewportWidth(),D=a.getViewportHeight(),H=a.getDocumentScrollTop(),G=a.getRegion(E.popup),C=E.config.height||G.height;if(G.right>F){a.setStyle(E.popup,"left",G.left-(G.right-F)+"px")}if(G.top+C>H+D){a.setStyle(E.popup,"top",G.top-(H+D-G.top-C))}if(G.top<H){a.setStyle(E.popup,"top",H+"px")}};w.decorate=function(E,C,H){if(YAHOO.env.ua.ie===6){var G="TODO"}h.augmentObject(H,{onClickMask:u});var F=H.onHide,D=H.onShow;H.onShow=function(){var L=document.documentElement;var K=this;setTimeout(function(){x(K)},0);y(this.popup);z.subscribe(this.config.onClickMask,this,true);D&&D.apply(this,arguments);a.setStyle(B,"display","block");a.setStyle(B,"width",L.scrollWidth+"px");a.setStyle(B,"height",L.scrollHeight+"px")};H.onHide=function(){v();z.unsubscribe(this.config.onClickMask,this);F&&F.apply(this,arguments);if(z.subscribers.length<1){a.setStyle(B,"display","none")}};var J=TB.widget.SimplePopup;var I=J.decorate.apply(J,arguments);I.mask=B;a.setStyle(I.popup,"z-index","8901");return I};return w.decorate.apply(w,arguments)}}});(function(){function b(f){if(f instanceof Function){f=f()}var e=function(){var c=(this.initialize)?this.initialize.apply(this,arguments):this;return c};b._build(e,f);var a=e.prototype.parent;a=a?a:Object;e.constructor=b;e.prototype.constructor=e;return e}b.mixin=function(e,a){if(e){for(var f in (a||{})){if(a[f]!=null){e[f]=a[f]}}return e}};b.mixinFun=function(g,a,h){var f=function(c){g(c);a(c)};return function(){f.apply(h,arguments)}};b.clone=function(i){var a;switch(typeof(i)){case"object":a={};for(var g in i){a[g]=b.clone(i[g])}break;case"array":a=[];for(var h=0,l=i.length;h<l;h++){a[h]=b.clone(i[h])}break;default:return i}return a};b._build=function(a,p,i){if(typeof(p)=="object"){for(var h in p){b._build(a,h,p[h])}return a}var l=b.inheritance[p];if(l){i=l.call(a,i);if(i==null){return a}}var o=a.prototype;switch(typeof(i)){case"object":o[p]=b.clone(i);break;case"function":i._name=p;o[p]=i;break;case"array":o[p]=b.clone(i);break;default:o[p]=i;break}};b.inheritance={extend:function(a){this.parent=a;var d=function(){};d.prototype=a.prototype;this.prototype=new d();this.prototype.parent=function(){this._sope=arguments.callee._owner;var c=this._sope.parent.prototype[arguments.callee.caller._name];if(!c){throw new Error('The method "'+method+'" has no parent.')}this._sope=arguments.callee._owner;return c.apply(this,arguments)};this.prototype.parent._owner=this},implement:function(a){var g=[];if(typeof(a)=="array"){g=a}else{g.push(a)}for(var h=0;h<g.length;h++){var f=g[h];if(typeof(f)=="function"){g[h]=new f()}b.mixin(this.prototype,g[h])}},statics:function(a){b.mixin(this,a)}};SNS.sys.Class=b})();(function(){var a={compose:function(c,d){var s,l,b,o=[];for(var r in c){var q=c[r];switch(r){case"ref":b=q;break;case">>":o=q;break;default:s=r;l=q;break}}if(!s){return}var p=c[s].nodeName?c[s]:document.createElement(s);if(b){this[b]=p}a.setAttr(p,l,d);if(o){if(typeof o=="string"){p.innerHTML=o}else{for(var g=0;g<o.length;g++){var h=o[g].num||1;for(var f=0;f<h;f++){var e=arguments.callee.call(this,o[g]);if(e){p.appendChild(e)}}}}}return p},setAttr:function(g,b,d){var c=d?d:0;for(var f in b){var e=b[f];switch(f){case"style":a.setStyle(g,e);break;case"className":g.className=e;break;default:g.setAttribute?g.setAttribute(f,e):g[f]=e;break}}},setStyle:function(d,b){for(var c in b){d.style[c]=b[c]}}};SNS.sys.JsonHtml=a})();(function(){var c=SNS.sys.Class,h=SNS.sys.JsonHtml,g=YAHOO.util.Dom,p=YAHOO.util.Event;var o=new c({initialize:function(r,q){this.config={width:"350px",height:"",className:"panel",zIndex:999,top:"0px",left:"0px",offsetTop:0,offsetLeft:0,opacity:0,state:"hide",iframeShim:true,alphaShim:false,hideHandle:true,blurHide:false,container:document.body,unit:"px",onShow:function(){},onHide:function(){},onRemove:function(){}};this.build(r,q)},build:function(r,q){this.modifyConfig(q);this.createHtml(r);this.place();this.attach();this.matchCoor(this.iframeShim,this.container);this.matchCoor(this.alphaShim,this.container);if(this.config.state=="hide"){this.container.style.display="none"}},modifyConfig:function(q){c.mixin(this.config,q)},htmlConfig:function(s,u){var t={},r={},q={};if(this.config.iframeShim){t={iframe:{className:"iframeShim",frameborder:0,style:u.iframeShim},ref:"iframeShim"}}if(this.config.alphaShim){r={div:{className:"alphaShim",style:u.alphaShim},ref:"alphaShim"}}if(this.config.hideHandle){q={span:{className:"hide-handle sns-icon icon-del-nob",style:u.hide},ref:"hideHandle"}}return{div:{className:this.config.className,style:u.container},ref:"container",">>":[t,r,{div:{className:"panel-main-content",style:u.mainContent},ref:"mainContent",">>":[{div:{className:"panel-content",style:u.content},ref:"content",">>":s},q]}]}},styleConfig:function(){var q={container:{top:this.config.top,left:this.config.left,position:"absolute",zIndex:this.config.zIndex,width:this.config.width,height:this.config.height},mainContent:{position:"relative",zIndex:15}};if(this.config.alphaShim){q.alphaShim={position:"absolute",top:"0px",left:"0px",zIndex:5,opacity:this.config.opacity,filter:"alpha(opacity="+this.config.opacity*100+")",backgroundColor:"#000"}}if(this.config.iframeShim){q.iframeShim={position:"absolute",top:"0px",left:"0px",zIndex:4,opacity:0,filter:"alpha(opacity=0)"}}if(this.config.hideHandle){q.hide={display:"block",width:"10px",height:"10px",position:"absolute",top:"15px",right:"15px",cursor:"pointer",zIndex:20}}return q},createHtml:function(s){var r=this;if(s.nodeType){this.container=this;return}var q=this.htmlConfig(s,this.styleConfig());document.body.insertBefore(h.compose.call(this,q),document.body.childNodes[0]);if(this.config.documentShim){this.documentShim=new SNS.sys.DocumentShim({opacity:this.config.opacity})}},matchCoor:function(r,q){var s=this.container.style.display;this.container.style.display="block";if(r){r.style.height=q.offsetHeight+"px"}if(r){r.style.width=q.offsetWidth+"px"}this.container.style.display=s},place:function(){this.container.style.top=parseInt(this.config.top)+parseInt(this.config.offsetTop)+this.config.unit;this.container.style.left=parseInt(this.config.left)+parseInt(this.config.offsetLeft)+this.config.unit;return this},attach:function(){if(this.config.hideHandle){p.on(this.hideHandle,"click",this.hide,this,true)}if(this.config.blurHide){p.on(this.mainContent,"click",function(){this.eventPassBy=true},this,this);p.on(document,"click",function(){if(!this.eventPassBy){this.hide()}this.eventPassBy=null},this,this)}},show:function(){this.config.state="show";this.container.style.display="block";if(this.config.documentShim){this.documentShim.show()}this.config.onShow.apply(this,arguments);if(this.onShow){this.onShow.apply(this,arguments)}},hide:function(){this.config.state="hide";this.container.style.display="none";if(this.config.documentShim){this.documentShim.hide()}this.config.onHide.apply(this,arguments);if(this.onHide){this.onHide.apply(this,arguments)}},remove:function(){this.container.parentNode.removeChild(this.container);if(this.config.documentShim){this.documentShim.remove()}this.config.onRemove.apply(this,arguments)},addEvent:function(u,q,t,r){var v=g.getElementsByClassName(u,q,this.container);for(var s=0;s<v.length;s++){p.addListener(v[s],t,r,v[s],this)}}});var f=new c({extend:o,initialize:function(r,q){this.parent(r,q)},modifyConfig:function(q){this.config.opacity=0;this.config.alphaShim=true;this.config.hideHandle=true;this.config.state="show";this.parent(q)},styleConfig:function(){var q=this.parent();q.container={width:"100%",height:"100%",position:"fixed",top:"0px",left:"0px",zIndex:this.config.zIndex};c.mixin(q.mainContent,{margin:"auto",width:this.config.width});return q},createHtml:function(s){this.parent(s);var q=this;if(6==YAHOO.env.ua.ie){this.container.style.position="absolute";var r=function(u){var v=document.documentElement.scrollTop||document.body.scrollTop;var t=document.documentElement.scrollHeight||document.body.scrollHeight;g.setStyle(q.container,"width",(document.documentElement.clientWidth||document.body.clientWidth)+"px");g.setStyle(q.container,"height",g.getViewportHeight()+"px");g.setStyle(q.container,"top",v+"px");g.setStyle(q.container,"zoom","1");g.setStyle(q.container,"zoom","")};r();p.on(window,"scroll",r,this,true);p.on(window,"resize",r,this,true)}this.mainContent.style.top=(this.container.offsetHeight-this.mainContent.offsetHeight)/2+"px"},place:function(){}});var i=new c({extend:o,initialize:function(s,r,q){this.el=s;this.parent(r,q)},modifyConfig:function(q){this.config.coordinate=[3,4];this.config.hideHandle=false;this.config.blurHide=true;this.config.showHandle=true;this.parent(q)},place:function(){var q=this.getCoordinate(this.el);this.container.style.left=q.x+parseInt(this.config.offsetLeft)+this.config.unit;this.container.style.top=q.y+parseInt(this.config.offsetTop)+this.config.unit;return this},getCoordinate:function(){var r=this.config.coordinate;var z=this.getPointPosition(this.el,r[0]);this.container.style.display="block";var t=this.container.offsetHeight,s=this.container.offsetWidth;this.container.style.display="none";var u=[[0,-t],[-s,-t],[-s,0],[0,0]];var v=z.y+u[r[1]-1][1];var q=z.x+u[r[1]-1][0];return{x:q,y:v}},getPointPosition:function(r,q){var s=g.getXY(r);s={x:s[0],y:s[1]};switch(q){case 1:s.x+=r.offsetWidth;break;case 2:break;case 3:s.y+=r.offsetHeight;break;case 4:s.y+=r.offsetHeight;s.x+=r.offsetWidth;break}return s},attach:function(){this.parent();if(this.config.showHandle){p.on(this.el,"click",function(){this.show();this.eventPassBy=true},this,true)}}});var e=function(s,r){var s='<div class="sns-panel-wrap"></div><div class="sns-panel"><div class="sns-panel-content">'+s+"</div></div>";var q=new o(s,r);var t=g.getElementsByClassName("sns-panel-wrap","div",q.content)[0];q.matchCoor(t,q.mainContent);return q};var d=function(u,s,r){var s='<div class="sns-panel-wrap"></div><div class="sns-panel"><div class="sns-panel-content">'+s+"</div></div>";var q=new i(u,s,r);var t=g.getElementsByClassName("sns-panel-wrap","div",q.content)[0];q.matchCoor(t,q.mainContent);return q};var l=function(s,r){var s='<div class="sns-panel-wrap"></div><div class="sns-panel"><div class="sns-panel-content">'+s+"</div></div>";var q=new f(s,r);var t=g.getElementsByClassName("sns-panel-wrap","div",q.content)[0];q.matchCoor(t,q.mainContent);return q};var b=function(u){var t={title:"\u5c0f\u63d0\u793a",content:"dialog",hideHandle:true,width:"350px",confirmBtn:function(){this.hide()},cancelBtn:function(){this.hide()}};SNS.sys.Class.mixin(t,u);var q='<div class="buttons">';if(t.confirmBtn){q+='<button class="confirm"><span>\u786e\u5b9a</span></button>'}if(t.cancelBtn){q+='<button class="cancel"><span>\u53d6\u6d88</span></button>'}q+="</div>";var s='<div class="hd"><h3>'+t.title+'</h3></div><div class="bd">'+t.content+'</div><div class="ft">'+q+'</div><a href="#" title="\u5173\u95ed\u6b64\u7a97\u53e3" class="btn-close"></a></div>';var r=SNS.sys.snsCenterPanel(s,t);if(t.confirmBtn){r.addEvent("confirm","button","click",t.confirmBtn)}if(t.cancelBtn){r.addEvent("cancel","button","click",t.cancelBtn)}return r};var a=new c({initialize:function(q){this.config={opacity:0,zIndex:998};c.mixin(this.config,q);this.build()},build:function(){var q=g.getDocumentWidth()+"px";var t=g.getDocumentHeight()+"px";this.mask=document.createElement("div");this.maskIframe=document.createElement("iframe");this.mask.className="document-shim";this.maskIframe.className="document-shim";var s=this.mask.style;var r=this.maskIframe.style;var u={top:"0",left:"0",position:"absolute",zIndex:this.config.zIndex,width:q,height:t,overflow:"hidden",backgroundColor:"#000",opacity:this.config.opacity,filter:"alpha(opacity="+this.config.opacity*100+")"};c.mixin(s,u);c.mixin(r,u);document.body.insertBefore(this.mask,document.body.childNodes[0]);document.body.insertBefore(this.maskIframe,document.body.childNodes[0]);this.mask.style.display="none";this.maskIframe.style.display="none"},show:function(){this.mask.style.display="block";this.maskIframe.style.display="block"},hide:function(){this.mask.style.display="none";this.maskIframe.style.display="none"},remove:function(){this.mask.parentNode.removeChild(this.mask);this.maskIframe.parentNode.removeChild(this.maskIframe)}});SNS.sys.Panel=o;SNS.sys.CenterPanel=f;SNS.sys.NearbyPanel=i;SNS.sys.snsPanel=e;SNS.sys.snsCenterPanel=l;SNS.sys.snsNearbyPanel=d;SNS.sys.snsDialog=b;SNS.sys.DocumentShim=a})();SNS.add("sys.Popup",function(b){var a=YAHOO.util.Event,c=YAHOO.util.Dom,f=YAHOO.lang;var e=function(o,l){var i=Array.prototype.slice.call(arguments);if(typeof o=="function"){return o.apply(l||this,i.slice(2))}};var h='<div class="sns-popup-mask"></div><div class="sns-popup"><div class="hd"><h3>{title}</h3></div><div class="bd"><span class="icon"></span>{content}</div><div class="ft"><div class="buttons"></div><a href="#" title="\u5173\u95ed\u6b64\u7a97\u53e3" class="btn-close">x</a></div></div>';var d={title:"",type:"",content:"",useAnim:false,autoShow:true,width:350,hideMask:false,focus:0,buttons:[{text:"\u786e\u5b9a",func:function(){this.hide()}}]};var g=function(i,l){this.context=l||document.body;this.config=f.merge(d,i||{});this.init()};g.prototype={init:function(){var l=document.createElement("div"),r=this.config;c.setStyle(l,"display","none");if(YAHOO.lang.isString(r.content)){l.innerHTML=TB.common.formatMessage(h,r)}else{l.innerHTML=TB.common.formatMessage(h,f.merge(r,{content:""}));(c.getElementsByClassName("bd","div",l)[0]).appendChild(r.content)}if(r.hideMask){c.addClass(l,"sns-popup-hidemask")}c.addClass(l,"sns-popup-wrapper");var o=c.getElementsByClassName("sns-popup","div",l)[0];if(r.width){c.setStyle(o,"width",r.width+"px")}if(r.type){c.addClass(o,r.type)}var A=c.getElementsByClassName("buttons","div",o)[0],t=0,y=r.buttons,v=y.length;if(v){for(;t<v;t++){var q=document.createElement("button");q.innerHTML="<span>"+y[t].text+"</span>";a.on(q,"click",y[t].func,this,true);A.appendChild(q)}}else{c.setStyle(A,"display","none")}var p=c.getElementsByClassName("btn-close","a",o)[0];if(p){a.on(p,"click",function(i){a.stopEvent(i);this.hide()},this,true)}a.on(document,"keypress",function(i){if(27==a.getCharCode(i)){this.hide()}},this,true);if(6==YAHOO.env.ua.ie||r.iframeShim){var z=document.documentElement;c.setStyle(l,"position","absolute");c.setStyle(l,"z-index","999999");c.setStyle(l,"top","0px");var s=document.createElement("iframe");s.setAttribute("frameborder","0");s.setAttribute("scrolling","no");s.src="about:blank";s.style.cssText="filter:alpha(opacity=0); position:absolute; top: 0px; left: 0px; z-index: -1;";c.setStyle(s,"width",(z.clientWidth||document.body.clientWidth)-20+"px");c.setStyle(s,"height",(z.clientHeight||document.body.clientHeight)+"px");c.setStyle(l,"height",(z.clientHeight||document.body.clientHeight)+"px");l.appendChild(s);var x=c.getElementsByClassName("sns-popup-mask","div",l)[0],w;var u=function(B){var i=function(){if(x){c.setStyle(x,"width",c.getViewportWidth()+"px");c.setStyle(x,"height",c.getViewportHeight()+"px")}var D=z.scrollTop||document.body.scrollTop;var C=z.scrollHeight||document.body.scrollHeight;if(D+(z.clientHeight||document.body.clientHeight)>C){return}c.setStyle(l,"top",D+"px");c.setStyle(l,"zoom","1.2");c.setStyle(l,"zoom","")};if(w){w.cancel()}w=YAHOO.lang.later(10,null,i,null,false)};a.on(window,"scroll",u,this,true);a.on(window,"resize",u,this,true);u()}this.context.appendChild(l);this.wrapper=l;this.popup=o;if(r.autoShow){this.show()}},show:function(){var i=this.config;if(i.onShow){e(i.onShow,this)}c.setStyle(this.wrapper,"display","");if(i.useAnim){c.setStyle(this.popup,"opacity","0");this.anim=new YAHOO.util.Anim(this.popup,{opacity:{to:1}},0.5);this.anim.animate()}YAHOO.lang.later(20,this,function(){try{(this.popup.getElementsByTagName("button")[i.focus]).focus()}catch(l){}},null,false)},hide:function(){var i=this.config;if(i.useAnim&&this.animate){this.animate.stop()}c.setStyle(this.wrapper,"display","none");if(i.onHide){e(i.onHide,this)}}};b.sys.Popup=g});SNS.add("dataSourceManager",function(){var a=SNS.sys.Class;var b=new a({initialize:function(d){this.config={url:null,parms:{},success:function(){},failure:function(){},callBackContext:this,iframeProxy:"http://comment.jianghu.daily.taobao.net/proxy.htm"};a.mixin(this.config,d)},getParms:function(d){var e=this.config.parms;a.mixin(e,d);a.mixin(e,{ran:Math.random()});var f="";for(var g in e){if(e[g]!=null){f+=g+"="+encodeURIComponent(e[g])+"&"}}if(f.length>0){f=f.substring(0,f.length-1)}return f},buildUrl:function(d,e){d+=d.indexOf("?")>0?"&":"?";return d+e},json:function(h,g,f){var d=this;var l={success:function(q){try{var o=YAHOO.lang.JSON.parse(q.responseText)}catch(p){throw new Error("Invalid response data")}d.config.success.call(this.callBackContext,o);if(g){g.call(this.callBackContext,o)}},failure:function(o){d.config.failure.call(this,o);if(f){f.call(this.callBackContext,o)}}};var e=this.getParms(h);YAHOO.util.Connect.initHeader("Accept","application/json");YAHOO.util.Connect.initHeader("X-Request","JSON");var i=YAHOO.util.Connect.asyncRequest("POST",this.config.url,l,e);return i},jsonp:function(f,i){var e=null;var o=null;var g=SNS.sys._JSONP_counter;SNS.sys._JSONP_counter++;var d=this;SNS.sys._JSONP_request_map["request_"+g]=function(p){if(o){window.clearTimeout(o);o=null}if(e&&e.parentNode){e.parentNode.removeChild(e)}d.config.success.apply(d.config.callBackContext,arguments);if(i){i.apply(d.config.callBackContext,arguments)}};var h=this.getParms(f);var l=this.buildUrl(this.config.url,h+"&callback=SNS.sys._JSONP_request_map.request_"+g);e=document.createElement("script");document.body.insertBefore(e,document.body.firstChild);window.setTimeout(function(){e.setAttribute("type","text/javascript");e.src=l},1);o=this._timeOut(e);return e},iframeProxy:function(q,l){var e=null;var r=function(){var u=window.location.hostname.toString();var v=u.split(".");var p=v.length;if(p>2){return v[p-2]+"."+v[p-1]}return u};document.domain=r();var o=SNS.sys._IFRAME_PROXY_counter;SNS.sys._IFRAME_PROXY_counter++;var t=this;var h=document.getElementsByName("SNS.sys._IFRAME_PROXY")[0];if(!h){throw new Error(" Invalid iframe proxy")}var f=document.createElement("form");SNS.sys._IFRAME_PROXY_request_map["request_"+o]=function(p){if(e){window.clearTimeout(e);e=null}t.config.success.apply(t.config.callBackContext,arguments);if(l){l.apply(t.config.callBackContext,arguments)}if(f){f.parentNode.removeChild(f)}};var g=this.buildUrl(this.config.url,"callback=SNS.sys._IFRAME_PROXY_request_map.request_"+o);h.setAttribute("src",this.config.iframeProxy);f.setAttribute("method","POST");f.setAttribute("action",g);f.setAttribute("target","SNS.sys._IFRAME_PROXY");for(var d in q){var i=document.createElement("input");i.setAttribute("type","hidden");i.setAttribute("name",d);i.setAttribute("value",q[d]);f.appendChild(i)}document.body.insertBefore(f,document.body.firstChild);if(h.YAHOO&&h.YAHOO.util.Connect){var s=h.YAHOO.util.Connect.asyncRequest("POST",this.config.url,l,q);return s}f.submit();e=this._timeOut(f)},_timeOut:function(d,e,h){var f=e?e:5000;var g=window.setTimeout(function(){d.parentNode.removeChild(d);if(h){h()}},f);return g}});SNS.sys._IFRAME_PROXY_counter=0;SNS.sys._IFRAME_PROXY_request_map={};SNS.sys._JSONP_counter=0;SNS.sys._JSONP_request_map={};var c=new a({registerDataSource:function(e,d,f){if(d.url){this.dataSource=this.dataSource?this.dataSource:{};SNS.sys.Class.mixin(d,{callBackContext:f});this.dataSource[e]=new b(d)}},getDataSource:function(d){this.dataSource=this.dataSource?this.dataSource:{};return this.dataSource[d]}});SNS.sys.BasicDataSource=b;SNS.sys.DataSourceManager=c});SNS.add("moduleLoader",function(){var g=YAHOO.util,d=g.Dom,a=g.Event,e=YAHOO.lang,c=SNS.sys.Helper;var b=function(i){var h={url:"",parms:{},mapping:{}};this.config=YAHOO.lang.merge(h,i||{});this.request()};b.prototype={request:function(){var h=this;if(typeof(this.config.mapping)=="function"){this.config.mapping=this.config.mapping()}for(var l in this.config.mapping){var i=YAHOO.util.Dom.get(this.config.mapping[l]);if(!i||!this.config.url){return}break}new SNS.sys.BasicDataSource({url:c.getApiURI(this.config.url),parms:this.config.parms,success:function(o){if(h.config.beforeCallback){h.config.afterCallback(h.config,o)}h.match(o);window.setTimeout(function(){if(h.config.afterCallback){h.config.afterCallback(h.config,o)}},1)}}).jsonp()},match:function(l){for(var o in this.config.mapping){var i=YAHOO.util.Dom.get(this.config.mapping[o]);if(i){var h;if(!l){return}if(typeof(l)=="string"){h=l}else{h=l[o]}if(this.config.callback){h=this.config.callback(i,h,l)}if(YAHOO.lang.trim(h)!=""){i.innerHTML=h}}}}};var f=function(i){var h={modules:{banner:{url:"http://jianghu.{serverHost}/admin/json/banner_json.htm?code=1",afterCallback:this._setBanner},share:{url:"http://share.jianghu.{serverHost}/share/ta_left_share.htm",mapping:{html:"J_share"},afterCallback:this._checkHtml},gift:{url:"http://gift.jianghu.{serverHost}/gift/gift_list_for_center.htm",mapping:{html:"J_gift"},afterCallback:this._checkHtml},apps:{url:"http://jianghu.{serverHost}/admin/json/userNavigate.htm",mapping:{html:"J_apps"},afterCallback:this._appsHover},action:{url:"http://jianghu.{serverHost}/admin/json/user_avatar.htm",mapping:{html:"J_action"},afterCallback:this._actionAfterCallback},userinfo:{url:"http://jianghu.{serverHost}/admin/json/user_profile_json.htm",mapping:this._userInfoMapping,callback:this._userInfoCallback,afterCallback:this._userInfoAfterCallback},sign:{url:"http://jiwai.jianghu.{serverHost}/jiwai/lastJiwai.htm",mapping:{html:"J_sign"},callback:function(l,p,o){return'<span class="bubble-box"><i class="lt"></i> <i class="rt"></i> <span class="words">'+o+'</span> <i class="lb"></i> <i class="rb"></i></span>'}},impression:{url:"http://impress.jianghu.{serverHost}/impress/center_impress.htm",mapping:{html:"J_impression"}},album:{url:"http://photo.jianghu.{serverHost}/view/latestPictures.htm",mapping:{html:"J_album"}},darentools:{url:"http://jianghu.{serverHost}/admin/json/starJson.htm",mapping:{html:"J_darentools"},afterCallback:this._checkHtml},blog:{url:"http://blog.jianghu.{serverHost}/blog/blog_portal.htm",mapping:{printHtml:"J_blogCtx"},afterCallback:this._loadBlog},darenIntro:{url:"http://jianghu.{serverHost}/admin/json/daRenInfo.htm",mapping:{html:"J_darenIntro"},afterCallback:this._loadDarenIntro}},parms:{}};this.config=YAHOO.lang.merge(h,i||{})};f.prototype={_appsHover:function(l,q){if(YAHOO.env.ua.ie==6){var h=d.get(l.mapping.html);if(h){var p=h.getElementsByTagName("li");for(var o=0;o<p.length;o++){a.on(p[o],"mouseover",function(r,i){d.addClass(i,"hover")},p[o],true);a.on(p[o],"mouseout",function(r,i){d.removeClass(i,"hover")},p[o],true)}}}},_checkHtml:function(i,l){var h=d.get(i.mapping.html);if(h&&YAHOO.lang.trim(h.innerHTML)==""){d.setStyle(h,"display","none")}},_loadDarenIntro:function(l,r){var l={cityId:"J_introCity",contId:"J_introXinZ"};var h="---",p,q;p=d.get(l.contId);if(p){var q=d.getAttribute(p,"data-value");if(!q){return}var i=new Date(q),o=[i.getMonth()+1,i.getDate()];p.innerHTML=SNS.sys.getZodiac(parseInt(o[0],10),parseInt(o[1],10))+"\u5ea7";d.addClass(p,SNS.sys.getZodiacClassName(parseInt(o[1],10),parseInt(o[2],10)))}h="---";p=d.get(l.cityId);if(p){var q=d.getAttribute(p,"data-value");if(!q){return}if(q){YAHOO.util.Get.script("http://a.tbcdn.cn/app/sns/sys/js/sns-districtSelector.js",{onSuccess:function(){p.innerHTML=SNS.sys.getCityNameByCode(q,"|").split("|").pop()},charset:"gbk",timeout:1000})}}},_loadBlog:function(h,p){if(null!=p&&p.status=="1"&&p.blogCount>0){var o=d.get("blogImgTitle");if(o){var q=o.getElementsByTagName("img");for(var l=0;l<q.length;l++){q[l].onload=function(){if(this.width>500){this.width=500;this.style.width="500px";this.style.height="auto"}}}}}},_setBanner:function(o,p){var r=d.get("hd");if(!r){r=document.createElement("div")}if(p.isDaRen=="false"&&!SNS.sys.Helper.checkDaren()){if(p.spacePic!=""){d.setAttribute(r,"id","hd");var s="";var i=/^(font-size:)?([0-9]{2}px)?(;)*(color:)?(#[0-9a-fA-F]{6})?(;)*$/;if(i.exec(p.spaceTitleStyle)){s=p.spaceTitleStyle}r.innerHTML='<div class="title" style='+s+">"+p.spaceTitle+"</div>";var h="taobaocdn.com";if(window.location.href.indexOf("taobao.net")>0){h="taobaocdn.net"}var q="http://img0"+p.spacePic.charAt(1)+"."+h+"/sns_logo/"+p.spacePic;var l="background: url("+q+")";switch(p.spacePicStyle){case"1":l+=" 0 0 repeat;";break;case"2":l+=" center center no-repeat;";break;default:l+=" 0 0 repeat;"}r.style.cssText=l;d.setStyle("content","padding-top","0px");d.insertBefore(r,d.get("bd"))}else{if(r){d.setStyle(r,"display","none")}}}else{if(!SNS.sys.Helper.checkDaren()){if(r){d.setStyle(r,"display","none")}}else{r.innerHTML='<a href="http://daren.taobao.com"></a>'}}},_userInfoMapping:function(){var i=d.get("J_userInfo");if(!i){return}var o=d.getElementsByClassName("name","p",i)[0],p=d.getElementsByClassName("desc","p",i)[0],l=d.getElementsByClassName("honor","p",i)[0],h=d.getElementsByClassName("num-visit","span",i)[0];return{nick:o,gender:p,buyerRate:l,visitNumber:h}},_userInfoCallback:function(s,r,t){switch(s.className){case"name":var o="",l="",h="";if(t.isDaRen){if(!t.realName){l=t.nick}var u=document.createElement("p");u.className="daren-icon";for(var q=0;q<t.typeIco.length;q++){u.innerHTML+='<a href="'+t.iconLink[q]+'" target="_blank"><img src="'+t.typeIco[q]+'"/></a>'}d.insertBefore(u,s);o='<a class="follow-num" href="'+t.fansLink+'">'+t.followerNumber+"\u4f4d\u7c89\u4e1d</a>"}if(!t.isDaRen){if(!t.realName){l=t.nick}else{l="&nbsp("+t.nick+")"}h='<i data-display="inline" data-tnick="'+t.nick+'" data-nick="'+t.nick+'" class="J_WangWang" ></i>'}return t.realName+l+h+o;break;case"desc":return"";break;case"honor":if(!t.isDaRen){return"\u4e70\u5bb6\u4fe1\u7528:"+t.buyerRate}else{return""}break;case"num-visit":if(!t.isDaRen){return"\u5df2\u7ecf\u6709"+t.visitNumber+"\u4eba\u6765\u770b\u8fc7"}else{return""}break}},_userInfoAfterCallback:function(h,p){if(!h.mapping){return}var q=d.get(h.mapping.gender);var o='{baseInfo}{homeCity}{favouriteStr}&nbsp;&nbsp;<a href="{moreLink}" class="view-more">\u8be6\u7ec6</a>';if(!p.isDaRen){var r=[];r.push(p.gender);if(p.birthday){var l=p.birthday.split("-");r.push(l[1]+"\u6708"+l[2]+"\u65e5");p.constell=SNS.sys.getZodiac(parseInt(l[1],10),parseInt(l[2],10));r.push(p.constell+"\u5ea7")}p.baseInfo=r.join("&nbsp;");p.favouriteStr=e.trim(p.favourite)===""?"":("&nbsp;\u7231\u597d:"+p.favourite);p.favouriteStr=p.favouriteStr?p.favouriteStr:"";if(p.homeCity){if(false&&"object"==typeof TB.form.DistrictSelector._tb_ds_data){p.homeCity="&nbsp;"+SNS.sys.getCityNameByCode(p.homeArea)}else{YAHOO.util.Get.script("http://a.tbcdn.cn/app/sns/sys/js/sns-districtSelector.js",{onSuccess:function(){p.homeCity="&nbsp;"+SNS.sys.getCityNameByCode(p.homeCity,"|").split("|").pop();q.innerHTML=TB.common.formatMessage(o,p)},charset:"gbk",timeout:1000})}}q.innerHTML=TB.common.formatMessage(o,p);if(!p.baseInfo&&!p.homeCity&&!p.favouriteStr){var i=d.getElementsByClassName("view-more","*",q);d.setStyle(i,"display","none")}}if(TB.ww){TB.ww.lightAll()}},_actionAfterCallback:function(p,r){var s=d.getElementsByClassName("act","ul",d.get(p.mapping.html))[0];var u=d.get("J_actionEdit");if(u){var h=d.getAttribute(u,"data-show");if(h=="true"){d.setStyle(u,"display","block")}else{var v=d.get("J_action");a.on(v,"mouseout",function(){d.setStyle(u,"display","none")});a.on(v,"mouseover",function(){d.setStyle(u,"display","block")})}}if(!s){return}var o=d.getAttribute(s,"data_touserid"),i=d.getAttribute(s,"data_tousernick"),l=d.getAttribute(s,"data_tousername"),q=d.getAttribute(s,"data_fromuserid"),t=d.getAttribute(s,"data_fromusernick");if(d.get("J_addfriend")){a.on("J_addfriend","click",function(x){a.preventDefault(x);if(!c.checkAndShowLogin({autoCallback:true})){return}var w=d.get("J_addfriend");SNS.app.Modules.get("FriendsManage").showAddFriendDialog(0,o,i,{})})}if(d.get("J_touch")){a.on("J_touch","click",function(z){a.preventDefault(z);var y=d.get("J_touch"),x=SNS.app.Modules.get("Poke");y.blur();if(!c.checkAndShowLogin({autoCallback:true})){return}var w=x.showPokesDialog({sender:q,receiver:o,receiverName:i,onPoke:function(){w.hide();x.sendPoke.apply(x,arguments)},popupParams:{trigger:y,offset:[0,6]}})})}if(d.get("J_recommendDaren")){a.on("J_recommendDaren","click",function(w){if(!c.checkAndShowLogin({autoCallback:true})){return}SNS.use(function(){SNS.app.Daren.recommend({handle:d.get("J_recommendDaren"),parms:{starId:o,starName:l}})})})}if(d.get("J_follow")){a.on("J_follow","click",function(w){a.preventDefault(w);SNS.use(function(){SNS.app.Daren.followAndRecommend({parms:{starId:o,starName:l}})})})}if(d.get("J_recommend")){a.on("J_recommend","click",function(z){a.preventDefault(z);if(!c.checkAndShowLogin({autoCallback:true})){return}var x=d.get("J_recommend"),w=SNS.app.Modules.get("FriendsManage");var y=w.showRecommendDialog({toUserId:o,toUserNick:i,onRecommended:null,popupParams:{position:"bottom",align:"right",trigger:x,offset:[0,6],width:362}})})}},add:function(i,h){this.config.modules[i]=h},stop:function(h){if(this.config.modules[h]){this.config.modules[h].stop=true}},loadAll:function(l){var i=this;var o=YAHOO.lang.merge(i.config,l);for(var h in o.modules){o.modules[h].parms=YAHOO.lang.merge(o.parms,o.modules[h].parms||{});if(!o.modules[h].stop){i.load(h,o.modules[h])}}},load:function(l,i){var h=this;a.onDOMReady(function(){var o=i||{};if(h.config.modules[l]){o=YAHOO.lang.merge(h.config.modules[l],o)}o.parms=YAHOO.lang.merge(h.config.parms,o.parms||{});new b(o)})}};SNS.sys.ModuleLoader=new f()});SNS.add("Clipboard",function(b){var f=YAHOO.util,a=f.Event,c=f.Dom,d=YAHOO.lang;var e=function(h,g){this.el=c.get(h)};e.prototype={setText:function(i){try{if(window.clipboardData&&clipboardData.setData){clipboardData.setData("text",i)}else{if(this.el.createTextRange){var g=el.createTextRange();if(g){g.execCommand("Copy")}}}}catch(h){}},clip:function(g,h){if(YAHOO.env.ua.ie){this.setText(g);h()}else{SNS.sys.Helper.showMessage("\u7531\u4e8e\u6d4f\u89c8\u5668\u7684\u539f\u56e0\u7cfb\u7edf\u65e0\u6cd5\u6b63\u5e38\u590d\u5236\u94fe\u63a5\u3002\u8bf7\u70b9\u51fb\u6d4f\u89c8\u5668\u5730\u5740\u680f\u5e76\u6309Ctrl+C\uff0c\u5c06\u94fe\u63a5\u590d\u5236\u4e0b\u6765\u3002")}}};b.sys.Clipboard=new e()});(function(){var b=SNS.sys.Class,a=YAHOO.util.Event,d=YAHOO.util.Dom,c=SNS.sys.JsonHtml;var e=new b({initialize:function(g){this.options={width:"160px",height:"20px",state:"close",onOpen:function(){},onClose:function(){},className:"widget-select",headerClassName:"widget-select-header",bodyClassName:"widget-select-body",headerHtml:"",bodyHtml:""};b.mixin(this.options,g);b.mixin(this,this.options);delete this.options;this.style={container:{width:this.width,height:this.height,position:"relative",display:"inline-block",verticalAlign:"middle"},header:{width:this.width,height:this.height,overflow:"hidden"},body:{width:this.width,position:"absolute",left:"-1px",top:parseInt(this.height)+1+"px",display:this.state=="open"?"block":"none"}};this.eventPath={eventStation:[],passBy:function(h){this.eventStation.push(h)},length:function(){return this.eventStation.length},stop:function(){this.eventStation=[]}};if(this.interceptor){this.interceptor()}this.build()},build:function(){this.createHtml();this.attach()},createHtml:function(){var g={div:{className:this.className,style:this.style.container},ref:"container",">>":[{div:{className:this.headerClassName,style:this.style.header,innerHTML:this.headerHtml},ref:"header"},{div:{className:this.bodyClassName,style:this.style.body,innerHTML:this.bodyHtml},ref:"body"}]};c.compose.call(this,g)},attach:function(){a.addListener(this.header,"click",this.openWrap,this.header,this);a.addListener(this.body,"click",this.closeWrap,this.body,this);a.addListener(document,"click",this.domClose,this,this)},insert:function(g){document.getElementById(g).appendChild(this.container);return this},openWrap:function(g,h){this.eventPath.passBy(h);this.open(g)},closeWrap:function(g,h){this.eventPath.passBy(h);this.close(g)},open:function(g){this.state="open";this.body.style.display="block";this.onOpen.apply(this,arguments)},close:function(g){this.state="close";this.body.style.display="none";this.onClose.apply(this,arguments)},domClose:function(h){alert("domClose");var g=this.eventPath.length();alert("length"+g);this.eventPath.stop();if(this.state=="close"||g>0){return}this.close(h)}});var f=new b({extend:e,initialize:function(g){this.dataList=[{url:"#url",value:"1"}];this.parent(g);var h=d.getElementsByClassName("item","a",this.body);this.tabs(h)},interceptor:function(){if(!this.headerHtml){this.headerHtml=this.dataList[0].value}this.bodyHtml=this.getItemHtml(this.dataList)},tabs:function(l){var g=this;for(var h=0;h<l.length;h++){l[h].index=h;l[h].onclick=function(){g.header.innerHTML=g.dataList[this.index].value}}},getItemHtml:function(l){var h="";h+="<ul>";for(var g=0;g<l.length;g++){var o=l[g];h+="<li>";h+='<a class="item" href="'+o.url+'">'+o.value+"</a>";h+="</li>"}h+="</ul>";return h}});SNS.sys.BasicSelect=e;SNS.sys.Select=f})();SNS.add("Popup",function(c){var b=SNS.sys.Helper.getAssetsURI("/img/constellation/");var d=(function(){var f="\u6469\u7faf\u6c34\u74f6\u53cc\u9c7c\u7261\u7f8a\u91d1\u725b\u53cc\u5b50\u5de8\u87f9\u72ee\u5b50\u5904\u5973\u5929\u79e4\u5929\u874e\u5c04\u624b\u6469\u7faf";var e=[20,19,21,21,21,22,23,23,23,23,22,22];return function(h,g){return'<img src="'+b+a(h,g)+'.png" style="vertical-align:middle" />'+f.substr(h*2-(g<e[h-1]?2:0),2)}})();var a=(function(){var f="mjspsymyjnyzjxszcntptxssmj";var e=[20,19,21,21,21,22,23,23,23,23,22,22];return function(h,g){return f.substr(h*2-(g<e[h-1]?2:0),2)}})();c.sys.getZodiac=d;c.sys.getZodiacClassName=a});SNS.add("getCityNameByCode",function(b){var a=function(d,c){try{if("object"!=typeof TB.form.DistrictSelector._tb_ds_data){return""}var g=TB.form.DistrictSelector._tb_ds_data[""+d],c=c||", ";if("undefined"!=g&&g[1]!="1"){return a(g[1],c)+c+g[0]}else{return g[0]}}catch(f){return""}};b.sys.getCityNameByCode=a});SNS.sys.countLetter=new function(){var d=YAHOO.util,c=d.Dom,b=d.Event,a={already:"J_AlreadyNum",leave:"J_LeaveNum",basicNum:0,num:500};this.decorate=function(f,h){var f=c.get(f),g,h=TB.applyIf(h||{},a),o=c.getAncestorByClassName(h.already,"sns-msg"),i=c.getAncestorByTagName(f,"form"),e=c.getAncestorByClassName(h.already,"attention");var l={checklength:function(){var p=f.value.length+h.basicNum;c.get(h.already).innerHTML=p;c.get(h.leave)&&(c.get(h.leave).innerHTML=h.num-p);c.setStyle(g,"display","none");c.setStyle(e,"display","block");if(p>h.num){l.error()}},error:function(){if(!o){return}if(!g){g=document.createElement("p");g.className="error";g.innerHTML="\u8f93\u5165\u7684\u5b57\u7b26\u8fc7\u957f\uff0c\u5fc5\u987b\u5728"+h.num+"\u4e2a\u5b57\u4ee5\u5185";o.appendChild(g)}else{c.setStyle(g,"display","block")}c.setStyle(e,"display","none")},formsubmit:function(q){var p=f.value.length;if(p>h.num){alert("\u8d85\u8fc7\u9650\u5b9a\u5b57\u6570\uff0c\u8bf7\u4fee\u6539\u3002");b.stopEvent(q)}}};if(f){b.on(f,"keyup",l.checklength);b.on(f,"mouseup",function(){setTimeout(l.checklength,50)});b.on(f,"blur",l.checklength);b.on(i,"submit",l.formsubmit)}return l}};SNS.add("commentBoard",function(f){var d=YAHOO.util,r=d.Dom,p=d.Event,A=d.Get,o=YAHOO.lang,h=document,G=SNS.sys.Helper,e="\u8bf4\u70b9\u4ec0\u4e48\u6765\u652f\u6301\u4e00\u4e0bTA\u5427",H=false;var z={postProxy:"comment:/proxy.htm",pageSize:10,apiGetList:"comment:/json/comment_list.htm",apiPostNew:"comment:/json/insert_comment.htm?action=comment%2FCommentAction&event_submit_do_insert_comment=true",apiDelete:"comment:/json/delete_comment.htm",apiFans:"comment:/json/comment_list_by_fans.htm",apiOwner:"comment:/json/comment_list_by_star.htm",apiToken:"comment:/json/token.htm",moreCommentUrl:"",hidePostBox:false},l='<form method="post" action="{apiPostNew}" class="reply-form" target="comment-post-proxy"><textarea name="content"></textarea><div class="smile"><span class="submit act skin-blue"><span class="num" id="J_AlreadyNum"><em>0</em>/<em>500</em></span><label><input type="checkbox" value="1" name="isWhisper">\u6084\u6084\u8bdd</label><span class="btn n-btn"><a class="post" href="#">\u5199\u597d\u4e86</a></span></span><a id="J_viewMoreSmile" href="json/face.php" class="more-smile">\u66f4\u591a\u8868\u60c5</a></div><input type="hidden" value="" name="typeId"><input type="hidden" value="" name="targetKey"><input type="hidden" value="" name="targetUrl"><input type="hidden" value="" name="targetTitle"><input type="hidden" value="" name="recUserId"><input type="hidden" value="" name="proUserId"><input type="hidden" value="" name="recCommentId"><input type="hidden" value="" name="replyToUserId"><input type="hidden" name="refer" /> <input type="hidden" name="commentId" /><span id="J_CheckCode" class="checkcode sns-nf hidden"><span>\u9a8c\u8bc1\u7801\uff1a</span><input name="TPL_checkcode" size="4" maxlength="4" class="f-txt" tabindex="3" style="width: 5em;" type="text"><img id="J_CheckCodeImg"  style="vertical-align: middle;" width="85" height="35"><span style="margin:0 10px 0 0;">(\u4e0d\u533a\u5206\u5927\u5c0f\u5199)</span><a href="#" class="newCheckCode">\u6362\u4e00\u5f20</a></span></form>',a=function(L,D){var E=D||z.apiGetList;A.script(G.buildURI(G.getApiURI(E),"targetKey="+encodeURIComponent(z.targetKey),"typeId="+encodeURIComponent(z.typeId),"pageSize="+encodeURIComponent(z.pageSize),"page="+encodeURIComponent(L||"1"),"hidePostBox="+(z.hidePostBox?true:false),"t="+new Date().getTime(),"callback=SNS.widget.commentBoard.onLoadComments"),{charset:"gbk"})},C=G.doReflow,g=function(){var D=z.elIframe;g=function(){var E=D.cloneNode(true);E.src=z.postProxy;D.parentNode.replaceChild(E,D);D=E}},i=function(E){if(E.indexOf("\uff1a")==-1){return E}else{var D=E.split("\uff1a");D.shift();return D.join("\uff1a")}},O=function(D){var T=D.innerHTML.trim(),aa,S=D.getElementsByTagName("img"),R=j=k=num=0,ab=TB.common.toArray(S),W=ab.length,Z=[],V=[],U=[],X,L="\u0449";if(W==0){T=aa=T.length>100?(T.substring(0,100)+"..."):T}else{for(;R<W;R++){var E=ab[R].getAttribute("data-face");Z.push(E);num+=E?E.length:0}aa=T.replace(/<img .[^>]+>/gi,L);X=aa.split(L);W=X.length;for(;k<W;k++){U.push(X[k]);V.push(X[k]);if(k!=W-1){U.push(J(ab[k]));V.push(Z[k])}}aa=V.join("");if(aa.length>100){aa=T="";while(V.length>0){if(aa.length>100||(aa.length+V[0].length)>100){break}aa+=V[0];T+=U[0];V.shift();U.shift()}T+="...";aa+="...";z.quoteNum=100+z.replyToUser.length}}z.quoteNum=aa.length+z.replyToUser.length;return[T,aa]},J=function(D){if(D.outerHTML){return D.outerHTML}else{var L=h.createElement("div"),E=D.cloneNode(true);L.appendChild(E);return L.innerHTML}},x=function(D){p.on(D,"click",function(V){var S=p.getTarget(V);if(!r.hasClass(S,"icon-comment")){return}p.preventDefault(V);var U=r.getAncestorByTagName(S,"LI"),T=r.getElementsByClassName("intro","p",U)[0],W=r.getElementsByClassName("name","a",U)[0],E=r.getChildren(U.getElementsByTagName("DD")[0])[1],R=W.innerHTML;var L=U.getAttribute("data-cid");z.elForm.elements.isWhisper.checked=r.getElementsByClassName("icon-modify-lock","SPAN",T).length>0;z.elForm.elements.recCommentId.value=L;z.replyToUser=R+"\uff1a";z.replyToUserId=U.getAttribute("data-uid");z.replyToContent=U.getAttribute("data-content");z.replyQuoteText=r.getElementsByClassName("words","p",U)[0];z.quoteWords=O(z.replyQuoteText);setTimeout(function(){z.elTextArea.focus();z.elTextArea.value="\u56de\u590d"+R+"\uff1a";z.elTextArea.focus();s("<strong>"+z.replyToUser+"</strong>\u201c"+z.quoteWords[0]+'<a href="#" class="clear">X</a>\u201d',U)},0);location.hash=z.elContainer.id;return})},t=function(D){p.on(D,"click",function(U){var R=p.getTarget(U),T=z.elTextArea,S=o.trim(T.value);p.preventDefault(U);if(!G.checkAndShowLogin({callback:function(){z.elTextArea.focus()}})){G.fixTextAreaFocus(z.elTextArea);G.fixTextAreaFocus(z.elForm.elements.TPL_checkcode);H=true;return}var L=z.replyToUser,W=z.replyToUserId,V=z.replyToContent,E={content:S,isWhisper:z.elForm.elements.isWhisper.checked,replyToUser:z.replyToUser,replyToUserId:z.replyToUserId,replyToContent:z.replyToContent};if(S===""||S==e){G.showMessage("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\u6216\u8005\u5168\u662f\u7a7a\u683c");return}if(L===S){G.showMessage("\u8bf7\u8f93\u5165\u56de\u590d\u5185\u5bb9");return}if(S.length>500){G.showMessage("\u5185\u5bb9\u8d85\u8fc7 500 \u4e2a\u5b57\uff0c\u8bf7\u9002\u5f53\u5220\u51cf\u4e00\u4e9b");return}if(L&&S.substr(0,L.length)===L){E.replyToUserId=W;E.replyToContent=V;E.content=S.substr(L.length);z.elForm.elements.replyToUserId.value=W}else{z.elForm.elements.recCommentId.value=""}if(H){Q()}else{z.elForm.submit()}z.elForm.elements.isWhisper.checked=false;N&&N.checklength();z.lastCommentData=E})},B=function(L){var E={doDelete:null};var D=function(){var R=new SNS.sys.Popup({title:"\u5c0f\u63d0\u793a",autoShow:false,hideMask:true,type:"error",content:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u6761"+(z.typeId===1?"\u7559\u8a00":"\u8bc4\u8bba")+"\u5417?",buttons:[{text:"\u786e\u5b9a",func:function(){this.hide();E.doDelete&&E.doDelete()}},{text:"\u53d6\u6d88",func:function(){this.hide()}}]});D=function(){return R};return D()};p.on(L,"click",function(U){var S=p.getTarget(U);if(!r.hasClass(S,"icon-del")){return}p.preventDefault(U);var T=r.getAncestorByTagName(S,"LI"),R=T.getAttribute("data-cid");if(!G.checkAndShowLogin({autoCallback:true})){G.fixTextAreaFocus(z.elTextArea);H=true;return}E.doDelete=function(){A.script(G.buildURI(G.getApiURI(z.apiDelete),"targetKey="+encodeURIComponent(z.targetKey),"typeId="+encodeURIComponent(z.typeId),"id="+encodeURIComponent(R),"callback=SNS.widget.commentBoard.onDeleteComment"),{charset:"gbk"})};D().show();return})},c=function(D){p.on(D,"click",function(L){var E=p.getTarget(L);if(r.hasClass(E,"clear")){p.preventDefault(L);r.setStyle(z.replyQuote,"display","none");z.quoteNum=0;z.elForm.refer.value="";return}})},s=function(E,L){var D=r.get("J_quoteWords");if(D){r.setStyle(D,"display","")}else{D=h.createElement("blockquote");D.id="J_quoteWords";r.insertBefore(D,z.elForm);z.replyQuote=D}D.innerHTML=E.replace(/(<br>)|\r|\n/gi," ");z.elForm.replyToUserId.value=z.replyToUserId;z.elForm.refer.value="[ref]"+z.replyToUser+"[/ref][quote]"+z.quoteWords[1].replace(/(<br>)|\r|\n/gi," ")+"[/quote]";z.elForm.commentId.value=L.getAttribute("data-cid")},P=function(S,E){var L,D,R;p.on(S,"click",function(T){p.preventDefault(T);if(this.getElementsByTagName("a").length>1){L=p.getTarget(T);if(L.tagName.toLowerCase()=="a"&&L.getAttribute("href")){D=L.href}}else{L=this.getElementsByTagName("a")[0];D=(L.getAttribute("href")||"")+""}if(D){R=parseInt(D.substr(D.lastIndexOf("page=")+5),10);a(R,E)}})},w=function(L){if(!L.elForm){return}var S=L.elForm,D=S.elements;for(var R=0;R<D.length;++R){var T=D[R],E=T.name;if(T&&E&&L[E]!==undefined){T.value=L[E]}}},K=function(E){var L=E||"",S=L.split("="),R=r.get("Jianghu_tb_token"),D;if(!R){R=h.createElement("div");R.id="Jianghu_tb_token";R.innerHTML='<input type="hidden" />';h.body.appendChild(R)}if(L&&S.length===2){D=r.getFirstChild(R);D.name=S[0];D.value=S[1];z.elForm.action=G.buildURI(G.getApiURI(z.apiPostNew,true,false),"callback=SNS.widget.commentBoard.onPostNew");if(H){z.elForm.submit();H=false}}},u=false,M=function(E){var D=E||1;if(!u){G.getCheckCodeURI(function(L){z.elForm.elements.TPL_checkcode.value="";if(L.flag==1){r.get("J_CheckCodeImg").src=SNS.sys.Helper.addStamp(L.uri);z.checkcodeURI=L.uri;r.removeClass("J_CheckCode","hidden");u=true}else{if(L.flag==0){r.addClass("J_CheckCode","hidden")}}},{typeId:z.typeId,needOrDisplay:D})}},y=function(){u=false;M(2)},I=function(D){p.on(D,"click",function(L){var E=p.getTarget(L);if(E.className.toLowerCase()==="newcheckcode"){p.preventDefault(L);y()}})},q=0,N=null,F=null,b=function(){var D=function(){g();G.showMessage("\u767b\u5f55\u8d85\u65f6\u6216\u7f51\u7edc\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\u6216\u68c0\u67e5\u7f51\u7edc\u540e\u91cd\u65b0\u53d1\u8868")};b=function(){F&&F.cancel();F=o.later(5000,null,D)};b()},Q=function(){if(H){A.script(G.buildURI(G.getApiURI(z.apiToken),"callback=SNS.widget.commentBoard.getToken"),{charset:"gbk"})}},v={getToken:function(D){K(D)},onPostNew:function(E,T){F&&F.cancel();g();T=T||{};if(E===null){if(T.message=="NoTrueName"){G.showMessage('\u4f60\u8fd8\u6ca1\u6709\u586b\u5199\u771f\u5b9e\u59d3\u540d\uff0c\u6682\u65f6\u4e0d\u80fd\u53d1\u8868\u5185\u5bb9\uff0c\u8bf7\u5148<a href="/admin/user/baseInfoSet.htm">\u586b\u5199</a>\u771f\u5b9e\u59d3\u540d')}else{G.showMessage(T.message||"\u53d1\u751f\u672a\u77e5\u9519\u8bef")}return}z.elTextArea.value="";if(G.checkDaren()&&T.userType&&f.widget.tabSwitch.tab){var D=parseInt(T.userType,10);f.widget.tabSwitch.tab.switchTab(D)}else{var U=h.createElement("DIV");U.innerHTML=o.trim(E);var R=z.elList,L=U.getElementsByTagName("LI")[0];var S=r.getChildren(R);if(S.length>z.pageSize-1){R.removeChild(S[S.length-1])}if(R.firstChild){R.insertBefore(L,R.firstChild)}else{R.appendChild(L)}}G.fixHover({elements:[L],hoverClass:"hover"});TB.ww&&TB.ww.lightAll(L);g();z.addCallback&&z.addCallback(z.lastCommentData);q++;z.countCallback&&z.countCallback(q);C();z.elForm.replyToUserId.value="";z.elForm.refer.value="";r.setStyle(z.replyQuote,"display","none");u=false;r.addClass("J_CheckCode","hidden")},onDeleteComment:function(L){if(L&&""+L.status==="1"){var E=""+L.commentId,T=r.getElementBy(function(U){return U.getAttribute("data-cid")==E},"li",z.elList);var D={opacity:{to:0}};if(YAHOO.env.ua.ie!==6){D.height={to:0}}if(T){var S=new d.Anim(T,D,0.2),R=T.parentNode;S.onComplete.subscribe(function(){R.removeChild(T);C();if(r.getChildren(R).length==0&&z.isDaren){idx=r.getNextSibling(r.getAncestorByClassName(R,"J_fblock"))?"1":"2";f.widget.tabSwitch.tab.switchTab(idx)}});S.animate()}q--;z.countCallback&&z.countCallback(q);z.deleteCallback&&z.deleteCallback({success:""+L.status==="1"})}else{G.showMessage("\u5220\u9664\u8bc4\u8bba\u5931\u8d25")}},onLoadComments:function(S,E,L,D){K(D);var R=S.indexOf("<li")==-1;if(L==0){if(S.trim()!=""){z.elList.innerHTML='<li class="sns-msg"><p class="tips">'+S+"</p></li>"}else{z.elList.innerHTML=S}}else{if((E.trim()!=""&&(E.indexOf('page=2"')!=-1))||R||L<(z.pageSize+1)||r.get("ablum")||E.indexOf("\u4e0a\u4e00\u9875")!=-1){z.elList.innerHTML=S}else{z.elList.innerHTML+=S}}z.elPagination&&(z.elPagination.innerHTML=E||"");if(!R&&E.indexOf("page=")!=-1){r.removeClass(z.elPagination,"hidden")}else{r.addClass(z.elPagination,"hidden")}if(E.indexOf("\u4e0a\u4e00\u9875")==-1){r.addClass(z.elPagination,"view-more");r.removeClass(z.elPagination,"sns-comment-pagination-contl")}G.fixHover({elements:r.getChildren(z.elList),hoverClass:"hover"});TB.ww&&TB.ww.lightAll(z.elList);q=L;z.countCallback&&z.countCallback(q);C()},reload:function(L,D,E){o.augmentObject(z,L,true);w(z);if(E){B(z.elList);x(z.elList);P(z.elPagination,z[D])}if(D){a("",z[D])}else{a()}},init:function(D){o.augmentObject(z,D||{},true);var E=this;p.onDOMReady(function(){try{h.domain=G.pickDocumentDomain(2)}catch(T){}z.isDaren=G.checkDaren();z.postProxy=G.getApiURI(z.postProxy,true,true);var W=r.get(z.elContainer),V=r.getElementsByClassName("new-reply","div",W)[0];if(V.getElementsByTagName("form").length>0){E.reload()}else{V.innerHTML=TB.common.formatMessage(l,{titleClass:z.title?"":"hidden",title:z.title||"",postProxy:z.postProxy,apiPostNew:G.buildURI(G.getApiURI(z.apiPostNew,true,false),"callback=SNS.widget.commentBoard.onPostNew"),moreCommentUrl:z.moreCommentUrl||"",hideMoreComment:"hidden",hidePagination:z.moreCommentUrl?"hidden":"",hidePostBox:z.hidePostBox?"hidden":""});z.elContainer=W;z.elIframe=W.getElementsByTagName("IFRAME")[0];z.elIframe&&(z.elIframe.src=z.postProxy);var U=W.getElementsByTagName("textarea")[0];z.elTextArea=U;if(z.isDaren){var R=r.get("J_ownerRealName");if(R){R.value!=""&&(e=e.replace(/TA/,R.value))}if(!("placeholder" in U)){U.value=e;p.on(U,"click",function(){if(this.value==e){this.value=""}});p.on(U,"blur",function(){if(this.value==""){this.value=e}})}U.setAttribute("placeholder",e)}z.elWordCountMsg=r.get("J_AlreadyNum");var L=z.elWordCountMsg.getElementsByTagName("em");N=SNS.sys.countLetter.decorate(U,{already:L[0],leave:"",num:parseInt(L[1].innerHTML)});p.on(U,"focus",function(){M()});var S=r.getElementsByClassName("reply-list","ul",W)[0];z.elList=S;z.elForm=z.elContainer.getElementsByTagName("FORM")[0];z.elPagination=r.getElementsByClassName("sns-comment-pagination-contl","div",z.elContainer)[0];z.elList&&a();w(z);t(r.getElementsByClassName("post","a",z.elForm)[0]);B(z.elList);x(z.elContainer);P(z.elPagination);c(z.elContainer);I(z.elContainer);G.fixCursorPosition(U);f.widget.faceSelector.init({elTrigger:r.get("J_viewMoreSmile")})}})}};SNS.widget.commentBoard=v;return v});SNS.add("faceSelector",function(e){var e=YAHOO.util,b=e.Dom,t=e.Event,g=e.Get,p=YAHOO.lang,r=document,h=SNS.sys.Helper,q={apiFaces:"comment:/json/face_json.htm"},o={params:null},f=null,d=function(v,u){t.on(v,"click",function(x){var w=t.getTarget(x);if((w.tagName.toUpperCase()!=="A"&&(w=w.parentNode).tagName.toUpperCase()!=="A")||!w.getAttribute("data-code")){return}t.stopEvent(x);var y=u.params;y.popupHandle&&y.popupHandle.hide();y.callback&&y.callback({faceId:w.getAttribute("data-code"),faceTitle:w.getAttribute("title")||"",faceUrl:w.getElementsByTagName("IMG")[0].src})})},s=function(){var u=r.createElement("DIV");b.addClass(u,"sns-popup popup-translucent popup-faces");u.innerHTML='<div class="hd naked"><span class="horn">^</span></div><div class="bd clearfix">loading ...</div>';r.body.appendChild(u);d(u,o);s=function(){return u};return s.apply(this,arguments)},c=function(){if(!this.popup.getAttribute("face-loaded")){var u=b.getElementsByClassName("bd","DIV",this.popup)[0];setTimeout(function(){a(function(A){var v=A.allfaces;f=A;var y=[],x=0,w=r.createDocumentFragment(),B,z;for(;x<v.length;++x){z=v[x];B=r.createElement("A");B.setAttribute("data-code",TB.common.unescapeHTML(z.code));B.setAttribute("title",z.title);B.innerHTML=TB.common.formatMessage("<img src='{imgUrl}' alt='{title}' />",z);w.appendChild(B)}u.innerHTML="";u.appendChild(w)})},0);this.popup.setAttribute("face-loaded",true)}},i=function(w,u){var v=null;if(w&&w.elTrigger){v=TB.widget.SimplePopupPlus.decorate(w.elTrigger,s(),p.merge({position:"bottom",align:"left",height:270,eventType:u?"NonExistsEvent":"click",offset:[-20,6],onShow:function(){c.apply(this,arguments);o.params=w;var x=b.getElementsByClassName("horn","SPAN",this.popup)[0];b[this.config.align==="right"?"addClass":"removeClass"](x,"right")}},w.popupConfig||{}));w.popupHandle=v}return v},a=function(u){if(f){u&&u(f)}else{l.loadFaces=function(v){f=v;u&&u(f)};g.script(h.buildURI(h.getApiURI(q.apiFaces),"callback=SNS.widget.faceSelector.loadFaces"),{charset:"gbk"})}},l={init:function(v){var u=b.get("J_newComment").getElementsByTagName("textarea")[0];i({elTrigger:b.get("J_viewMoreSmile"),callback:function(w){if(u.value==u.getAttribute("placeholder")){u.value=""}u.value+=w.faceId;u.focus()}})},getAllFaces:function(){if(f){return f.allfaces}return[]},showDialog:function(v){var u=b.get(v.elTrigger);if(!u.popupHandle){u.popupHandle=i(v,true)}u.popupHandle&&u.popupHandle.show()}};SNS.widget.faceSelector=l});SNS.add("sys.LinkCheck",function(b){var d=YAHOO.util.Dom,c=YAHOO.util.Event,a={};a.init=function(f,e){this.linkarr=f;this.arr=[];this._spi=e;this.linkarr&&this._init();this.link=""};a.link="";a.linktitle="";a.open=function(e){if(e==0){var f=window.open(a.link);if(f==null){SNS.sys.LinkCheck.open(1)}}else{a.linkid=d.generateId(null,"J_linkcheck");popupDialog=new SNS.sys.Popup({title:a.linktitle+"<p id="+a.linkid+">"+a.link+"</p>",width:290,height:127,hideMask:false,content:"\u8bbf\u95ee\u5185\u5bb9\u8d85\u51fa\u672c\u7ad9\u8303\u56f4,\u4e0d\u80fd\u786e\u5b9a\u662f\u5426\u5b89\u5168\u3002",type:"linkCheck",onShow:function(){var h=this;var l=d.getAncestorByClassName(a.linkid,"linkCheck");var g=l.getElementsByTagName("button")[0].parentNode;l.getElementsByTagName("button")[0].style.display="none";var i=document.createElement("a");i.href=a.link;i.target="_blank";i.innerHTML="<span>\u7ee7\u7eed\u8bbf\u95ee</span>";var o=document.createElement("a");d.setStyle(i,"cuscor","pointer");o.innerHTML="<span>\u53d6\u6d88\u8bbf\u95ee</span>";g.appendChild(i);g.appendChild(o);c.on([i,o],"click",function(p){h.hide()})}})}};YAHOO.lang.augmentObject(a.init.prototype,{_init:function(){var e=this;c.on(this.linkarr,"click",function(h){c.stopEvent(h);var g=c.getTarget(h);if(g.tagName!=="A"){return false}SNS.sys.LinkCheck.link=g.href;SNS.sys.LinkCheck.linktitle=g.getAttribute("data-linktitle");var f=e._spi+"?callback=SNS.sys.LinkCheck.open&url="+g.href+"&t="+new Date().getTime()+"&_input_charset=utf-8";YAHOO.util.Get.script(f,{charset:"gbk",timeout:1000,onTimeout:function(){SNS.sys.LinkCheck.open(1)}})})}});b.sys.LinkCheck=a});SNS.use();SNS.add("app.Modules",function(S){S.namespace("app.Modules");var Util=YAHOO.util,D=Util.Dom,E=Util.Event,L=YAHOO.lang,Connect=Util.Connect,Get=Util.Get,doc=document;var Modules=SNS.app.Modules,Helper=SNS.sys.Helper,Components=SNS.app.Components,modNames=[],modStore={};L.augmentObject(Modules,{add:function(name,module){modNames.push(name);modStore[name]=module},init:function(config){if(config===undefined){return}var modName,modConfig;for(var i=0;i<modNames.length;++i){modName=modNames[i];modConfig=config[modName]||config[modName.substr(0,1).toLowerCase()+modName.substr(1)]||config[modName.toLowerCase()]||null;if(modConfig){modStore[modName].init(modConfig)}}},get:function(name){return modStore[name]||null},initModule:function(name,config){}});Modules.add("FriendsGroup",(function(){var config={apiGroupInfo:"portal:/admin/json/view_user_group.htm",apiChangeFriendGroup:"portal:/admin/json/my_friend_group_edit.htm",apiModifyGroupName:"portal:/admin/json/add_user_group.htm?_input_charset=utf-8",apiAddGroup:"portal:/admin/json/add_user_group.htm?_input_charset=utf-8",apiDeleteGroup:"portal:/admin/json/remove_group.htm?_input_charset=utf-8"};var groupManageMsgs={NO_EXISTS_GROUP:"\u8be5\u5206\u7ec4\u4e0d\u5b58\u5728\uff0c\u65e0\u6cd5\u4fee\u6539",INVALID_GROUP_NAME:"\u7ec4\u540d\u5305\u542bXXX\u5b57\u7b26\uff01",LENOVER_NAME:"\u7ec4\u540d\u8d85\u8fc78\u4e2a\u6c49\u5b57\u6216\u800516\u4e2a\u5b57\u6bcd\uff01",MAX_GROUP_COUNT:"\u8fbe\u5230\u7528\u6237\u7ec4\u4e0a\u9650\uff01",LENOVER_CNAME:"\u7ec4\u540d\u8d85\u8fc78\u4e2a\u6c49\u5b57\u6216\u800516\u4e2a\u5b57\u6bcd\uff01",EXISTED_NAME:"\u7ec4\u540d\u91cd\u590d\uff01",TIME_OUT:"\u64cd\u4f5c\u8d85\u65f6\uff01",UIC_ERROR:"\u8bf7\u767b\u9646\uff01",REQUIRED_NAME:"\u7ec4\u540d\u4e3a\u7a7a\uff01",INVALID_GROUP_ID:"\u7528\u6237\u597d\u53cb\u7ec4\u4e0d\u5408\u6cd5",INVALID_GROUP_DELETE:"\u672a\u5206\u7ec4\u8054\u7cfb\u4eba\u4e0d\u80fd\u5220\u9664"};var createGroupInfoCallback=function(callback){return function(response){var jsonStr=L.trim(response.responseText||""),json=null;if(jsonStr!==""){try{json=L.JSON.parse(jsonStr)}catch(e){}}var groups=json.groupInfo,i=0,name;for(;i<groups.length;++i){name=groups[i].name;groups[i].groupName=name.substr(0,name.lastIndexOf("("));groups[i].count=parseInt(name.substring(name.lastIndexOf("(")+1,name.length-1),10)}friendsGroupCache=json;callback&&callback(json)}};var friendsGroupCache=null;return{getGroupInfo:function(callback,refresh){if(!refresh&&friendsGroupCache){callback&&callback(friendsGroupCache);return}var api=config.apiGroupInfo;Get.script(Helper.buildURI(Helper.getApiURI(api),"callback="+Helper.createCallback(callback)),{charset:"gbk"})},modifyGroupName:function(groupId,groupName,callback){Connect.asyncRequest("POST",Helper.buildURI(Helper.getApiURI(config.apiModifyGroupName)),{success:function(response){var json=L.JSON.parse(response.responseText);callback(json.msg==="SUCCESS",groupManageMsgs[json.msg]||"")}},["status=2","groupId="+encodeURIComponent(groupId),"groupName="+encodeURIComponent(groupName)].join("&"))},changeFriendGroup:function(userId,groupId,callback){Connect.asyncRequest("POST",Helper.buildURI(Helper.getApiURI(config.apiChangeFriendGroup)),{success:function(response){callback(L.JSON.parse(response.responseText))}},["userId="+encodeURIComponent(userId),"groupId="+encodeURIComponent(groupId)].join("&"))},addGroup:function(groupName,callback){Connect.asyncRequest("POST",Helper.buildURI(Helper.getApiURI(config.apiAddGroup)),{success:function(response){var json=L.JSON.parse(response.responseText);callback(json,groupManageMsgs[json.msg]||"")}},["status=1","groupName="+encodeURIComponent(groupName)].join("&"))},deleteGroup:function(groupId,callback){Connect.asyncRequest("POST",Helper.buildURI(Helper.getApiURI(config.apiDeleteGroup)),{success:function(response){var json=L.JSON.parse(response.responseText);callback(json.msg==="SUCCESS",groupManageMsgs[json.msg]||"")}},"groupId="+encodeURIComponent(groupId))},init:function(modConfig){L.augmentObject(config,modConfig,true)}}})());Modules.add("FriendsManage",(function(){var config={apiAddFriend:"portal:/admin/json/relation.htm",apiForDelStranger:"portal:/admin/json/delete_recommend_friend.htm",apiGetAllFriends:"portal:/admin/json/friend_search_json.htm?_input_charset=utf-8",apiGetFriendsForFriend:"portal:/admin/json/ta_friend_search_json.htm?_input_charset=utf-8",apiFriendSearch:"portal:/admin/json/friend_search_json.htm",apiGetCurrentSign:"portal:/home/getNewPersonalSign.do",apiGetUserSigns:"portal:/admin/json/wang_under_write.htm",apiGetRecommendUsersForFriend:"portal:/admin/json/friend_json.htm?tacelog=zy_tjhy",apiRecommendUsersToFriend:"portal:/admin/json/commend_send_message.htm"};var messages={DEFAULT_ERROR:"\u54a6?\u64cd\u4f5c\u4e0d\u6210\u529f?\u7f51\u7edc\u53c8\u95f4\u6b47\u6027\u8111\u62bd\u4e86?\u8981\u4e0d\u518d\u8bd5\u8bd5\u770b\u5427",INVITE_SUCCESS:"\u4f60\u5df2\u7ecf\u6210\u529f\u53d1\u9001\u4e86\u597d\u53cb\u9080\u8bf7\uff0c\u7b49\u5f85TA\u7684\u786e\u8ba4\u6d88\u606f\u5427\uff01",ACCEPT_SUCCESS:"\u4ece\u73b0\u5728\u5f00\u59cb,\u4f60\u4eec\u4fe9\u5c31\u662f\u597d\u53cb\u4e86",CAN_NOT_ADD_SELF:"\u81ea\u5df1\u4e0d\u80fd\u52a0\u81ea\u5df1\uff0c\u9664\u975e\u4f60\u53d8\u6210\u4e24\u4e2a:D",TOKEN_INVALID_OR_USED:"\u6069\u6069,\u8fd9\u4e2a\u9080\u8bf7\u5df2\u7ecf\u88ab\u4f7f\u7528\u8fc7\u4e86,\u5f88\u9057\u61be\u2026",ALREADY_FIREND:"\u4f60\u4eec\u5df2\u7ecf\u662f\u597d\u53cb\u5566~",OTHER_CNT_OVERFLOW:"\u54c7,\u5bf9\u65b9\u662f\u4e07\u4eba\u8ff7\u8036,TA\u7684\u597d\u53cb\u5df2\u7ecf1024\u4e2a\u4e86,\u8981\u4e0d\u4f60\u547c\u5524\u4e00\u4e0bTA,\u5426\u5219\u52a0\u4e0d\u4e86TA\u2026",SELF_CNT_OVERFLOW:"\u54c7,\u4f60\u662f\u4e07\u4eba\u8ff7\u8036,\u4f60\u7684\u597d\u53cb\u5df2\u7ecf1024\u4e2a\u4e86,\u6e05\u7406\u4e00\u4e0b\u518d\u52a0\u65b0\u7684\u597d\u53cb\u5427",USER_SETTING_BLOCK:"\u7531\u4e8e\u4f60\u6216\u5bf9\u65b9\u505a\u4e86\u9690\u79c1\u8bbe\u7f6e\uff0c\u52a0\u597d\u53cb\u64cd\u4f5c\u6ca1\u6709\u6210\u529f\u2026\u2026",REJECT_SUCCESS:'(\u9875\u9762\u4e0d\u663e\u793a\u6d88\u606f, \u7528\u4e8e\u6d88\u606f\u4e2d\u5fc3\u56de\u8c03\u7528)  code= "0"',CHANGE_GROUP_SUCCESS:"\u4f60\u5df2\u52a0TA\u4e3a\u597d\u53cb\uff0c\u5e76\u4e14\u4fee\u6539\u5206\u7ec4\u6210\u529f\uff01",APP_ALREADY_USED:"TA\u5df2\u7ecf\u73a9\u8fc7\u8fd9\u4e2a\u5e94\u7528\u5566~",CAN_NOT_INVITE_SELF:"\u81ea\u5df1\u4e0d\u80fd\u9080\u8bf7\u81ea\u5df1\uff0c\u9664\u975e\u4f60\u53d8\u6210\u4e24\u4e2a:D",INVITE_TOO_OFTEN:"\u597d\u53cb\u9080\u8bf7\u4e00\u5929\u53ea\u80fd\u53d1\u9001\u4e00\u6b21,\u522b\u6025,\u671f\u5f85\u4e00\u4e0bTA\u7684\u56de\u97f3\u5427",INVITE_TOO_MANY:"\u4f60\u771f\u662f\u597d\u53cb\u904d\u5929\u4e0b\u554a\uff0c\u4e0d\u8fc7\u6bcf\u5929\u52a0\u597d\u53cb\u6570\u5df2\u8fbe30\uff0c\u8981\u4e0d\u660e\u5929\u518d\u52a0\u5427!",INVITE_APP_TOO_OFTEN:"\u597d\u53cb\u9080\u8bf7\u4e00\u5929\u53ea\u80fd\u53d1\u9001\u4e00\u6b21,\u522b\u6025,\u671f\u5f85\u4e00\u4e0bTA\u7684\u56de\u97f3\u5427!",INVITE_APP_TOO_MANY:"\u4f60\u771f\u662f\u597d\u53cb\u904d\u5929\u4e0b\u554a\uff0c\u4e0d\u8fc7\u6bcf\u5929\u52a0\u597d\u53cb\u6570\u5df2\u8fbe30\uff0c\u8981\u4e0d\u660e\u5929\u518d\u52a0\u5427!",APP_INVITE_SUCCESS:"\u4f60\u5df2\u7ecf\u6210\u529f\u53d1\u9001\u4e86\u9080\u8bf7\uff0c\u7b49\u5f85TA\u7684\u786e\u8ba4\u6d88\u606f\u5427!"};var createAddFriendCallback=function(callback,info){return function(response){var jsonStr=L.trim(response.responseText||""),json;json=jsonStr===""?{}:L.JSON.parse(jsonStr)||{};var msg="";switch(json.code){case 0:msg=TB.common.formatMessage(messages.SUCCESS,{userNick:info.userNick});break;default:msg=messages[json.message]||messages.DEFAULT_ERROR;break}callback(json.code||1,msg)}};var createJsonCallback=function(callback){return function(response){var jsonStr=L.trim(response.responseText||""),json;json=jsonStr===""?null:eval("("+jsonStr+")");callback(json)}};return{addFriend:function(type,userId,nick,groupId,callback,queryParam){var api=config.apiAddFriend;Get.script(Helper.buildURI(Helper.getApiURI(api),"type="+encodeURIComponent(type),"friendId="+encodeURIComponent(userId),"groupId="+encodeURIComponent(groupId),queryParam||"","callback="+Helper.createCallback(callback)),{charset:"gbk"})},showMessage:function(msgCode){Helper.showMessage(messages[msgCode||"DEFAULT_ERROR"])},showAddFriendDialog:function(type,userId,nick,config){if(!Helper.checkAndShowLogin({autoCallback:true})){return}var content='<div class="popup-addfriend">\u628a<em></em>\u52a0\u4e3a\u6211\u7684\u597d\u53cb<br /><span class="line2">TA\u540c\u610f\u6211\u7684\u9080\u8bf7\u540e\uff0c\u51fa\u73b0\u5728\uff1a<br /></span><select></select><span class="line3end">&nbsp;&nbsp;\u8fd9\u4e2a\u7ec4\u91cc</span></div>';var fragment=doc.createElement("DIV");fragment.innerHTML=content;var elGroupSelect,elNickname,elLine2Text,elLine3End;elGroupSelect=fragment.getElementsByTagName("SELECT")[0];elGroupSelect.options.add(new Option("\u8f7d\u5165\u4e2d...","0"));elNickname=fragment.getElementsByTagName("EM")[0];elLine2Text=fragment.getElementsByTagName("SPAN")[0];elLine3End=fragment.getElementsByTagName("SPAN")[1];var FriendsManage=Modules.get("FriendsManage"),FriendsGroup=Modules.get("FriendsGroup");var addFriendParams={type:1,userId:"",nick:"",config:{},result:null};var elAddFriendResultMsg=document.createElement("DIV");var addFriendMsgTimer=null;var popupAddFriendResult=new SNS.sys.Popup({title:"\u63d0\u793a",hideMask:true,content:elAddFriendResultMsg,autoShow:false,type:"error",buttons:[{text:"\u786e\u5b9a",func:function(){addFriendParams.config.onMsgOK&&addFriendParams.config.onMsgOK(addFriendParams.result);this.hide()}}],onShow:function(){addFriendMsgTimer&&addFriendMsgTimer.cancel();addFriendMsgTimer=L.later(3000,this,function(){this.hide()})}});var onBtnAddFriendClick=function(){this.hide();FriendsManage.addFriend(addFriendParams.type,addFriendParams.userId,addFriendParams.nick,elGroupSelect.value,function(json){if(json.status!=="0"){elAddFriendResultMsg.innerHTML=TB.common.formatMessage(messages[json.msg]||"",{userNick:addFriendParams.nick});addFriendParams.result=json;if(!addFriendParams.config.hideResultMsg){popupAddFriendResult.show()}else{addFriendParams.config.onMsgOK(addFriendParams.result)}}},addFriendParams.config.queryParam)};var popupAddFriend=new SNS.sys.Popup({width:350,title:"\u6dfb\u52a0\u597d\u53cb",hideMask:true,content:fragment,type:"prompt",focus:0,buttons:[{text:"\u786e\u5b9a\u6dfb\u52a0",func:onBtnAddFriendClick},{text:"\u53d6\u6d88",func:function(){this.hide()}}],autoShow:false,onShow:function(){FriendsGroup.getGroupInfo(function(json){while(elGroupSelect.options.length){elGroupSelect.remove(0)}var groups=json.groupList;for(var i=0;i<groups.length;++i){elGroupSelect.options.add(new Option(TB.common.unescapeHTML(groups[i].groupName),groups[i].groupId+""))}})}});FriendsManage.showAddFriendDialog=function(type,userId,nick,config){elNickname.innerHTML=nick;addFriendParams={type:type,userId:userId,nick:nick,config:config||{}};switch(type+""){case"1":elLine2Text.innerHTML="\u9009\u62e9\u5206\u7ec4\uff1a<br />";elLine3End.innerHTML="";break;default:elLine2Text.innerHTML="TA\u540c\u610f\u6211\u7684\u9080\u8bf7\u540e\uff0c\u51fa\u73b0\u5728\uff1a<br />";elLine3End.innerHTML="&nbsp;&nbsp;\u8fd9\u4e2a\u7ec4\u91cc";break}if(type===4){onBtnAddFriendClick.apply(popupAddFriend)}else{var btnCancel=popupAddFriend.popup.getElementsByTagName("BUTTON")[1];D[type===3?"addClass":"removeClass"](btnCancel,"hidden");popupAddFriend.show()}};return FriendsManage.showAddFriendDialog(type,userId,nick,config)},delStranger:function(userId,userNick,callback){var api=Helper.addStamp(Helper.buildURI(Helper.getApiURI(config.apiForDelStranger),"filerId="+encodeURIComponent(userId),"filterNick="+encodeURIComponent(userNick)));Connect.asyncRequest("GET",api,{success:function(response){var json=null;callback(json)}})},searchFriends:function(){},getAllFriends:function(callback){Connect.asyncRequest("GET",Helper.buildURI(Helper.getApiURI(config.apiGetAllFriends)),{success:createJsonCallback(callback)})},getFriendsOfFriend:function(friendId,callback){Connect.asyncRequest("GET",Helper.buildURI(Helper.getApiURI(config.apiGetFriendsForFriend),"friendId="+friendId),{success:createJsonCallback(callback)})},getFriendsSign:function(userIdArr,callback,from){var qstrArr=[],qstr="";for(var i=0;i<userIdArr.length;++i){qstrArr[qstrArr.length]=encodeURIComponent(userIdArr[i])}qstr="uids="+qstrArr.join(",");Connect.asyncRequest("GET",Helper.buildURI(Helper.getApiURI(config.apiGetUserSigns),from?"from="+encodeURIComponent(from):"",qstr),{success:createJsonCallback(callback)})},getRecommendUsers:function(toUserId,callback){Get.script(Helper.buildURI(Helper.getApiURI(config.apiGetRecommendUsersForFriend),"toUserId="+encodeURIComponent(toUserId),"callback="+Helper.createCallback(callback)),{charset:"gbk"})},showRecommendDialog:function(params){var tplRecommendDlg='<div class="sns-popup popup-translucent reco-f-pop"><div class="hd naked"><span class="horn right">^</span></div><div class="bd"><h4>\u628a\u597d\u53cb\u63a8\u8350\u7ed9 <span class="receiver"></span></h4><ul class="user-list"></ul><div class="act skin-blue"><span class="btn n-btn"><a href="#" class="confirm">\u786e\u5b9a</a></span><span class="btn n-btn"><a href="#" class="cancel">\u53d6\u6d88</a></span></div></div></div>';var tplUserItem='<li><label><input type="checkbox" name="friend" value="{userId}" /><span class="name" title="{userNick}">{userNickShort}</span></label></li>';var elPopupDlg=document.createElement("DIV");elPopupDlg.innerHTML=tplRecommendDlg;document.body.appendChild(elPopupDlg);var elReceiver=D.getElementsByClassName("receiver","SPAN",elPopupDlg)[0],elUserList=D.getElementsByClassName("user-list","UL",elPopupDlg)[0];var currentPopupParams={};var popupParams=L.merge({eventType:"NonExistsEvent",position:"bottom",align:"left"},params.popupParams,{onShow:function(){currentPopupParams.onShow&&currentPopupParams.onShow.apply(this,arguments)},onHide:function(){currentPopupParams.onHide&&currentPopupParams.onHide.apply(this,arguments)}});var popupDialog=TB.widget.SimplePopupPlus.decorate(popupParams.trigger,elPopupDlg,popupParams);var showRecommendMsg=function(json){Helper.showMessage(json.message)};var friendsManage=this;E.on(elPopupDlg,"click",function(e){var el=E.getTarget(e);if(D.hasClass(el,"cancel")){popupDialog.hide();E.preventDefault(e);return}if(D.hasClass(el,"confirm")){E.preventDefault(e);var userIds=[],inputs=elUserList.getElementsByTagName("INPUT");for(var i=0;i<inputs.length;++i){inputs[i].checked&&userIds.push(inputs[i].value)}popupDialog.hide();if(userIds.length>0){friendsManage.recommendUsersToFriend(elPopupDlg.getAttribute("data-receiverid"),userIds,showRecommendMsg)}else{Helper.showMessage("\u8bf7\u9009\u62e9\u8981\u63a8\u8350\u7684\u597d\u53cb")}}});var fillUserList=function(json){var userList=json.recommend,html=[],user;if(userList.length>0){for(var i=0;i<userList.length;++i){user=userList[i];user.userNick=user.userRealname||user.userNick;user.userNickShort=Helper.cutStr(user.userNick,6);html[html.length]=TB.common.formatMessage(tplUserItem,user)}D.setStyle(elUserList,"height","")}else{D.setStyle(elUserList,"height","auto");html[html.length]="<li style='overflow:visible!important;width:200px'>\u6ca1\u6709\u53ef\u4ee5\u63a8\u8350\u7684\u597d\u53cb</li>"}elUserList.innerHTML=html.join("")};friendsManage.showRecommendDialog=function(params){popupDialog.trigger=params.popupParams.trigger;L.augmentObject(popupDialog.config,params.popupParams,true);currentPopupParams.onShow=params.popupParams.onShow;currentPopupParams.onHide=params.popupParams.onHide;elReceiver.innerHTML=L.trim(params.toUserNick);popupDialog.show();elPopupDlg.setAttribute("data-receiverid",params.toUserId);elUserList.innerHTML="<li>loading ...</li>";this.getRecommendUsers(params.toUserId,fillUserList);return popupDialog};return friendsManage.showRecommendDialog.apply(this,arguments)},recommendUsersToFriend:function(toUserId,userIdArr,callback){for(var i=0;i<userIdArr.length;++i){userIdArr[i]=encodeURIComponent(userIdArr[i])}Get.script(Helper.buildURI(Helper.getApiURI(config.apiRecommendUsersToFriend),"recommendIds="+userIdArr.join(","),"toUserId="+encodeURIComponent(toUserId),"callback="+Helper.createCallback(callback)),{charset:"gb18030"})},init:function(modConfig){L.augmentObject(config,modConfig,true)}}})());Modules.add("blogGroup",(function(){var config={apiGroupInfo:"blog:/json/ViewType.htm",apiChangeFriendGroup:"portal:/admin/json/my_friend_group_edit.htm",apiModifyGroupName:"blog:/json/UpdateType.htm?_input_charset=utf-8",apiAddGroup:"blog:/json/addType.htm?_input_charset=utf-8",apiDeleteGroup:"blog:/json/removeType.htm?_input_charset=utf-8"};var groupManageMsgs={NO_EXISTS_GROUP:"\u8be5\u5206\u7ec4\u4e0d\u5b58\u5728\uff0c\u65e0\u6cd5\u4fee\u6539",INVALID_GROUP_NAME:"\u7ec4\u540d\u5305\u542bXXX\u5b57\u7b26\uff01",LENOVER_NAME:"\u7ec4\u540d\u8d85\u8fc78\u4e2a\u6c49\u5b57\u6216\u800516\u4e2a\u5b57\u6bcd\uff01",MAX_GROUP_COUNT:"\u8fbe\u5230\u7528\u6237\u7ec4\u4e0a\u9650\uff01",LENOVER_CNAME:"\u7ec4\u540d\u8d85\u8fc78\u4e2a\u6c49\u5b57\u6216\u800516\u4e2a\u5b57\u6bcd\uff01",EXISTED_NAME:"\u7ec4\u540d\u91cd\u590d\uff01",TIME_OUT:"\u64cd\u4f5c\u8d85\u65f6\uff01",UIC_ERROR:"\u8bf7\u767b\u9646\uff01",REQUIRED_NAME:"\u7ec4\u540d\u4e3a\u7a7a\uff01",INVALID_GROUP_ID:"\u7528\u6237\u597d\u53cb\u7ec4\u4e0d\u5408\u6cd5",INVALID_GROUP_DELETE:"\u672a\u5206\u7ec4\u8054\u7cfb\u4eba\u4e0d\u80fd\u5220\u9664",NAME_IS_EMPTY:"\u5206\u7c7b\u540d\u79f0\u662f\u7a7a\u7684",HAS_TABOOL:"\u5206\u7c7b\u540d\u79f0\u542b\u6709\u7981\u5fcc\u8bcd",NAME_REPEATEDLY:"\u5206\u7c7b\u540d\u79f0\u91cd\u590d",HAS_NO_POPEDOM:"\u60a8\u65e0\u6743\u64cd\u4f5c\u8be5\u7c7b\u76ee",NAME_TO_LONG:"\u5206\u7c7b\u540d\u79f0\u592a\u957f"};var createGroupInfoCallback=function(callback){return function(response){var jsonStr=L.trim(response.responseText||""),json=null;if(jsonStr!==""){try{json=L.JSON.parse(jsonStr)}catch(e){}}var groups=json.groupInfo,i=0,name;for(;i<groups.length;++i){name=groups[i].name;groups[i].groupName=name.substr(0,name.lastIndexOf("("));groups[i].count=parseInt(name.substring(name.lastIndexOf("(")+1,name.length-1),10)}friendsGroupCache=json;callback&&callback(json)}};var friendsGroupCache=null;return{getGroupInfo:function(callback,refresh){if(!refresh&&friendsGroupCache){callback&&callback(friendsGroupCache);return}var api=config.apiGroupInfo;Get.script(Helper.buildURI(Helper.getApiURI(api),"callback="+Helper.createCallback(callback)),{charset:"gbk"})},modifyGroupName:function(groupId,groupName,callback){Connect.asyncRequest("POST",Helper.buildURI(Helper.getApiURI(config.apiModifyGroupName)),{success:function(response){var json=L.JSON.parse(response.responseText);callback(json.msg==="SUCCESS",groupManageMsgs[json.msg]||"")}},["status=2","groupId="+encodeURIComponent(groupId),"groupName="+encodeURIComponent(groupName)].join("&"))},changeFriendGroup:function(userId,groupId,callback){Connect.asyncRequest("POST",Helper.buildURI(Helper.getApiURI(config.apiChangeFriendGroup)),{success:function(response){callback(L.JSON.parse(response.responseText))}},["userId="+encodeURIComponent(userId),"groupId="+encodeURIComponent(groupId)].join("&"))},addGroup:function(groupName,callback){Connect.asyncRequest("POST",Helper.buildURI(Helper.getApiURI(config.apiAddGroup)),{success:function(response){var json=L.JSON.parse(response.responseText);callback(json,groupManageMsgs[json.msg]||"")}},["status=1","groupName="+encodeURIComponent(groupName)].join("&"))},deleteGroup:function(groupId,callback){Connect.asyncRequest("POST",Helper.buildURI(Helper.getApiURI(config.apiDeleteGroup)),{success:function(response){var json=L.JSON.parse(response.responseText);callback(json.msg==="SUCCESS",groupManageMsgs[json.msg]||"")}},"groupId="+encodeURIComponent(groupId))},init:function(modConfig){L.augmentObject(config,modConfig,true)}}})());Modules.add("blogManage",(function(){var config={apiGetAllFriends:"blog:/json/ViewType.htm?_input_charset=utf-8",apiFriendSearch:"blog:/json/ViewType.htm"};var createJsonCallback=function(callback){return function(response){var jsonStr=L.trim(response.responseText||""),json;json=jsonStr===""?null:eval("("+jsonStr+")");callback(json)}};return{getAllFriends:function(callback){Connect.asyncRequest("GET",Helper.buildURI(Helper.getApiURI(config.apiGetAllFriends)),{success:createJsonCallback(callback)})},init:function(modConfig){L.augmentObject(config,modConfig,true)}}})());Modules.add("Feeds",(function(){var config={defaultText:"\u6211\u4e5f\u63d2\u53e5\u8bdd ...",apiFeedsByType:"",apiMask:"",apiNearFeeds:"portal:/admin/json/index_near_feeds_by_type.htm",apiCommentList:"portal:/admin/json/index_feed_comments.htm?_input_charset=utf-8",apiAddComment:"portal:/admin/json/add_feed_comment.htm?_input_charset=utf-8",_apiDelComment:"portal:/admin/home/delete_feed_comment.htm?_input_charset=utf-8",apiDelComment:"portal:/admin/json/delete_feed.htm?_input_charset=utf-8",apiForbiddenFeed:"portal:/admin/json/forbidden_friend_feed.htm?_input_charset=utf-8",apiToken:"comment:/json/token.htm"};var jiwaiConfig={apiAddComment:"app:/jiwai/comment_jiwai.htm?_input_charset=utf-8",apiCommentList:"app:/jiwai/load_all_comments.htm?_input_charset=utf-8"};var connection=null;var loadFeedsByType=function(elContl,tab,type){var apiURI=Helper.getApiURI(config.apiFeeds);var params=["tab="+curTab,"type="+(type||"all")].join("&");if(connection){Connect.abort(connection)}connection=Helper.loadFromServer(elContl,apiURI,params,function(){var el=D.get(container||config.elContent);connection=null})};var doReflow=Helper.doReflow;var fillFaceSelector=function(elContl,elText){if(!elContl.getAttribute("face-filled")){elContl.setAttribute("face-filled","true");SNS.app.Components.get("FaceSelector").fillContainer({elContainer:elContl,callback:function(data){if(elText.value.length+data.faceId.length<=50){Helper.recoverCursorPos(elText);Helper.insertText(elText,data.faceId)}}})}};var monitorExpand=function(elContl){E.on(elContl,"click",function(e){var el=E.getTarget(e);if(el.tagName.toUpperCase()!=="A"||!D.hasClass(el.parentNode.parentNode,"comment-expand")){return}E.preventDefault(e);el.innerHTML="loading ...";var elExpand=el.parentNode.parentNode;var elFeed=D.getAncestorByClassName(el,"feed-item");if(!elFeed){return}var feedId=elFeed.getAttribute("data-fid"),feedUserId=elFeed.getAttribute("data-uid"),hiddenCommentsCount=elExpand.getAttribute("data-count")*1||0,elComments=D.getAncestorByClassName(el,"feeds_comment");if(hiddenCommentsCount===0){D.setStyle(D.getChildren(elComments),"display","block");D.setStyle(elExpand,"display","none")}else{var expandComments=function(response){elComments.innerHTML=response.responseText;doReflow()};Connect.asyncRequest("GET",Helper.buildURI(Helper.getApiURI(config.apiCommentList),"feedId="+feedId+"&feedUserId="+feedUserId),{success:expandComments})}})};var monitorTextarea=function(elContl){};var isRelogin=false;var monitorPost=function(elContl){E.on(elContl,"click",function(e){var el=E.getTarget(e);if(el.tagName.toUpperCase()!=="BUTTON"||!D.hasClass(el,"confirm")){return}var elFeed=D.getAncestorByClassName(el,"feed-item"),elPostArea=D.getAncestorByClassName(el,"subfeeds_rows_1_post");if(!elFeed){return}var elText=elPostArea.getElementsByTagName("TEXTAREA")[0],content=elText.value,replyId=elText.getAttribute("data-replyuid"),replyNick=elText.getAttribute("data-replynick"),replyContent=elText.getAttribute("data-replycontent");if(L.trim(elText.value)===""){Helper.showMessage("\u8bf7\u8f93\u5165\u8bc4\u8bba\u5185\u5bb9");return}if(!Helper.checkAndShowLogin()){isRelogin=true;Helper.fixTextAreaFocus(elText);return}var data=["feedId="+encodeURIComponent(elFeed.getAttribute("data-fid")),"content="+encodeURIComponent(content)];if(replyId&&content.substr(0,replyNick.length)===replyNick){data.push("commentUserId="+encodeURIComponent(replyId));data.push("commentContent="+encodeURIComponent(replyContent))}var elComments=D.getElementsByClassName("feeds_comment","DIV",elFeed)[0];var cbAddComment=function(response){var jsonStr=L.trim(response.responseText||""),json=null;var prefix;if(jsonStr!==""){prefix=jsonStr.substring(0,3)}if(jsonStr=="no"){popNoTrueName();return false}if(prefix=="msg"||prefix=="htm"){content=jsonStr.substring(4)}else{content=jsonStr}if(prefix=="msg"){Helper.showMessage(content)}else{elComments.innerHTML=content;if(D.getElementsByClassName("comment-item","DIV",elComments).length<1){location.replace(location)}elText.value="";elText.blur();doReflow()}};config.cbAddComment=cbAddComment;config.cbData=data;if(isRelogin){regetToken()}else{Connect.asyncRequest("POST",Helper.getApiURI(config.apiAddComment),{success:cbAddComment},data.join("&"))}})};var monitorReply=function(elContl){var animCollapse=[];var addBlurListener=function(args){var elFeed=args.elFeed,elComments=args.elComments,elPost=args.elPost,elText=args.elText,elReply=args.elReply,elFaces=args.elFaces,elCommentsContl=elComments.parentNode;if(!elFeed.getAttribute("blur-listener")){var animCollapseText=new Util.Anim(elText,{height:{to:0},paddingTop:{to:0},paddingBottom:{to:0}},0.2),animCollapseComments=new Util.Anim(elCommentsContl,{height:{to:0}},0.2),animCollapsePost=new Util.Anim(elPost,{height:{to:0}},0.2);animCollapsePost.onComplete.subscribe(function(){if(D.getChildren(elComments).length===0){D.removeClass(elFeed,"xy_huifu")}elFeed.removeAttribute("expanded");D.setStyle(elFaces,"visibility","hidden");D.setStyle(elCommentsContl,"height","");doReflow()});E.on(document,"click",function(e){var el=E.getTarget(e);if(D.hasClass(el,"cancel")&&!D.isAncestor(elPost,el)){return}if(el===elText){return}if(!D.hasClass(el,"cancel")){if(elText.value!==""){return}if(el===elReply||(D.hasClass(el,"reply")&&D.isAncestor(elPost,el))){return}if(D.isAncestor(elFaces,el)){return}}var hasComment=D.getChildren(elComments).length>0;animCollapseText.attributes.height.to=hasComment?12:0;animCollapseText.attributes.paddingTop.to=animCollapseText.attributes.paddingBottom.to=hasComment?5:0;animCollapsePost.attributes.height.to=hasComment?22:0;D.setStyle(elText,"overflow","hidden");D.setStyle(elFaces,"visibility","hidden");animCollapseText.animate();animCollapsePost.animate();if(!hasComment){D.setStyle(elCommentsContl,"overflow","hidden")}elText.value=config.defaultText});elFeed.setAttribute("blur-listener","true")}};E.on(elContl,"click",function(e){var el=E.getTarget(e),elReply=null;if(!(D.hasClass(el,"reply")||el.tagName.toUpperCase()==="TEXTAREA")){return}if(D.hasClass(el,"reply")){elReply=el}E.preventDefault(e);var elFeed=D.getAncestorByClassName(el,"feed-item");if(!elFeed){return}var elFaces=D.getElementsByClassName("feeds_face_div","DIV",elFeed)[0],elComments=D.getElementsByClassName("feeds_comment","DIV",elFeed)[0],elPost=D.getElementsByClassName("subfeeds_rows_1_post","DIV",elFeed)[0],elUserLogo=D.getChildren(D.getElementsByClassName("feed_logo","DIV",elFeed)[0])[0],elText=elFeed.getElementsByTagName("textarea")[0];var elComment=D.getAncestorByClassName(elReply,"comment-item"),defaultText="";if(elComment){elText.setAttribute("data-replyuid",elComment.getAttribute("data-uid"));elText.setAttribute("data-replycontent",elComment.getAttribute("data-comment"));var userNick="\u56de\u590d"+L.trim(elComment.getAttribute("data-nick"))+"\uff1a";elText.setAttribute("data-replynick",userNick);defaultText=userNick}if(!elFeed.getAttribute("expanded")){elFeed.setAttribute("expanded","true");D.addClass(elFeed,"xy_huifu");D.setStyle(elFaces,"display","block");D.setStyle(elFaces,"visibility","visible");if(elUserLogo){var elUserAvatar=elUserLogo.getElementsByTagName("IMG")[0];if(elUserAvatar){elUserAvatar.src=elUserAvatar.src.replace(/24x24(\.\w+)$/g,"40x40$1")}}var anim=new Util.Anim(elPost,{height:{to:130}},0.2,Util.Easing.easeOut);anim.onComplete.subscribe(function(){fillFaceSelector(elFaces,elText);Helper.fixCursorPosition(elText);doReflow()});anim.animate();var animText=new Util.Anim(elText,{height:{to:50},paddingTop:{to:5},paddingBottom:{to:5}},0.1,Util.Easing.easeOut);animText.onComplete.subscribe(function(){elText.focus();elText.value=defaultText;D.setStyle(elText,"overflow","auto")});animText.animate();addBlurListener({elFeed:elFeed,elComments:elComments,elPost:elPost,elText:elText,elReply:elReply,elFaces:elFaces});elText.setAttribute("maxlength","210");Helper.addMaxLenSupport(elText)}else{if(defaultText!==""){elText.focus();elText.value=defaultText}}})};var monitorMask=function(elContl){var getConfirmDlg=function(feedUserAndType){var elMessage=document.createElement("DIV");var popup=new SNS.sys.Popup({title:"\u5c4f\u853d\u597d\u53cb\u52a8\u6001",content:elMessage,type:"error",autoShow:false,hideMask:true,buttons:[{text:"\u786e\u5b9a",func:doMask},{text:"\u53d6\u6d88",func:function(){this.hide()}}]});getConfirmDlg=function(feedUserAndType){if(feedUserAndType){var redSpan="<span style='color:red'>";feedUserAndType=redSpan+feedUserAndType.replace(" \u7684 ","</span> \u7684 "+redSpan)+"</span>"}feedUserAndType=feedUserAndType||"\u8fd9\u4e2a\u597d\u53cb\u7684\u8be5\u7c7b\u578b";elMessage.innerHTML="\u4ee5\u540e\u4e0d\u518d\u63a5\u6536"+feedUserAndType+"\u52a8\u6001\uff0c\u4f60\u786e\u8ba4\u5417?(\u4f60\u53ef\u4ee5\u5728\u9690\u79c1\u8bbe\u7f6e\u91cc\u89e3\u9664\u6b64\u5c4f\u853d)";return popup};return getConfirmDlg(feedUserAndType)};var doMask=function(){this.hide();var elFeed=params.elFeed;Connect.asyncRequest("POST",Helper.getApiURI(config.apiForbiddenFeed),{success:function(response){var json=L.JSON.parse(response.responseText);if(json.status==="1"){var anim=new Util.Anim(elFeed,{height:{to:0},opacity:{to:0}},0.3);anim.onComplete.subscribe(function(){elFeed.parentNode.removeChild(elFeed)});anim.animate()}else{Helper.showMessage(json.msg)}}},"feedId="+elFeed.getAttribute("data-fid"))};var params={elFeed:null};E.on(elContl,"click",function(e){var el=E.getTarget(e);if(!D.hasClass(el,"icon-filter-simple")){return}E.preventDefault(e);var elFeed=D.getAncestorByClassName(el,"feed-item");if(elFeed){params.elFeed=elFeed;var dlg=getConfirmDlg(elFeed.getAttribute("data-fname"));dlg.show()}})};var monitorDelete=function(elContl){var deDelete=function(elFeed){elFeed=elFeed||params.elFeed;Connect.asyncRequest("POST",Helper.getApiURI(config.apiDelComment),{success:function(response){var json=L.JSON.parse(response.responseText);if(json.status==="1"){var anim=new Util.Anim(elFeed,{height:{to:0},opacity:{to:0}},0.3);anim.onComplete.subscribe(function(){elFeed.parentNode.removeChild(elFeed);doReflow()});anim.animate()}else{Helper.showMessage(json.msg)}}},"feedId="+elFeed.getAttribute("data-fid")+"&feedUserId="+elFeed.getAttribute("data-uid"))};var params={elFeed:null};E.on(elContl,"click",function(e){var el=E.getTarget(e);if(!D.hasClass(el,"icon-del-simple")){return}E.preventDefault(e);if(!Helper.checkAndShowLogin({callback:function(){window.location.reload()}})){return}var elFeed=D.getAncestorByClassName(el,"feed-item");if(elFeed){params.elFeed=elFeed;deDelete(elFeed)}})};var monitorFeedsToggle=function(container){E.on(container,"click",function(e){var el=E.getTarget(e);if(!D.hasClass(el,"toggle")&&!D.hasClass(el.parentNode,"toggle")){return}if(!Helper.checkAndShowLogin()){return}E.preventDefault(e);var h3=D.getAncestorByTagName(el,"h3");if(h3){var elFeedsList=D.getNextSibling(h3),elFeedsPart=elFeedsList.parentNode,curDisplay=D.getStyle(elFeedsList,"display"),elToggle=h3.getElementsByTagName("A")[0],dataType=h3.getAttribute("data-type");if(curDisplay==="none"||dataType){elToggle.innerHTML="<span class='icon_19'></span>\u6536\u8d77";D.setStyle(elFeedsList,"display","block");doReflow();if(dataType){h3.removeAttribute("data-type");elFeedsList.innerHTML="<img src='http://img06.taobaocdn.com/tps/i6/T13l0vXhRrXXXXXXXX-24-24.gif' width='32' height='32' alt='loading' />";Connect.asyncRequest("GET",Helper.buildURI(Helper.getApiURI(config.apiNearFeeds),"type="+encodeURIComponent(dataType)),{success:function(response){elFeedsList.innerHTML=L.trim(response.responseText);doReflow()}})}}else{elToggle.innerHTML="<span class='icon_19_1'></span>\u5c55\u5f00";D.setStyle(elFeedsList,"display","none");doReflow()}}})};var fixFeedsHover=YAHOO.env.ua.ie!==6?function(){}:function(elContl){if(D.get("J_darenStyle")&&D.get("J_darenStyle").href.indexOf("black")==-1){return}var elFeedArr=D.getElementsByClassName("feeds_title","DIV",elContl);Helper.fixHover({elements:elFeedArr,hoverClass:"feeds_title_hover"})};var monitorDeleteComment=function(elContl){E.on(elContl,"click",function(e){var el=E.getTarget(e);if(!D.hasClass(el,"comment-delete")){return}E.preventDefault(e);var elFeed=D.getAncestorByClassName(el,"feed-item");if(!elFeed){return}var elComment=D.getAncestorByClassName(el,"comment-item");if(!Helper.checkAndShowLogin({callback:function(){YAHOO.util.Get.script(Helper.buildURI(Helper.getApiURI("comment:/json/token.htm"),"callback=SNS.app.Modules.get('Feeds').getToken"),{charset:"gbk"})}})){return}var data=["feedId="+encodeURIComponent(elFeed.getAttribute("data-fid")),"commentId="+encodeURIComponent(elComment.getAttribute("data-cid"))];var deleteComment=function(response){var json=L.JSON.parse(response.responseText);if(json.status==="1"){elComment.parentNode.removeChild(elComment)}else{Helper.showMessage(json.msg)}};Connect.asyncRequest("POST",Helper.getApiURI(config._apiDelComment),{success:deleteComment},data.join("&"))})};var monitorAll=function(elContl){monitorTextarea(elContl);monitorReply(elContl);monitorMask(elContl);monitorDelete(elContl);monitorPost(elContl);monitorExpand(elContl);monitorFeedsToggle(elContl);monitorDeleteComment(elContl)};var setTbToken=function(token){var tokenStr=token||"",tokenArr=tokenStr.split("="),tokenDiv=D.get("Jianghu_tb_token"),input;if(!tokenDiv){tokenDiv=document.createElement("div");tokenDiv.id="Jianghu_tb_token";tokenDiv.innerHTML='<input type="hidden" />';document.body.appendChild(tokenDiv)}if(tokenStr&&tokenArr.length===2){input=D.getFirstChild(tokenDiv);input.name=tokenArr[0];input.value=tokenArr[1];if(isRelogin){Connect.asyncRequest("POST",Helper.getApiURI(config.apiAddComment),{success:config.cbAddComment},config.cbData.join("&"));isRelogin=false}}};var regetToken=function(){if(isRelogin){Get.script(Helper.buildURI(Helper.getApiURI(config.apiToken),"callback=SNS.app.Modules.get('Feeds').getToken"),{charset:"gbk"})}};return{getToken:function(token){setTbToken(token)},loadFeeds:function(elContl,apiUrl,params,callback){return Helper.loadFromServer(elContl,apiUrl,params,function(){fixFeedsHover(elContl);Helper.doReflow();callback&&callback();setTimeout(function(){var url="http://share.jianghu.{serverHost}/security/site_security.htm";SNS.sys.Helper.regApiServer({htmlURLLink:url});url=SNS.sys.Helper.getApiURI("htmlURLLink:",false,true);if(url){new SNS.sys.LinkCheck.init(YAHOO.util.Dom.getElementsByClassName("sns-linkcheck","a"),url)}},1000)})},monitorAll:function(elContl){E.onDOMReady(function(){monitorAll(elContl)})},initForJiwai:function(elContl,cfg){elContl=D.get(elContl);cfg=cfg||{};L.augmentObject(cfg,jiwaiConfig);L.augmentObject(config,cfg,true);monitorReply(elContl);monitorPost(elContl);monitorTextarea(elContl);monitorExpand(elContl);fixFeedsHover(elContl)},initForUser:function(elContl,cfg){var FeedsModule=this;elContl=D.get(elContl);cfg=cfg||{};L.augmentObject(config,cfg,true);E.onDOMReady(function(){D.addClass(elContl,"feeds_box ");if(cfg.apiFeeds){FeedsModule.loadFeeds(elContl,cfg.apiFeeds,["userId="+cfg.userId,"size="+cfg.size].join("&"),function(){var feeds=D.getChildren(elContl);if(feeds.length===0){try{D.addClass(elContl,"collapse");var elToggle=D.getPreviousSibling(elContl).getElementsByTagName("A")[0];elToggle.innerHTML="<span class='icon_19_1'></span>\u5c55\u5f00"}catch(e){alert(e.message)}}})}monitorReply(elContl);monitorPost(elContl);monitorTextarea(elContl);monitorExpand(elContl);monitorDelete(elContl)})},load:function(params){},init:function(modConfig){L.augmentObject(config,modConfig,true)}}})());Modules.add("Poke",(function(){var config={apiFriendPokes:"poke:/poke/listPokeInfoForFriend.htm",apiNonFriendPokes:"poke:/poke/listPokeInfoForNonFriend.htm",apiCheckFriend:"poke:/poke/checkTaoJiangHuFriend.htm",apiDefaultPoke:"poke:/poke/defaultPoke.htm?tracelog=zy_dyx ",apiCustomPoke:"poke:/poke/customPoke.htm?_input_charset=utf-8&tracelog=zy_dyx"};var tplPokesDialog='<div class="sns-popup popup-translucent popup-pokes"><div class="hd naked"></div><div class="bd"><div class="pokes-list clearfix"></div><div class="customize" style="display:none"><strong>\u81ea\u5b9a\u4e49\u52a8\u4f5c\uff1a</strong>\u4f60<input type="text" class="poke-verb" maxlength="10" size="10" />\u4e86 <span class="poke-receiver"></span> \u4e00\u4e0b<span class="skin-blue"><span class="btn n-btn"><a href="#" class="btn-poke-send">\u786e\u5b9a</a></span></span></div></div></div>';var getPoke=function(){return SNS.app.Modules.get("Poke")};var pokesCache={};return{getPokesForUser:function(isFriend,callback){var cacheKey="isFriend"+isFriend;if(pokesCache[cacheKey]){callback(pokesCache[cacheKey]);return}var api=isFriend?config.apiFriendPokes:config.apiNonFriendPokes;Get.script(Helper.buildURI(Helper.getApiURI(api),"jsoncallback="+Helper.createCallback(function(json){pokesCache[cacheKey]=json;callback(json)})),{charset:"gbk"})},getPokes:(function(){var createCallback=function(params){return function(json){var callback=function(jsonPokes){params.callback(jsonPokes,params)};params.isFriend=json.isFriend;params.receiverName=json.receiverName;getPoke().getPokesForUser(params.isFriend,callback)}};return function(params){var checkParams=L.merge(params,{callback:createCallback(params)});this.checkFriend(checkParams)}})(),checkFriend:function(params){Get.script(Helper.buildURI(Helper.getApiURI(config.apiCheckFriend),"senderLongId="+encodeURIComponent(params.sender||""),"receiverLongId="+encodeURIComponent(params.receiver||""),"jsoncallback="+Helper.createCallback(params.callback)),{charset:"gbk"})},showPokesDialog:(function(){var pokesPopup=null;var generatePokesList=function(pokes){var retList=["<ul class='action'>"],list=pokes.jsonPokeInfoList,item,tplPokeItem="<li><a href='#' data-pokeid='{pokeInfoId}'><img src='{pokeImgPath}' alt='{pokeName}' />{pokeName}</a></li>";for(var i=0;i<list.length;++i){list[i].pokeImgPath=Helper.getAssetsURI("/img"+list[i].pokeImgPath);retList[retList.length]=TB.common.formatMessage(tplPokeItem,list[i])}retList[retList.length]="</ul>";return retList.join("")};var createPokesDialog=function(params){var elPopupPokes=document.createElement("DIV");elPopupPokes.innerHTML=tplPokesDialog;var elPokeInput=D.getElementsByClassName("poke-verb","INPUT",elPopupPokes)[0],elReceiver=D.getElementsByClassName("poke-receiver","SPAN",elPopupPokes)[0];document.body.appendChild(elPopupPokes);var currentParams=null;E.on(elPopupPokes,"click",function(e){var el=E.getTarget(e);E.preventDefault(e);if(el.tagName.toUpperCase()!=="A"&&el.parentNode.tagName.toUpperCase()!=="A"){return}if(el.tagName.toUpperCase()!=="A"){el=el.parentNode}var poke="",pokeType=0;if(el.getAttribute("data-pokeid")){poke=el.getAttribute("data-pokeid");pokeType=1}else{if(D.hasClass(el,"btn-poke-send")){poke=L.trim(elPokeInput.value);pokeType=2}}if(pokeType===2&&poke===""){var errmsg="\u8bf7\u8f93\u5165\u81ea\u5b9a\u4e49\u8bcd\u6216\u9009\u62e9\u9ed8\u8ba4\u52a8\u4f5c";var popup=new SNS.sys.Popup({content:errmsg,type:"error",hideMask:true,buttons:[{text:"\u786e\u5b9a",func:function(){this.hide()}}]});L.later(1500,null,function(){popup.hide()});return}pokesPopup.hide();var sendPoke=(currentParams&&currentParams.onPoke)||getPoke().sendPoke;sendPoke&&sendPoke(pokeType,elPopupPokes.getAttribute("data-sender"),elPopupPokes.getAttribute("data-receiver"),poke)});E.on(elPopupPokes,"click",function(e){var el=E.getTarget(e);if(el.tagName.toUpperCase()!=="A"||!D.hasClass(el,"act-addfriend")){return}var userId=elPopupPokes.getAttribute("data-receiver"),userNick=elPopupPokes.getAttribute("data-receivername");if(userId){SNS.app.Modules.get("FriendsManage").showAddFriendDialog(0,userId,userNick,{})}});createPokesDialog=function(params){elPopupPokes.setAttribute("data-sender",params.sender);elPopupPokes.setAttribute("data-receiver",params.receiver);elPopupPokes.setAttribute("data-receivername",params.receiverName);elReceiver.innerHTML=Helper.cutStr(L.trim(params.receiverName),10);elReceiver.setAttribute("title",params.receiverName);elPokeInput.value="";currentParams=params;var popupParams=params.popupParams;pokesPopup=TB.widget.SimplePopupPlus.decorate(popupParams.trigger,elPopupPokes,L.merge({eventType:"NonExistsEvent",position:"bottom",align:"left"},popupParams));return pokesPopup};return createPokesDialog(params)};var getPokesPopup=function(params){var popup=createPokesDialog(params),pokesContainer=D.getElementsByClassName("pokes-list","DIV",popup.popup)[0],customPoke=D.getElementsByClassName("customize","DIV",popup.popup)[0];pokesContainer.innerHTML="";D.addClass(popup.popup,"notfriend");var trigger=null,dataKey="data-isfriend",dataKey2="data-isjhuser";params.popupParams&&(trigger=params.popupParams.trigger);if(trigger&&trigger.getAttribute(dataKey)){fillPokes(popup.popup,trigger.getAttribute(dataKey)==="true",trigger.getAttribute(dataKey2)==="true")}else{getPoke().checkFriend({sender:params.sender,receiver:params.receiver,callback:function(json){trigger.setAttribute(dataKey,json.isFriend?"true":"false");trigger.setAttribute(dataKey2,json.receiverName===""?"false":"true");fillPokes(popup.popup,json.isFriend,json.receiverName!=="")}})}return popup};var fillPokes=function(container,isFriend,isJianghuUser){var pokesCache={};var popupDiv=D.getChildren(container)[0],pokesContainer=D.getElementsByClassName("pokes-list","DIV",container)[0],customPoke=D.getElementsByClassName("customize","DIV",container)[0];D.setStyle(customPoke,"display","none");var cleanAndFill=function(pokesListHtml){pokesContainer.innerHTML=pokesListHtml};fillPokes=function(container,isFriend,isJianghuUser){var cacheKey="isFriend"+isFriend;D.setStyle(customPoke,"display",isFriend?"block":"none");D[isFriend?"removeClass":"addClass"](popupDiv,"notfriend");if(!isJianghuUser){cleanAndFill("<ul><li>&nbsp;&nbsp;\u5bf9\u65b9\u672a\u5f00\u901a\u6dd8\u6c5f\u6e56\uff0c\u60a8\u53ef\u4ee5<a href='#' class='act-addfriend'>\u9080\u8bf7TA\u52a0\u5165\u6dd8\u6c5f\u6e56</a>\u3002</li></ul>");return}if(pokesCache[cacheKey]){cleanAndFill(pokesCache[cacheKey]);return}getPoke().getPokesForUser(isFriend,function(json){var pokesListHtml=generatePokesList(json);pokesCache[cacheKey]=pokesListHtml;cleanAndFill(pokesCache[cacheKey])})};fillPokes(container,isFriend,isJianghuUser)};return function(params){if(pokesPopup){pokesPopup.hide()}pokesPopup=getPokesPopup(params);pokesPopup.show();return pokesPopup}})(),sendPoke:(function(){var elMessage=document.createElement("DIV");var popupPokeResult=function(){var popup=new SNS.sys.Popup({title:"",width:400,hideMask:true,content:elMessage,autoShow:false,type:"error",buttons:[{text:"\u786e\u5b9a",func:function(){this.hide()}}]});popupPokeResult=function(){return popup};return popupPokeResult()};var pokeResultTimer=null;var showPokeResult=function(json){if(pokeResultTimer){pokeResultTimer.cancel()}var msg=json.pokeResultMsg;if(msg==="success"){msg="\u4f60\u5df2\u7ecf\u6210\u529f\u5730\u52a8\u4e86TA\u4e00\u4e0b\u54e6\uff01"}var panel=SNS.sys.Helper.showMessage(msg);L.later(1500,null,function(){panel.hide()})};return function(type,sender,receiver,poke){var api="",extra="";switch(type){case 1:api=config.apiDefaultPoke;extra="pokeInfoId="+encodeURIComponent(poke);break;default:api=config.apiCustomPoke;extra="pokeVerb="+encodeURIComponent(poke);break}Get.script(Helper.buildURI(Helper.getApiURI(api),"senderLongId="+encodeURIComponent(sender),"receiverLongId="+encodeURIComponent(receiver),extra,"jsoncallback="+Helper.createCallback(showPokeResult)),{charset:"gbk"})}})(),init:function(modConfig){L.augmentObject(config,modConfig,true)}}})())});function popNoTrueName(){var a=new SNS.sys.Popup({title:"\u63d0\u793a",content:'\u4f60\u8fd8\u6ca1\u6709\u586b\u5199\u771f\u5b9e\u59d3\u540d\uff0c\u6682\u65f6\u4e0d\u80fd\u53d1\u8868\u5185\u5bb9\uff0c\u8bf7\u5148<a href="http://jianghu.taobao.com/admin/user/baseInfoSet.htm">\u586b\u5199</a>\u771f\u5b9e\u59d3\u540d',type:"error",autoShow:false,hideMask:true,buttons:[{text:"\u786e\u5b9a",func:function(){this.hide()}}]});a.show()}SNS.add("app.Components",function(d){d.namespace("app.Components");var h=YAHOO.util,a=h.Dom,q=h.Event,f=YAHOO.lang,g=h.Connect,b=h.Get,i=document;var c=SNS.app.Components,p=SNS.app.Modules,e=SNS.sys.Helper,l=[],o={};f.augmentObject(c,{add:function(s,r){l.push(s);o[s]=r},init:function(r){if(r===undefined){return}var t,u;for(var s=0;s<l.length;++s){t=l[s];if(!o[t].init){continue}t=l[s];u=r[t]||r[t.substr(0,1).toLowerCase()+t.substr(1)]||r[t.toLowerCase()]||null;if(u){o[t].init(u)}}},get:function(r){return o[r]||null},initComponent:function(s,r){}});c.add("InlineEditor",(function(){var t=function(v){q.stopEvent(v);var w=this.elCurrentEdit;this.recover();this.onChanged.fire(this.elInput.value,w)};var r=function(z){var x=q.getTarget(z),A=x.value,v=A.length*2-(A.match(/[\x00-\xFF]/g)||[]).length,w=A.substr(A.length-1).charCodeAt(0),y=0;if(v>this.maxLength){y=(w>0&&w<255)?1:2;x.value=A.substr(0,A.length-y)}};var s=function(v){if(q.getCharCode(v)===13){t.apply(this,arguments)}};var u=function(w){w=w||{};var x=document.createElement("SPAN");if(w.className){a.addClass(x,w.className)}x.innerHTML="<input type='text' /><button>\u786e\u5b9a</button>";q.on(x.getElementsByTagName("BUTTON")[0],"click",t,this,true);var v=x.getElementsByTagName("INPUT")[0];if(w.maxLength>0){v.setAttribute("maxlength",w.maxLength);if(w.maxLengthUnit==="byte"){q.on(v,"keypress",r,this,true);q.on(v,"keydown",r,this,true);q.on(v,"keyup",r,this,true)}}q.on(v,"keydown",s,this,true);this.maxLength=w.maxLength;this.maxLengthUnit=w.maxLengthUnit;this.elEditor=x;this.elInput=v;this.onCancel=new h.CustomEvent("EditorCancel");this.onChanged=new h.CustomEvent("EditorChanged")};f.augmentObject(u.prototype,{elCurrentEdit:null,elHolder:null,elEditor:null,elInput:null,onCancel:null,onChanged:null,maxLength:0,isEditing:false,decorate:function(w,x,v){v=v||{};x=x===undefined?(w.value||w.innerHTML):x;if(this.elCurrentEdit){this.cancel();this.onCancel.unsubscribe();this.onChanged.unsubscribe()}v.onCancel&&this.onCancel.subscribe(v.onCancel);v.onChanged&&this.onChanged.subscribe(v.onChanged);var y=w.cloneNode(true);while(y.lastChild){y.removeChild(y.lastChild)}y.appendChild(this.elEditor);w.parentNode.replaceChild(y,w);this.elInput.focus();this.elInput.select();this.isEditing=true;this.elInput.value=x;this.elCurrentEdit=w;this.elHolder=y},recover:function(){var v=this.elHolder,w=this.elCurrentEdit;if(w&&v&&v.parentNode){v.parentNode.replaceChild(w,v);this.elHoder=null;this.elCurrentEdit=null;this.isEditing=false}},cancel:function(){var v=this.elCurrentEdit;this.recover();this.onCancel.fire(this.elInput.value,v)}});return u})());c.add("JSDataSource",(function(){var s=function(u,t){if(this.loaded){t[0].apply(t[2]?t[1]:this,[{type:"Load",dataSource:this,data:this.data},t[1]])}};var r=function(t){var u=h.CustomEvent.FLAT;this.onLoaded=new h.CustomEvent("DataSourceLoaded",this,true,u);this.onLoaded.subscribeEvent.subscribe(s,this,true);this.onChanged=new h.CustomEvent("DataSourceChanged",this,true,u);this.onReloaded=new h.CustomEvent("DataSourceReloaded",this,true,u)};f.augmentObject(r.prototype,{data:null,loaded:false,onLoaded:null,onChanged:null,onReloaded:null,load:function(t){this.loaded=true;this.data=t;this.onLoaded.fire({type:"Load",dataSource:this,data:this.data})},setData:function(t){this.data=t;this.onReloaded.fire({type:"Reload",dataSource:this,data:this.data})},change:function(t){var u=this.onChanged;f.augmentObject(t,{dataSource:this,data:this.data});u.fire(t)}});return r})());c.add("SimplePager",(function(){var r=function(s){this.pageSize=s.pageSize||20;this.elContainer=a.get(s.elContainer);q.on(this.elContainer,"click",this._handleClick,this,true);this.onSwitchPage=s.onSwitchPage};f.augmentObject(r.prototype,{elContainer:null,pageSize:0,pageCount:0,itemCount:0,currentPage:0,onSwitchPage:null,render:function(){var s=this.pageCount,v=this.currentPage,u=[];if(s>1){u.push('<a class="page-up">\u4e0a\u4e00\u9875</a>')}for(var t=1;t<=s;++t){if(t!==v){u.push('<a href="#">'+t+"</a>")}else{u.push("<strong>"+t+"</strong>")}}if(s>1){u.push('<a class="page-down">\u4e0b\u4e00\u9875</a>')}this.elContainer.innerHTML=u.join("")},setItemCount:function(t,s){if(t!=this.itemCount){this.itemCount=t;this.pageCount=Math.ceil(t/this.pageSize)}this.switchToPage(s?this.currentpage:1)},switchToPage:function(s){if(s<1){s=1}if(s>this.pageCount){s=this.pageCount}this.currentPage=s;this.render();this.onSwitchPage&&this.onSwitchPage(s)},_handleClick:function(u){var t=q.getTarget(u),s=this.currentPage;q.preventDefault(u);switch(true){case a.hasClass(t,"page-up"):s--;break;case a.hasClass(t,"page-down"):s++;break;case t.tagName.toUpperCase()==="A":s=parseInt(t.innerHTML,10);break;default:break}this.switchToPage(s)}});return r})());c.add("FaceSelector",(function(){var t={apiFaces:"comment:/json/face_json.htm"};var x={params:null};var y=null;var u=function(A,z){q.on(A,"click",function(C){var B=q.getTarget(C);if((B.tagName.toUpperCase()!=="A"&&(B=B.parentNode).tagName.toUpperCase()!=="A")||!B.getAttribute("data-code")){return}q.preventDefault(C);q.stopPropagation(C);var D=z.params;D.popupHandle&&D.popupHandle.hide();D.callback&&D.callback({faceId:B.getAttribute("data-code"),faceTitle:B.getAttribute("title")||"",faceUrl:B.getElementsByTagName("IMG")[0].src})})};var s=function(){var z=document.createElement("DIV");a.addClass(z,"sns-popup popup-translucent popup-faces");z.innerHTML='<div class="hd naked"><span class="horn">^</span></div><div class="bd clearfix">loading ...</div>';document.body.appendChild(z);u(z,x);s=function(){return z};return s.apply(this,arguments)};var w=function(){if(!this.popup.getAttribute("face-loaded")){var z=a.getElementsByClassName("bd","DIV",this.popup)[0];setTimeout(function(){r(function(F){var A=F.allfaces;y=F;var D=[],C=0,B=document.createDocumentFragment(),G=document,H,E;for(;C<A.length;++C){E=A[C];H=G.createElement("A");H.setAttribute("data-code",TB.common.unescapeHTML(E.code));H.setAttribute("title",E.title);H.innerHTML=TB.common.formatMessage("<img src='{imgUrl}' alt='{title}' />",E);B.appendChild(H)}z.innerHTML="";z.appendChild(B)})},0);this.popup.setAttribute("face-loaded",true)}};var v=function(B,z){var A=null;if(B&&B.elTrigger){A=TB.widget.SimplePopupPlus.decorate(B.elTrigger,s(),f.merge({position:"bottom",align:"left",height:270,eventType:z?"NonExistsEvent":"click",offset:[-20,6],onShow:function(){w.apply(this,arguments);x.params=B;var C=a.getElementsByClassName("horn","SPAN",this.popup)[0];a[this.config.align==="right"?"addClass":"removeClass"](C,"right")}},B.popupConfig||{}));B.popupHandle=A}return A};var r=function(A){if(y){A&&A(y)}else{var z=c.get("FaceSelector");z.loadFaces=function(B){y=B;A&&A(y)};window.FaceSelector=z;b.script(e.buildURI(e.getApiURI(t.apiFaces),"callback=FaceSelector.loadFaces"),{charset:"gbk"})}};return{init:function(z){f.augmentObject(t,z,true)},preload:function(){r(function(z){})},getAllFaces:function(){if(y){return y.allfaces}return[]},fillContainer:function(B){var A=a.get(B.elContainer),z=null;setTimeout(function(){r(function(E){var D=E.fashion;A.innerHTML='<a class="more-smile" href="#">\u66f4\u591a\u8868\u60c5</a>';u(A,{params:B});var C=a.getElementsByClassName("more-smile","A",A)[0];B.elTrigger=C;B.popupConfig=B.popupConfig||{};f.augmentObject(B.popupConfig,{align:"right",offset:[0,6]});v(B)})},0)},showDialog:function(A){var z=a.get(A.elTrigger);if(!z.popupHandle){z.popupHandle=v(A,true)}z.popupHandle&&z.popupHandle.show()}}})());c.add("CommentBox",(function(){var H={postProxy:"comment:/proxy.htm",pageSize:10,apiGetList:"comment:/json/comment_list.htm",apiPostNew:"comment:/json/insert_comment.htm?action=comment%2FCommentAction&event_submit_do_insert_comment=true",apiDelete:"comment:/json/delete_comment.htm",moreCommentUrl:"",hidePostBox:false};var x='<div class="sns-reply"><h2 class="{titleClass}">{title}</h2><div class="new-reply {hidePostBox}" id="comment-box-top"><form target="comment-post-proxy" class="reply-form" action="{apiPostNew}" method="post"><fieldset><legend>&nbsp;&nbsp;&nbsp;&nbsp;</legend><div class="sns-msg" style="display:none"><p  style="display: block;color:#999;">\u5df2\u7ecf\u8f93\u5165<em id="J_CommentBox_AlreadyNum" style="font-weight:bold">0</em>\u4e2a\u5b57\u4e86,\u8fd8\u6709<em id="J_CommentBox_LeaveNum"  style="font-weight:bold">500</em>\u4e2a\u5b57\u53ef\u4ee5\u8f93\u5165\u3002</p></div><textarea name="content"></textarea><span id="J_AlreadyNum"></span><div class="smile"></div><p class="submit act skin-blue"><span id="J_CheckCode" class="checkcode sns-nf" style="float:left;visibility:hidden"><span>\u9a8c\u8bc1\u7801\uff1a</span><input name="TPL_checkcode" size="4" maxlength="4" class="f-txt" tabindex="3" style="width: 5em;" type="text"><img id="J_CheckCodeImg"  style="vertical-align: middle;" width="85" height="35"><span style="margin:0 10px 0 0;">(\u4e0d\u533a\u5206\u5927\u5c0f\u5199)</span><a href="#" class="newCheckCode">\u6362\u4e00\u5f20</a></span><label><input name="isWhisper" type="checkbox" value="1"  /> \u6084\u6084\u8bdd</label><span class="btn n-btn"><a href="#" class="post">\u5199\u597d\u4e86</a></span></p><input type="hidden" name="typeId" value="" /><input type="hidden" name="targetKey" value="" /><input type="hidden" name="targetUrl" value="" /><input type="hidden" name="targetTitle" value="" /><input type="hidden" name="recUserId" value="" /><input type="hidden" name="proUserId" value="" /><input type="hidden" name="recCommentId" value="" /><input type="hidden" name="replyToUserId" value="" /><input class="J_tbtoken" type="hidden" name="" value="" /></fieldset></form></div><div class="reply-list"><ul><li>loading ...</li></ul></div><div class="sns-comment-pagination-contl {hidePagination}"></div><p class="more {hideMoreComment}"><a href="{moreCommentUrl}">\u770b\u66f4\u591a\u7559\u8a00</a></p><iframe name="comment-post-proxy" src="{postProxy}" frameborder="0" style="height:0px;width:0px"></iframe></div>';var w=function(L){b.script(e.buildURI(e.getApiURI(H.apiGetList),"targetKey="+encodeURIComponent(H.targetKey),"typeId="+encodeURIComponent(H.typeId),"pageSize="+encodeURIComponent(H.pageSize),"page="+encodeURIComponent(L||"1"),"hidePostBox="+(H.hidePostBox?true:false),"callback=CommentBox.onLoadComments"),{charset:"gbk"})};var F=e.doReflow;var y=function(){var L=H.elIframe;y=function(){var M=L.cloneNode(true);M.src=H.postProxy;L.parentNode.replaceChild(M,L);L=M}};var t=function(L){q.on(L,"click",function(S){var P=q.getTarget(S);if(!a.hasClass(P,"icon-comment")){return}q.preventDefault(S);var R=a.getAncestorByTagName(P,"LI"),Q=a.getElementsByClassName("intro","P",R)[0],T=a.getElementsByClassName("name","SPAN",R)[0],M=a.getChildren(R.getElementsByTagName("DD")[0])[1],O=T.innerHTML;var N=R.getAttribute("data-cid");H.elForm.elements.isWhisper.checked=a.getElementsByClassName("icon-modify-lock","SPAN",Q).length>0;H.elForm.elements.recCommentId.value=N;H.replyToUser="\u56de\u590d"+O+"\uff1a";H.replyToUserId=R.getAttribute("data-uid");H.replyToContent=R.getAttribute("data-content");setTimeout(function(){H.elTextArea.focus();H.elTextArea.value=H.replyToUser;H.elTextArea.focus()},0);location.hash="comment-box-top"})};var s=false;var D=function(L){q.on(L,"click",function(R){var O=q.getTarget(R),Q=H.elTextArea,P=f.trim(Q.value);q.preventDefault(R);if(!e.checkAndShowLogin({autoCallback:true})){e.fixTextAreaFocus(H.elTextArea);e.fixTextAreaFocus(H.elForm.elements.TPL_checkcode);s=true;return}var N=H.replyToUser,T=H.replyToUserId,S=H.replyToContent,M={content:P,isWhisper:H.elForm.elements.isWhisper.checked,replyToUser:H.replyToUser,replyToUserId:H.replyToUserId,replyToContent:H.replyToContent};if(P===""){e.showMessage("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\u6216\u8005\u5168\u662f\u7a7a\u683c");return}if(N===P){e.showMessage("\u8bf7\u8f93\u5165\u56de\u590d\u5185\u5bb9");return}if(P.length>500){e.showMessage("\u5185\u5bb9\u8d85\u8fc7 500 \u4e2a\u5b57\uff0c\u8bf7\u9002\u5f53\u5220\u51cf\u4e00\u4e9b");return}if(N&&P.substr(0,N.length)===N){M.replyToUserId=T;M.replyToContent=S;M.content=P.substr(N.length);H.elForm.elements.replyToUserId.value=T}else{H.elForm.elements.recCommentId.value=""}A();H.elForm.submit();H.elForm.elements.isWhisper.checked=false;C&&C.checklength();H.lastCommentData=M})};var B=function(N){var M={doDelete:null};var L=function(){var O=new SNS.sys.Popup({title:"\u5c0f\u63d0\u793a",autoShow:false,hideMask:true,type:"error",content:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u6761"+(H.typeId===1?"\u7559\u8a00":"\u8bc4\u8bba")+"\u5417?",buttons:[{text:"\u786e\u5b9a",func:function(){this.hide();M.doDelete&&M.doDelete()}},{text:"\u53d6\u6d88",func:function(){this.hide()}}]});L=function(){return O};return L()};q.on(N,"click",function(R){var P=q.getTarget(R);if(!a.hasClass(P,"icon-del")){return}q.preventDefault(R);var Q=a.getAncestorByTagName(P,"LI"),O=Q.getAttribute("data-cid");if(!e.checkAndShowLogin({autoCallback:true})){e.fixTextAreaFocus(H.elTextArea);return}M.doDelete=function(){a.setStyle(P.parentNode,"display","none");b.script(e.buildURI(e.getApiURI(H.apiDelete),"targetKey="+encodeURIComponent(H.targetKey),"typeId="+encodeURIComponent(H.typeId),"id="+encodeURIComponent(O),"callback=CommentBox.onDeleteComment"),{charset:"gbk"})};L().show()})};var K=function(L){q.on(L,"click",function(P){var N=q.getTarget(P);if(N.tagName.toUpperCase()==="A"){q.preventDefault(P);var M=(N.getAttribute("href")||"")+"",O=parseInt(M.substr(M.lastIndexOf("page=")+5),10);M&&w(O)}})};var r=false;var E=function(M){var L=M||1;if(!r){e.getCheckCodeURI(function(N){H.elForm.elements.TPL_checkcode.value="";if(N.flag==1){a.get("J_CheckCodeImg").src=SNS.sys.Helper.addStamp(N.uri);H.checkcodeURI=N.uri;a.setStyle("J_CheckCode","visibility","visible");r=true}else{if(N.flag==0){a.setStyle("J_CheckCode","visibility","hidden")}}},{typeId:H.typeId,needOrDisplay:L})}};var J=function(){r=false;E(2)};var z=function(L){q.on(L,"click",function(N){var M=q.getTarget(N);if(M.className.toLowerCase()==="newcheckcode"){q.preventDefault(N);J()}})};var v=function(N){if(!N.elForm){return}var P=N.elForm,L=P.elements;for(var O=0;O<L.length;++O){var Q=L[O],M=Q.name;if(Q&&M&&N[M]!==undefined){Q.value=N[M]}}};var G=function(M){var N=M||"",O=N.split("=");if(N&&O.length===2){var L=a.getElementsByClassName("J_tbtoken","INPUT",H.elContainer)[0];if(L){L.name=O[0];L.value=O[1]}}};var u=0;var C=null;var I=null;var A=function(){var L=function(){y();e.showMessage("\u767b\u5f55\u8d85\u65f6\u6216\u7f51\u7edc\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\u6216\u68c0\u67e5\u7f51\u7edc\u540e\u91cd\u65b0\u53d1\u8868")};A=function(){I&&I.cancel();I=f.later(5000,null,L)};A()};return{onPostNew:function(L,P){I&&I.cancel();y();P=P||{};if(L===null){if(P.message=="NoTrueName"){e.showMessage('\u4f60\u8fd8\u6ca1\u6709\u586b\u5199\u771f\u5b9e\u59d3\u540d\uff0c\u6682\u65f6\u4e0d\u80fd\u53d1\u8868\u5185\u5bb9\uff0c\u8bf7\u5148<a href="http://jianghu.taobao.com/admin/user/baseInfoSet.htm">\u586b\u5199</a>\u771f\u5b9e\u59d3\u540d')}else{e.showMessage(P.message||"\u53d1\u751f\u672a\u77e5\u9519\u8bef")}return}H.elTextArea.value="";var Q=document.createElement("DIV");Q.innerHTML=f.trim(L);var N=H.elList,M=Q.getElementsByTagName("LI")[0];var O=a.getChildren(N);if(O.length>H.pageSize-1){N.removeChild(O[O.length-1])}if(N.firstChild){N.insertBefore(M,N.firstChild)}else{N.appendChild(M)}e.fixHover({elements:[M],hoverClass:"hover"});TB.ww&&TB.ww.lightAll(M);y();H.addCallback&&H.addCallback(H.lastCommentData);u++;H.countCallback&&H.countCallback(u);r=false;a.setStyle("J_CheckCode","visibility","hidden");F()},onDeleteComment:function(N){if(N&&""+N.status==="1"){var M=""+N.commentId;var P=a.getElementBy(function(Q){return Q.getAttribute("data-cid")===M},"LI",H.elContainer);var L={opacity:{to:0}};if(YAHOO.env.ua.ie!==6){L.height={to:0}}if(P){var O=new h.Anim(P,L,0.2);O.onComplete.subscribe(function(){P.parentNode.removeChild(P);F()});O.animate()}u--;H.countCallback&&H.countCallback(u);H.deleteCallback&&H.deleteCallback({success:""+N.status==="1"})}else{e.showMessage("\u5220\u9664\u8bc4\u8bba\u5931\u8d25")}},onLoadComments:function(O,M,N,L){G(L);H.elList.innerHTML=O;H.elPagination&&(H.elPagination.innerHTML=M||"");e.fixHover({elements:a.getChildren(H.elList),hoverClass:"hover"});TB.ww&&TB.ww.lightAll(H.elList);u=N;H.countCallback&&H.countCallback(u);if(H.moreCommentUrl&&N>H.pageSize){a.removeClass(H.elMoreLink,"hidden")}F()},reload:function(L){f.augmentObject(H,L,true);v(H);w()},init:function(L){f.augmentObject(H,L,true);H.apiPostNew=e.buildURI(e.getApiURI(H.apiPostNew),"callback=CommentBox.onPostNew");window.CommentBox=this;var M=this;q.onDOMReady(function(){document.domain=e.pickDocumentDomain(2);H.postProxy=e.getApiURI(H.postProxy,true,true);var P=a.get(H.elContainer);P.innerHTML=TB.common.formatMessage(x,{titleClass:H.title?"":"hidden",title:H.title||"",postProxy:H.postProxy,apiPostNew:e.getApiURI(H.apiPostNew,true,true),moreCommentUrl:H.moreCommentUrl||"",hideMoreComment:"hidden",hidePagination:H.moreCommentUrl?"hidden":"",hidePostBox:H.hidePostBox?"hidden":""});H.elContainer=P;H.elIframe=P.getElementsByTagName("IFRAME")[0];var O=P.getElementsByTagName("textarea")[0];H.elTextArea=O;H.elWordCountMsg=a.getElementsByClassName("sns-msg","DIV",P)[0];q.on(O,"focus",function(){a.setStyle(H.elWordCountMsg,"display","block");q.removeListener(O,"focus",arguments.callee)});q.on(O,"focus",function(){E()});C=SNS.sys.countLetter.decorate(O,{already:"J_CommentBox_AlreadyNum",leave:"J_CommentBox_LeaveNum",num:500});var N=a.getChildren(a.getElementsByClassName("reply-list","DIV",P)[0])[0];H.elList=N;H.elForm=H.elContainer.getElementsByTagName("FORM")[0];H.elPagination=a.getElementsByClassName("sns-comment-pagination-contl","DIV",H.elContainer)[0];H.elMoreLink=a.getElementsByClassName("more","P",H.elContainer)[0];v(H);t(H.elContainer);B(H.elContainer);D(a.getElementsByClassName("post","A",H.elForm)[0]);K(H.elPagination);z(H.elContainer);w();e.fixCursorPosition(O);c.get("FaceSelector").fillContainer({elContainer:a.getElementsByClassName("smile","DIV",P)[0],callback:function(Q){if(O.value.length+Q.faceId.length<=500){e.recoverCursorPos(O);e.insertText(O,Q.faceId);C.checklength()}}})});M.init=function(){}}}})());c.add("FriendsGroupSelector",(function(){var L={};var B=h.CustomEvent,H=YAHOO.util.CustomEvent.FLAT,D=new B("onGroupAdded",null,true,H),z=new B("onGroupDeleted",null,true,H),u=new B("onGroupEdited",null,true,H),v=new B("onGroupChanged",null,true,H),A=new B("onShow",null,true,H),s=new B("onHide",null,true,H);var t=null;var M=function(N){return SNS.app.Modules.get(N)};var C=function(R){var Q=document.createElement("DIV"),T=document.createElement("UL");a.addClass(Q,"sns-popup popup-translucent popup-groupselector");Q.innerHTML='<div class="hd naked"></div><div class="bd"></div>';a.setStyle(Q,"display","none");document.body.appendChild(Q);var N=a.getElementsByClassName("bd","DIV",Q)[0];N.appendChild(T);var W=document.createElement("LI");W.setAttribute("data-groupid","all");W.innerHTML='<a href="javascript:void(0)"><span class="group-name">\u6240\u6709\u597d\u53cb</span>(<span class="group-count"></span>)</a>';T.appendChild(W);var V=document.createElement("DIV");a.addClass(V,"addgroup");V.innerHTML="<a href='#' class='act-addgroup'><span class='sns-icon icon-add'>\u65b0\u589e\u7ec4</span></a>";N.appendChild(V);var P='<a href="javascript:void(0)"><span class="operate"><span class="del" href="#">\u5220\u9664</span><span class="edit" href="#">\u7f16\u8f91</span></span><span class="group-name">{groupName}</span>(<span class="group-count">{groupCount}</span>)</a>';var S=function(){a.setStyle(V,"display",L.dataSource.data.length>=30?"none":"")};var O=YAHOO.env.ua.ie===6?function(X){a[X.data.length>10?"addClass":"removeClass"](T,"fixed")}:function(){};L.dataSource.onChanged.subscribe(function(X){if(X.type==="GroupAdded"&&X.from!=="FriendGroupSelector"){var Z=document.createElement("LI");Z.innerHTML=TB.common.formatMessage(P,X);Z.setAttribute("data-groupid",X.groupId);T.appendChild(Z)}S();O(X)});L.dataSource.onLoaded.subscribe(function(ac){var X=ac.dataSource,Z=ac.data,ad,aa,af,ae=0,ag;for(var ab=0;ab<Z.length;++ab){ad=Z[ab];ag=document.createElement("LI");ag.innerHTML=TB.common.formatMessage(P,Z[ab]);aa=Z[ab].groupId;af=Z[ab].groupName;ag.setAttribute("data-groupid",aa);if(af==="\u672a\u5206\u7ec4"){ag.firstChild.removeChild(ag.firstChild.firstChild)}T.appendChild(ag);ae+=1*ad.groupCount}a.getElementsByClassName("group-count","SPAN",W)[0].innerHTML=ae;w("\u6240\u6709\u597d\u53cb("+ae+")");S();O(ac)});q.on(V,"click",function(aa){var X=q.getTarget(aa);q.stopEvent(aa);var Z=document.createElement("LI");Z.innerHTML=TB.common.formatMessage(P,{groupName:"new"+new Date().getTime(),groupCount:"0"});a.addClass(V,"hidden");T.appendChild(Z);t.cancel();t.decorate(Z,"",{onCancel:function(){t.onCancel.unsubscribe();t.onChanged.unsubscribe();T.removeChild(Z);a.removeClass(V,"hidden")},onChanged:function(ad,ac){t.onCancel.unsubscribe();t.onChanged.unsubscribe();a.removeClass(V,"hidden");var ae=ac[0],ab=a.getElementsByClassName("operate","SPAN",Z)[0];a.setStyle(ab,"display","none");a.getElementsByClassName("group-name","SPAN",Z)[0].innerHTML=TB.common.escapeHTML(ae);M("FriendsGroup").addGroup(ae,function(af,ag){if(af.status==="1"){if(af.msg==="SUCCESS"){Z.setAttribute("data-groupid",af.groupId);a.setStyle(ab,"display","");L.dataSource.change({type:"GroupAdded",from:"FriendGroupSelector",groupId:af.groupId,groupName:ae,groupCount:0})}else{e.showMessage(ag);T.removeChild(Z)}}else{e.showMessage("\u672a\u77e5\u9519\u8bef");T.removeChild(Z)}})}})});q.on(N,"click",function(ac){var ab=q.getTarget(ac),X=a.getAncestorByTagName(ab,"LI");q.preventDefault(ac);if(t.isEditing||a.hasClass(ab,"edit")||a.hasClass(ab,"del")||!(X&&X.getAttribute("data-groupid"))){return}var aa=X.getAttribute("data-groupid"),Z=r(X);v.fire({groupId:aa,groupTitle:Z})});q.on(N,"click",function(ab){var Z=q.getTarget(ab);if(!a.hasClass(Z,"edit")){if(!a.isAncestor(t.elEditor,Z)&&!a.hasClass(Z,"icon-add")){t.cancel()}return}q.stopEvent(ab);var aa=Z.parentNode.parentNode.parentNode,X=a.getElementsByClassName("group-name","SPAN",aa)[0];t.decorate(aa,TB.common.unescapeHTML(X.innerHTML),{onChanged:function(ah,ad){var ag=f.trim(ad[0]),aj=ad[1],af=aj.getAttribute("data-groupid"),ae=a.getElementsByClassName("group-name","SPAN",aj)[0],ai=f.trim(ae.innerHTML);if(ag===""){e.showMessage("\u8bf7\u8f93\u5165\u7ec4\u540d\uff01");return}if(ag===TB.common.unescapeHTML(ai)){e.showMessage("\u65b0\u7ec4\u540d\u4e0e\u539f\u7ec4\u540d\u4e00\u6837\uff01");return}ae.innerHTML=TB.common.escapeHTML(ag);var ac=r(aj);M("FriendsGroup").modifyGroupName(af,ag,function(ak,al){e.showMessage(ak?"\u6210\u529f\u66f4\u6539\u4e86\u7ec4\u540d!":al);if(ak){L.dataSource.change({type:"GroupNameChanged",groupId:af,newGroupName:a.getElementsByClassName("group-name","SPAN",aj)[0].innerHTML});c.get("FriendsGroupSelector").changeGroup(af)}else{ae.innerHTML=ai}})}})});var U=function(aa){var ad={groupId:""};var ab=c.get("FriendsGroupSelector");var X=function(ae,af){if(ae){L.dataSource.change({type:"GroupDeleted",groupId:ad.groupId});if(ab.getCurrentGroup()===ad.groupId){ab.changeGroup("ungrouped")}}else{e.showMessage(af)}};var Z={text:"\u786e\u5b9a",func:function(){this.hide();M("FriendsGroup").deleteGroup(ad.groupId,X)}};var ac=new SNS.sys.Popup({title:"\u5c0f\u63d0\u793a",content:"\u8be5\u7528\u6237\u7ec4\u5220\u9664\u540e\uff0c\u7ec4\u6210\u5458\u4e0d\u4f1a\u5220\u9664\uff0c\u5c06\u663e\u793a\u5728\u201c\u672a\u5206\u7ec4\u201d\u4e2d\uff0c\u786e\u5b9a\u7ee7\u7eed\u5417\uff1f",type:"error",hideMask:true,autoShow:false,buttons:[Z,{text:"\u53d6\u6d88",func:function(){this.hide()}}]});U=function(ae){ad.groupId=ae;ac.show()};return U(aa)};q.on(N,"click",function(ab){var Z=q.getTarget(ab);if(!a.hasClass(Z,"del")){return}q.stopEvent(ab);E();var aa=a.getAncestorByTagName(Z,"LI"),X=aa.getAttribute("data-groupid");U(X)});C=function(){return Q};return C.apply(this,arguments)};var r=function(N){var P=N.getAttribute("data-groupid"),O=a.getElementsByClassName("group-name","SPAN",N)[0].innerHTML+"("+a.getElementsByClassName("group-count","SPAN",N)[0].innerHTML+")";return O};var J=function(O){var N=O.groupTitle,P=O.groupId;if(!N&&P==="all"){var Q=I("all");N=r(Q)}a.get(this.elLabel).innerHTML=r(I(P));this.hide()};var K=function(O,P){var N=a.getElementsByClassName("group-count","SPAN",O)[0];if(N){var Q=parseInt(N.innerHTML,10);P=parseInt(P,10)||0;N.innerHTML=Q+P}};var I=function(N){var O=C().getElementsByTagName("UL")[0];return a.getElementBy(function(P){return P.getAttribute("data-groupid")===N},"LI",O)};var G=function(N){var O,Q,P;switch(N.type){case"GroupDeleted":O=N.groupId;P=I(O);P.parentNode.removeChild(P);break;case"AdjustGroupCount":O=N.groupId;P=I(O);K(P,N.adjustCount);break;case"MoveFriend":O=N.oldGroupId;P=I(N.oldGroupId);P&&K(P,-1);if(x!=="all"){w(r(P))}O=N.newGroupId;P=I(N.newGroupId);P&&K(P,+1);break;case"DelFriend":O=N.GroupId;P=I(N.GroupId);elGroup1=I("all");P&&K(P,-1);elGroup1&&K(elGroup1,-1);break;case"GroupAdded":break;default:break}};var w=function(Q){var P=I(x);var N=r(P);for(var O=0;O<F.length;++O){a.get(F[O].elLabel).innerHTML=N}};var y={elTrigger:null,elLabel:null,popup:null,maxGroupNameLen:"16bytes",changeGroup:function(N){c.get("FriendsGroupSelector").changeGroup(N)},show:function(){this.popup.show();A.fire()},hide:function(){this.popup.hide();s.fire()},popupConfig:{eventType:"click",position:"bottom",align:"left",onShow:null,onHide:null},events:{onChangeGroup:null,onGroupAdded:null,onGroupDeleted:null,onGroupEdited:null}};var F=[],x="all";var E=function(){for(var N=0;N<F.length;++N){F[N].hide()}};return{getCurrentGroup:function(){return x},decorate:function(Q){var S=Q;f.augmentObject(S,y);S.elLabel=S.elLabel||S.elTrigger;f.augmentObject(S.events,y.events);f.augmentObject(S.popupConfig,y.popupConfig);var O=S.popupConfig,P=a.get(S.elLabel).innerHTML;var N=O.onHide;O.onHide=function(){t.cancel();N&&N.apply(O,arguments)};q.on(document,"click",function(V){var U=q.getTarget(V),T=a.get(Q.elTrigger);if(U==T||a.isAncestor(T,U)||a.isAncestor(C(),U)){return}S.hide()});a.get(Q.elLabel).innerHTML="loading ...";v.subscribe(J,S,true);var R=S.events;R.onGroupAdded&&D.subscribe(R.onGroupAdded,S,true);R.onGroupDeleted&&z.subscribe(R.onGroupDeleted,S,true);R.onGroupEdited&&u.subscribe(R.onGroupEdited,S,true);R.onGroupChanged&&v.subscribe(R.onGroupChanged,S,true);S.popup=TB.widget.SimplePopupPlus.decorate(S.elTrigger,C(P),S.popupConfig);F.push(S);return S},changeGroup:function(Q){var R,N="",P=L.dataSource.data;if(Q==="all"){N=""}else{if(Q==="ungrouped"){for(var O=0;O<P.length;++O){Q=P[O].groupId;if(P[O].groupName==="\u672a\u5206\u7ec4"){break}}}R=P["group"+Q];if(R){N=R.groupName+"("+R.groupCount+")"}}v.fire({groupId:Q,groupTitle:N})},addGroup:function(N){D.fire(N)},deleteGroup:function(N){z.fire(N)},editGroup:function(N,O){u.fire(N,O)},init:function(N){f.augmentObject(L,N,true);var P=L.maxGroupNameLen,O={className:"newgroup"};if(P){O.maxLength=parseInt(P.substr(0,P.length-5),10);O.maxLengthUnit=P.substr(P.length-5,4)}t=new (c.get("InlineEditor"))(O);L.dataSource.onChanged.subscribe(G);v.subscribe(function(Q){x=Q.groupId})}}})());c.add("blogGroupSelector",(function(){var K={};var B=h.CustomEvent,H=YAHOO.util.CustomEvent.FLAT,D=new B("onGroupAdded",null,true,H),z=new B("onGroupDeleted",null,true,H),u=new B("onGroupEdited",null,true,H),v=new B("onGroupChanged",null,true,H),A=new B("onShow",null,true,H),s=new B("onHide",null,true,H);var t=null;var L=function(M){return SNS.app.Modules.get(M)};var C=function(Q){var P=document.createElement("DIV"),S=document.createElement("UL");a.addClass(P,"sns-popup popup-translucent popup-groupselector");P.innerHTML='<div class="hd naked"></div><div class="bd"></div>';a.setStyle(P,"display","none");document.body.appendChild(P);var M=a.getElementsByClassName("bd","DIV",P)[0];M.appendChild(S);var U=document.createElement("DIV");a.addClass(U,"addgroup");U.innerHTML="<a href='#' class='act-addgroup'><span class='sns-icon icon-add'>\u65b0\u589e\u5206\u7c7b</span></a>";M.appendChild(U);var O='<a href="javascript:void(0)"><span class="operate"><span class="del" href="#">\u5220\u9664</span><span class="edit" href="#">\u7f16\u8f91</span></span><span class="group-name">{groupName}</span></a>';var R=function(){a.setStyle(U,"display",K.dataSource.data.length>=30?"none":"")};var N=YAHOO.env.ua.ie===6?function(V){a[V.data.length>10?"addClass":"removeClass"](S,"fixed")}:function(){};K.dataSource.onChanged.subscribe(function(V){if(V.type==="GroupAdded"&&V.from!=="FriendGroupSelector"){var W=document.createElement("LI");W.innerHTML=TB.common.formatMessage(O,V);W.setAttribute("data-groupid",V.groupId);S.appendChild(W)}R();N(V)});K.dataSource.onLoaded.subscribe(function(aa){var V=aa.dataSource,W=aa.data,ab,X,ad,ac=0,ae;for(var Z=0;Z<W.length;++Z){ab=W[Z];ae=document.createElement("LI");ae.innerHTML=TB.common.formatMessage(O,W[Z]);X=W[Z].groupId;ad=W[Z].groupName;ae.setAttribute("data-groupid",X);if(ad==="\u4e2a\u4eba\u65e5\u8bb0"){ae.firstChild.removeChild(ae.firstChild.firstChild)}S.appendChild(ae);ac+=1*ab.groupCount}w("\u6240\u6709\u597d\u53cb("+ac+")");R();N(aa)});q.on(U,"click",function(X){var V=q.getTarget(X);q.stopEvent(X);var W=document.createElement("LI");W.innerHTML=TB.common.formatMessage(O,{groupName:"new"+new Date().getTime(),groupCount:"0"});a.addClass(U,"hidden");S.appendChild(W);t.cancel();t.decorate(W,"",{onCancel:function(){t.onCancel.unsubscribe();t.onChanged.unsubscribe();S.removeChild(W);a.removeClass(U,"hidden")},onChanged:function(ab,aa){t.onCancel.unsubscribe();t.onChanged.unsubscribe();a.removeClass(U,"hidden");var ac=aa[0],Z=a.getElementsByClassName("operate","SPAN",W)[0];a.setStyle(Z,"display","none");a.getElementsByClassName("group-name","SPAN",W)[0].innerHTML=TB.common.escapeHTML(ac);L("blogGroup").addGroup(ac,function(ad,ae){if(ad.status==="1"){if(ad.msg==="SUCCESS"){W.setAttribute("data-groupid",ad.groupId);a.setStyle(Z,"display","");K.dataSource.change({type:"GroupAdded",from:"FriendGroupSelector",groupId:ad.groupId,groupName:ac,groupCount:0})}else{e.showMessage(ae);S.removeChild(W)}}else{e.showMessage("\u672a\u77e5\u9519\u8bef");S.removeChild(W)}})}})});q.on(M,"click",function(aa){var Z=q.getTarget(aa),V=a.getAncestorByTagName(Z,"LI");q.preventDefault(aa);if(t.isEditing||a.hasClass(Z,"edit")||a.hasClass(Z,"del")||!(V&&V.getAttribute("data-groupid"))){return}var X=V.getAttribute("data-groupid"),W=r(V);v.fire({groupId:X,groupTitle:W})});q.on(M,"click",function(Z){var W=q.getTarget(Z);if(!a.hasClass(W,"edit")){if(!a.isAncestor(t.elEditor,W)&&!a.hasClass(W,"icon-add")){t.cancel()}return}q.stopEvent(Z);var X=W.parentNode.parentNode.parentNode,V=a.getElementsByClassName("group-name","SPAN",X)[0];t.decorate(X,TB.common.unescapeHTML(V.innerHTML),{onChanged:function(af,ab){var ae=f.trim(ab[0]),ah=ab[1],ad=ah.getAttribute("data-groupid"),ac=a.getElementsByClassName("group-name","SPAN",ah)[0],ag=f.trim(ac.innerHTML);if(ae===""){e.showMessage("\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\uff01");return}if(ae===TB.common.unescapeHTML(ag)){e.showMessage("\u65b0\u5206\u7c7b\u540d\u4e0e\u539f\u5206\u7c7b\u540d\u4e00\u6837\uff01");return}var aa=r(ah);L("blogGroup").modifyGroupName(ad,ae,function(ai,aj){e.showMessage(ai?"\u6210\u529f\u66f4\u6539\u4e86\u5206\u7c7b\u540d!":aj);if(ai){ac.innerHTML=TB.common.escapeHTML(ae);t.cancel();t.onCancel.unsubscribe();t.onChanged.unsubscribe();K.dataSource.change({type:"GroupNameChanged",groupId:ad,newGroupName:a.getElementsByClassName("group-name","SPAN",ah)[0].innerHTML});c.get("blogGroupSelector").changeGroup(ad)}else{ac.innerHTML=ag}})}})});var T=function(X){var ab={groupId:""};var aa=c.get("blogGroupSelector");var V=function(ac,ad){if(ac){K.dataSource.change({type:"GroupDeleted",groupId:ab.groupId});if(aa.getCurrentGroup()===ab.groupId){aa.changeGroup("ungrouped")}}else{e.showMessage(ad)}};var W={text:"\u786e\u5b9a",func:function(){this.hide();L("blogGroup").deleteGroup(ab.groupId,V)}};var Z=new SNS.sys.Popup({title:"\u5c0f\u63d0\u793a",content:"\u8be5\u5206\u7c7b\u5220\u9664\u540e\uff0c\u65e5\u5fd7\u4e0d\u4f1a\u5220\u9664\uff0c\u5c06\u663e\u793a\u5728\u201c\u4e2a\u4eba\u65e5\u8bb0\u201d\u4e2d\uff0c\u786e\u5b9a\u7ee7\u7eed\u5417\uff1f",type:"error",hideMask:true,autoShow:false,buttons:[W,{text:"\u53d6\u6d88",func:function(){this.hide()}}]});T=function(ac){ab.groupId=ac;Z.show()};return T(X)};q.on(M,"click",function(Z){var W=q.getTarget(Z);if(!a.hasClass(W,"del")){return}q.stopEvent(Z);E();var X=a.getAncestorByTagName(W,"LI"),V=X.getAttribute("data-groupid");T(V)});C=function(){return P};return C.apply(this,arguments)};var r=function(M){var O=M.getAttribute("data-groupid"),N=a.getElementsByClassName("group-name","SPAN",M)[0].innerHTML;return N};var J=function(N){var M=N.groupTitle,O=N.groupId;if(!M&&O==="all"){var P=I("all");M=r(P);O=0}a.get(this.elLabel).innerHTML=r(I(O));a.get(this.elLabel).setAttribute("group-id",O);this.hide()};var I=function(M){var N=C().getElementsByTagName("UL")[0];return a.getElementBy(function(O){return O.getAttribute("data-groupid")===M},"LI",N)};var G=function(M){var N,P,O;switch(M.type){case"GroupDeleted":N=M.groupId;O=I(N);O.parentNode.removeChild(O);break;case"AdjustGroupCount":N=M.groupId;O=I(N);break;case"MoveFriend":N=M.oldGroupId;O=I(M.oldGroupId);if(x!=="all"){w(r(O))}N=M.newGroupId;O=I(M.newGroupId);break;case"GroupAdded":break;default:break}};var w=function(M){};var y={elTrigger:null,elLabel:null,popup:null,maxGroupNameLen:"16bytes",changeGroup:function(M){c.get("blogGroupSelector").changeGroup(M)},show:function(){this.popup.show();A.fire()},hide:function(){this.popup.hide();s.fire()},popupConfig:{eventType:"click",position:"bottom",align:"left",onShow:null,onHide:null},events:{onChangeGroup:null,onGroupAdded:null,onGroupDeleted:null,onGroupEdited:null}};var F=[],x="all";var E=function(){for(var M=0;M<F.length;++M){F[M].hide()}};return{getCurrentGroup:function(){return x},decorate:function(P){var R=P;f.augmentObject(R,y);R.elLabel=R.elLabel||R.elTrigger;f.augmentObject(R.events,y.events);f.augmentObject(R.popupConfig,y.popupConfig);var N=R.popupConfig,O=a.get(R.elLabel).innerHTML;var M=N.onHide;N.onHide=function(){t.cancel();M&&M.apply(N,arguments)};q.on(document,"click",function(U){var T=q.getTarget(U),S=a.get(P.elTrigger);if(T==S||a.isAncestor(S,T)||a.isAncestor(C(),T)){return}R.hide()});v.subscribe(J,R,true);var Q=R.events;Q.onGroupAdded&&D.subscribe(Q.onGroupAdded,R,true);Q.onGroupDeleted&&z.subscribe(Q.onGroupDeleted,R,true);Q.onGroupEdited&&u.subscribe(Q.onGroupEdited,R,true);R.popup=TB.widget.SimplePopupPlus.decorate(R.elTrigger,C(O),R.popupConfig);F.push(R);return R},changeGroup:function(P){var Q,M="",O=K.dataSource.data;if(P==="all"){M=""}else{if(P==="ungrouped"){for(var N=0;N<O.length;++N){P=O[N].groupId;if(O[N].groupName==="\u672a\u5206\u7ec4"){break}}}Q=O["group"+P];if(Q){M=Q.groupName+"("+Q.groupCount+")"}}v.fire({groupId:P,groupTitle:M})},addGroup:function(M){D.fire(M)},deleteGroup:function(M){z.fire(M)},editGroup:function(M,N){u.fire(M,N)},init:function(M){f.augmentObject(K,M,true);var O=K.maxGroupNameLen,N={className:"newgroup"};if(O){N.maxLength=parseInt(O.substr(0,O.length-5),10);N.maxLengthUnit=O.substr(O.length-5,4)}t=new (c.get("InlineEditor"))(N);K.dataSource.onChanged.subscribe(G);v.subscribe(function(P){x=P.groupId})}}})())});SNS.add("app.Friends",function(e){e.namespace("app.Friends");var o=YAHOO.util,a=o.Dom,q=o.Event,i=YAHOO.lang,l=o.Connect,c=o.Get,p=document;var f={};var d={feeds:{apiFeeds:"",initTab:"all",initType:"all",elTabList:"",elDropBtn:"",elDropList:"",elContent:""}};var h=SNS.app.Friends,g=SNS.sys.Helper;YAHOO.lang.augmentObject(h,{init:function(r){i.augmentObject(r,d);f=r}});var b=g.addModuleSupport(h);b.add("InviteFriend",(function(){var u={};var t=null,s=null,r=null;var v=function(w){q.on(w,"click",function(B){var A=q.getTarget(B);if(!a.hasClass(A,"icon-add-friend")){return}q.preventDefault(B);var z=a.getAncestorByTagName(A,"LI");var y=z.getAttribute("data-uid"),x=z.getAttribute("data-nick");t.showAddFriendDialog(1,y,x,{onMsgOK:function(D,C){}})})};return{init:function(w){i.augmentObject(u,w,true);var x=SNS.app.Modules;t=x.get("FriendsManage");v(u.elMaybeKnow)}}})());b.add("MySpaceFriends",(function(){var R={};var K=null,t=null,r=null,L=null;var D=function(S){q.on(S,"click",function(W){var U=q.getTarget(W);if(a.hasClass(U,"delete")){var V=U.parentNode.parentNode.getAttribute("data-uid");var T=new SNS.sys.Popup({title:"\u5220\u9664\u597d\u53cb",type:"error",content:'\u4f60\u786e\u5b9a\u5220\u9664"'+U.parentNode.parentNode.getAttribute("data-nick")+'"\u5417\uff1f',autoShow:false,hideMask:true,buttons:[{text:"\u786e\u5b9a",func:function(){var X=this;l.asyncRequest("POST",g.buildURI(g.getApiURI("portal:/admin/json/remove_friend.do?_input_charset=utf-8")),{success:function(aa){L.change({type:"DelFriend",GroupId:U.parentNode.parentNode.getAttribute("grounp-id")});U.parentNode.parentNode.style.display="none";X.hide();a.get("J_GroupSeletor").innerHTML=a.get("J_GroupSeletor").innerHTML.replace(/\(.*\)/ig,"("+(parseInt(a.get("J_GroupSeletor").innerHTML.replace(/.*\(/ig,"").replace(/\)/ig,""))-1)+")");var Z=new SNS.sys.Popup({title:"\u5220\u9664\u597d\u53cb",type:"error",content:"\u4f60\u5df2\u6210\u529f\u5220\u9664\u8be5\u597d\u53cb",autoShow:false,hideMask:true,buttons:[{text:"\u786e\u5b9a",func:function(){this.hide()}}]});Z.show()}},"remove_friend_id="+encodeURIComponent(V))}},{text:"\u53d6\u6d88",func:function(){this.hide()}}]});T.show();q.preventDefault(W)}})};var E=function(U){var V=null;var X=function(ae){var ad=q.getTarget(ae);if(a.hasClass(ad,"icon-group")&&a.hasClass(ad.parentNode,"operate-link")){return true}return false};var Z=function(ad){var ae=function(af){var ah=0,ai=[],ag=af.data,aj;for(;ah<ag.length;++ah){aj=ag[ah];ai[ai.length]=TB.common.formatMessage("<li class='group' data-groupid='{groupId}' data-groupname='{groupName}'><a href='#'>{groupName}</a></li>",aj)}ad.innerHTML=ai.join("");a[ag.length>10?"addClass":"removeClass"](ad,"fixed")};L.onLoaded.subscribe(ae)};var T=function(ad){var ae=function(af){return a.getElementBy(function(ag){return ag.getAttribute("data-groupid")===af},"LI",ad)};L.onChanged.subscribe(function(al){var af=al.dataSource,ag=al.data;var am,aj,an,ak;a[ag.length>10?"addClass":"removeClass"](ad,"fixed");switch(al.type){case"GroupAdded":if(al.from!=="FriendGroupChanger"){var ah=document.createElement("DIV"),ai={groupId:al.groupId,groupName:TB.common.escapeHTML(al.groupName)};ah.innerHTML=TB.common.formatMessage("<li class='group' data-groupid='{groupId}' data-groupname='{groupName}'><a href='#'>{groupName}</a></li>",al);ah=ah.firstChild;ad.insertBefore(ah,ad.lastChild)}break;case"GroupDeleted":ak=ae(al.groupId);ak.parentNode.removeChild(ak);break;case"GroupNameChanged":ak=ae(al.groupId);if(ak){a.getChildren(ak)[0].innerHTML=TB.common.escapeHTML(al.newGroupName)}break;default:break}})};var ab=new YAHOO.util.CustomEvent("FriendGroupPopupOnHide");var aa=function(ad){var ae=document.createElement("DIV");document.body.appendChild(ae);a.addClass(ae,"sns-popup popup-translucent popup-groupselector");ae.innerHTML="<div class='hd naked' style='height:0'></div><div class='bd'><ul><li>loading...</li></ul></div>";var ag=ae.getElementsByTagName("UL")[0];Z(ag);T(ag);V=TB.widget.SimplePopupPlus.decorate(ad,ae,{eventType:"NonExistsEvent",position:"bottom",offset:[0,4],align:"left",width:150,onShow:function(){var ai=a.getAncestorByTagName(this.trigger,"LI");ai.setAttribute("popuped",true);a.addClass(ai,"hover")},onHide:function(){var ai=a.getAncestorByTagName(this.trigger,"LI");ai.removeAttribute("popuped");a.removeClass(ai,"hover");ab.fire()}});q.on(ae,"click",S);var af=document.createElement("DIV");af.innerHTML="<div class='addgroup'><a href='#' class=''><span class='sns-icon icon-add'>\u65b0\u5efa\u7ec4</span></a></div>";af=af.firstChild;ag.parentNode.appendChild(af);ac(af,ag);var ah=function(ai){var aj=ai.data;a.setStyle(af,"display",aj.length>=30?"none":"")};L.onLoaded.subscribe(ah);L.onChanged.subscribe(ah);aa=function(ai){V.trigger=ai;return V};return aa(ad)};var ac=function(ad,af){var ae=new (SNS.app.Components.get("InlineEditor"))({className:"newgroup"});ab.subscribe(function(){ae.cancel()});q.on(ad,"click",function(ai){var ag=q.getTarget(ai);q.preventDefault(ai);var ah=document.createElement("LI");ah.innerHTML="<a href='#'></a>";af.appendChild(ah);a.addClass(ad,"hidden");ae.decorate(ah,"",{onCancel:function(ak,aj){ae.onCancel.unsubscribe();ae.onChanged.unsubscribe();af.removeChild(ah);a.removeClass(ad,"hidden")},onChanged:function(ak,aj){ae.onCancel.unsubscribe();ae.onChanged.unsubscribe();a.removeClass(ad,"hidden");var al=aj[0];a.getChildren(ah)[0].innerHTML=al;a.setAttribute(ah,"data-groupname",al);SNS.app.Modules.get("FriendsGroup").addGroup(al,function(am,an){if(am.status==="1"){if(am.msg==="SUCCESS"){a.addClass(ah,"group");ah.setAttribute("data-groupid",am.groupId);L.change({type:"GroupAdded",from:"FriendGroupChanger",groupId:am.groupId,groupName:al,groupCount:0})}else{alert(an);af.removeChild(ah)}}else{alert("\u672a\u77e5\u9519\u8bef");af.removeChild(ah)}})}})})};var S=function(ah){var ag=q.getTarget(ah);if(!a.hasClass(ag,"group")&&!a.hasClass(ag.parentNode,"group")){return}q.preventDefault(ah);if(ag.tagName.toUpperCase()!=="LI"){ag=ag.parentNode}V.hide();var ai=ag.getAttribute("data-groupname"),af=ag.getAttribute("data-groupid"),ae=V.popup.getAttribute("data-userid"),ad=V.popup.getAttribute("data-nick");P(ae,ad,af,ai)};var W=function(ae){if(!X(ae)){return}q.removeListener(U,"click",arguments.callee);var ad=function(ak){var aj=q.getTarget(ak);if(!X(ak)){return}q.preventDefault(ak);if(aj.tagName.toUpperCase()==="SPAN"){aj=aj.parentNode}if(V){V.hide()}V=aa(aj);V.trigger=aj;var ai=a.getAncestorByTagName(aj,"LI");a.addClass(ai,"hover");var ah=ai.getAttribute("data-uid"),af=ai.getAttribute("data-nick"),ag=V.popup;ag.setAttribute("data-userid",ah);ag.setAttribute("data-nick",af);V.show()};q.on(U,"click",ad);ad(ae)};q.on(U,"click",W)};var P=function(){var S=document.createElement("DIV"),T=new SNS.sys.Popup({title:"\u5c0f\u63d0\u793a",type:"error",hideMask:true,autoShow:false,content:S,buttons:[{text:"\u786e\u5b9a",func:function(){this.hide()}}]});P=function(W,V,U,Z){var X=N[W];oldGroup=X.groupId;if(oldGroup===U){g.showMessage(TB.common.formatMessage("<em>{userNick}</em> \u5df2\u7ecf\u5728 <em>{groupName}</em> \u8fd9\u4e2a\u7ec4\u4e86",{userNick:V,groupName:L.data["group"+U].groupName}));return}FriendsGroup.changeFriendGroup(W,U,function(aa){S.innerHTML=TB.common.formatMessage("\u6210\u529f\u7684\u628a <em>{userNick}</em> \u79fb\u52a8\u5230 <em>{groupName}</em> \u8fd9\u4e2a\u7ec4\u4e86",{groupName:Z,userNick:V});T.show()});X.groupId=U;w([X]);L.change({type:"MoveFriend",userId:W,oldGroupId:oldGroup,newGroupId:U})};return P.apply(this,arguments)};var J=function(S){var T=null;q.on(S,"click",function(X){var W=q.getTarget(X);if(!a.hasClass(W,"icon-friend-recommend")){return}W.blur();q.preventDefault(X);var V=a.getAncestorByTagName(W,"LI"),Z=V.getAttribute("data-uid"),U=V.getAttribute("data-nick");V.setAttribute("popuped",true);a.addClass(V,"hover");T=FriendsManage.showRecommendDialog({toUserId:Z,toUserNick:U,onRecommended:null,popupParams:{position:"bottom",align:"right",trigger:W,offset:[26,6],width:362,onShow:function(){V.setAttribute("popuped",true);a.addClass(V,"hover")},onHide:function(){V.removeAttribute("popuped");a.removeClass(V,"hover")}}});a.setStyle(T.popup,"z-index","9999")})};var I='<dl><dt><a target="_blank" href="{spaceUrl}"><img width="60" alt="{userNick}" height="60" src="{userPic}"/></a><span class="J_WangWang" data-nick="{userNick}" data-display="inline"></span><a class="name" href="{spaceUrl}" target="_blank" title="{showTitleLong}">{showTitle}</a></dt><dd></dd></dl><div class="operate-link"><a class="sns-icon icon-poke" href="#">\u52a8\u4e00\u4e0b</a><a class="sns-icon icon-comment" href="{msgUrl}">\u7559\u8a00</a><a class="sns-icon icon-gift-send" href="{giftUrl}">\u9001\u793c\u7269</a><a class="sns-icon icon-group" href="#">\u5206\u7ec4</a><a class="sns-icon icon-friend-recommend" href="#">\u63a8\u8350\u597d\u53cb\u7ed9TA</a></div><span class="extra-link"><a class="sns-icon icon-del delete" href="#">\u5220\u9664</a></span>';var N={},Q=null,C={},x=null,v=null,G=[];var s=function(){FriendsManage.getAllFriends(function(Z){C=Z.noFriends||{inviteUrl:"",maybeKnowUrl:""};var X=Z.friendList,T=Z.groupList,W=a.get(R.elFriendsList),S,aa,V;Q=X.slice(0);for(var U=0;U<X.length;++U){aa=X[U];N[aa.userId]=aa;V="group"+aa.groupId}G=X;K.setItemCount(X.length);u(Q,T)})};var y=function(T){if(!i.isArray(T)){T=[T]}var V=[];for(var S=0;S<T.length;++S){var U=T[S];if(!U.elFriend){if(i.trim(U.userRealName)===""){U.showTitleLong=U.userNick}else{U.showTitleLong=U.userRealName+"("+U.userNick+")"}li=document.createElement("LI");li.innerHTML=TB.common.formatMessage(I,U);li.setAttribute("data-uid",U.userId);li.setAttribute("grounp-id",U.groupId);li.setAttribute("data-nick",U.userRealName||U.userNick);U.elFriend=li;V.push(li)}}if(V.length>0){SNS.sys.Helper.fixHover({elements:V,hoverClass:"hover",checkPopuped:true})}};var u=function(V,S){var U,W,T;for(U=0;U<S.length;++U){W=S[U];W.groupCount=parseInt(W.groupCount,10)||0;T="group"+W.groupId;S[T]=W;if(W.groupName==="\u672a\u5206\u7ec4"){S.unshift(S.splice(U,1)[0])}}L.load(S);w(V)};var w=function(S){return};var B=function(T){var S=function(Z){var V=Z.signs,X,aa,ab,U;for(var W=0;W<V.length;++W){U=V[W];X=U[0];aa=N[X];if(aa){ab=aa.elFriend.getElementsByTagName("DD")[0];ab.innerHTML=U[1]}}};B=function(V){var W=[];for(var U=0;U<V.length;++U){if(!V[U].signLoaded){W.push(V[U].userId);V[U].signLoaded=true}}if(W.length>0){FriendsManage.getFriendsSign(W,S,"my")}};return B.apply(this,arguments)};var M=function(){var S=document.createElement("LI");if(Q.length===0){S.innerHTML=TB.common.formatMessage('\u4f60\u73b0\u5728\u8fd8\u6ca1\u6709\u597d\u53cb\u54e6\uff01\u73b0\u5728\u5c31\u53bb<a href="{inviteUrl}">\u9080\u8bf7\u597d\u53cb</a>,\u6216\u662f<a href="{maybeKnowUrl}">\u770b\u770b\u6709\u6ca1\u6709\u8ba4\u8bc6\u7684\u4eba</a>\uff0c\u9a6c\u4e0a\u5efa\u7acb\u4f60\u7684\u597d\u53cb\u5708\u5427\uff01',C)}else{S.innerHTML="\u8fd9\u4e2a\u5206\u7ec4\u4e2d\u6682\u65f6\u6ca1\u6709\u597d\u53cb :)"}M=function(){return S};return M()};var F=function(W){var V=a.get(R.elFriendsList);while(V.lastChild){V.removeChild(V.lastChild)}W=W||1;var S=K.pageSize,Z=(W-1)*S;if(Z<0){Z=0}var X=G.slice(Z,Z+S),T=document.createDocumentFragment();y(X);if(X.length>0){for(var U=0;U<X.length;++U){T.appendChild(X[U].elFriend)}V.appendChild(T);B(X);TB.ww.lightAll(V)}else{V.appendChild(M())}g.doReflow()};var O=function(S){var T=S.groupId,U=0;G=[];if(T==="all"){G=Q.slice(0)}else{G=A(T)}K.setItemCount(G.length)};var H=function(X){var S=X.dataSource,T=X.data;var Z,U,aa,ab,V,W;switch(X.type){case"GroupAdded":Z={groupId:X.groupId,groupName:X.groupName,groupCount:0};T.push(Z);T["group"+X.groupId]=Z;break;case"GroupDeleted":U="group"+X.groupId;groupFriends=A(X.groupId);Z=null;T[U]&&(delete T[U]);for(V=0;V<T.length;++V){if(T[V].groupId===X.groupId){T.splice(V,1);break}}for(V=0;V<T.length;++V){if(T[V].groupName==="\u672a\u5206\u7ec4"){Z=T[V];break}}Z.groupCount+=(parseInt(groupFriends.length,10)||0);L.change({type:"AdjustGroupCount",groupId:Z.groupId,adjustCount:groupFriends.length});for(V=0;V<groupFriends.length;++V){groupFriends[V].groupId=Z.groupId}w(groupFriends);F();break;case"GroupNameChanged":U="group"+X.groupId;Z=T[U];if(Z){Z.groupName=X.newGroupName;w(A(X.groupId))}break;case"MoveFriend":if(v.getCurrentGroup()!=="all"){W=X.userId;for(V=0;V<G.length;++V){if(G[V].userId===W){G.splice(V,1);K.setItemCount(G.length,true);break}}}break;default:break}};var A=function(U){var S=[];for(var T=0;T<Q.length;++T){if(Q[T].groupId===U){S[S.length]=Q[T]}}return S};var z=function(T){if(!T){return}var S=[];T.subscribe(function(W,U){G.splice(0,G.length);var X=U[0];for(var V=0;V<X.length;++V){N[X[V]]&&G.push(N[X[V]])}if(G.length>0){K.setItemCount(G.length);F()}else{v.changeGroup(v.getCurrentGroup())}})};return{init:function(V){i.augmentObject(R,V,true);var X=SNS.app.Components,T=R.components,U=X.get("SimplePager"),ab=X.get("JSDataSource");v=X.get("FriendsGroupSelector");L=new ab();L.onLoaded.subscribe(function(ad,ac){w()});L.onChanged.subscribe(H);t=new o.CustomEvent("GroupInfoChanged");var W=SNS.app.Modules;FriendsManage=W.get("FriendsManage");FriendsGroup=W.get("FriendsGroup");s();var aa=a.get(R.elFriendsList);E(aa);D(aa);J(aa);v.init({maxGroupNameLen:T.friendsGroupSelector.maxGroupNameLen,dataSource:L});var Z=T.friendsGroupSelector;Z.events=Z.events||{};i.augmentObject(Z.events,{onGroupChanged:O});r=v.decorate(Z);var S=T.simplePager;S.onSwitchPage=F;K=new U(S);z(V.ceFriendsFilter);if(YAHOO.env.ua.ie===6){a.setStyle(a.get("content"),"overflow","hidden")}}}})());b.add("FrontFriends",(function(){var r={};var w='<dl><dt><a href="{spaceUrl}" target="_blank"><img src="{userPicUrl}" /></a><span class="J_WangWang" data-nick="{userNick}" data-display="inline"></span><a class="name" href="{spaceUrl}" target="_blank" title="{showTitleLong}">{showTitle}</a></dt><dd></dd></dl><div class="operate-link"><a class="sns-icon icon-poke" href="#">\u52a8\u4e00\u4e0b</a><a class="sns-icon icon-comment" href="{msgUrl}">\u7559\u8a00</a><a class="sns-icon icon-gift-send" href="{giftUrl}">\u9001\u793c\u7269</a></div>';var z={},t=null,v=[];var s=function(){FriendsManage.getFriendsOfFriend(r.friendId,function(G){var F=G.friendList,B=G.groupList,E=a.get(r.elFriendsList),A,H,D;t=F.slice(0);for(var C=0;C<F.length;++C){z[F[C].userId]=F[C]}v=F;friendsPager.setItemCount(F.length)})};var y=function(B){if(!i.isArray(B)){B=[B]}var D=[];for(var A=0;A<B.length;++A){var C=B[A];if(!C.elFriend){if(i.trim(C.userRealName)===""){C.showTitleLong=C.userNick}else{C.showTitleLong=C.userRealName+"("+C.userNick+")"}li=document.createElement("LI");li.innerHTML=TB.common.formatMessage(w,C);li.setAttribute("data-uid",C.userId);li.setAttribute("data-nick",C.userNick);C.elFriend=li;D.push(li)}}if(D.length>0){SNS.sys.Helper.fixHover({elements:D,hoverClass:"hover",checkPopuped:true})}};var x=function(B){var A=function(G){var D=G.signs,F,H,I,C;for(var E=0;E<D.length;++E){C=D[E];F=C[0];H=z[F];if(H){I=H.elFriend.getElementsByTagName("DD")[0];I.innerHTML=C[1]}}};x=function(D){var E=[];for(var C=0;C<D.length;++C){if(!D[C].signLoaded){E.push(D[C].userId);D[C].signLoaded=true}}if(E.length>0){FriendsManage.getFriendsSign(E,A,"friend")}};return x.apply(this,arguments)};var u=function(F){var D=a.get(r.elFriendsList);while(D.lastChild){D.removeChild(D.lastChild)}F=F||1;var A=friendsPager.pageSize,H=(F-1)*A;if(H<0){H=0}var G=v.slice(H,H+A),B=document.createDocumentFragment();y(G);if(G.length>0){for(var C=0;C<G.length;++C){B.appendChild(G[C].elFriend)}D.appendChild(B);x(G);TB.ww.lightAll(D)}else{var E=document.createElement("div");E.className="sns-msg";E.innerHTML='<p class="tips">\u4f60\u8fd8\u6ca1\u6709\u597d\u53cb,\u4f1a\u5931\u53bb\u5f88\u591a\u4e50\u8da3\u7684,\u8d76\u5feb\u53bb\u52a0\u597d\u53cb\u5427</p>';a.insertAfter(E,D);a.addClass("J_FriendsPager","hidden")}};return{init:function(A){i.augmentObject(r,A,true);var B=SNS.app.Components,E=r.components,F=B.get("SimplePager");var C=SNS.app.Modules;FriendsManage=C.get("FriendsManage");s();var D=E.simplePager;D.onSwitchPage=u;friendsPager=new F(D)}}})());b.add("PokeSupport",(function(){var t={},s={},r;var u=function(w){var v=null;q.on(w,"click",function(C){var A=q.getTarget(C);if(!a.hasClass(A,"icon-poke")){return}q.stopEvent(C);A.blur();if(!g.checkAndShowLogin()){return}var z=a.getAncestorByTagName(A,"LI");z.setAttribute("popuped",true);a.addClass(z,"hover");var B=z.getAttribute("data-uid"),x=z.getAttribute("data-nick"),y=s.currentUID;v=r.showPokesDialog({sender:y,receiver:B,receiverName:x,onPoke:function(){v.hide();r.sendPoke.apply(r,arguments)},popupParams:{trigger:A.parentNode,offset:[0,6],onShow:function(){z.setAttribute("popuped",true);a.addClass(z,"hover")},onHide:function(){a.removeClass(z,"hover");z.removeAttribute("popuped")}}});a.setStyle(v.popup,"z-index","9999")})};return{init:function(v,y){i.augmentObject(t,v,true);i.augmentObject(s,y,true);var w=SNS.app.Modules;r=w.get("Poke");var x=a.get(y.elFriendsList);u(x)}}})());b.add("AddFriendSupport",(function(){var t={},r={},s;var u=function(v){q.on(v,"click",function(A){var z=q.getTarget(A);if(!a.hasClass(z,"icon-add-friend")){return}q.preventDefault(A);var y=a.getAncestorByTagName(z,"LI");var x=y.getAttribute("data-uid"),w=y.getAttribute("data-nick");s.showAddFriendDialog(0,x,w,{onMsgOK:function(C,B){}})})};return{init:function(v,y){i.augmentObject(t,v,true);i.augmentObject(r,y,true);var w=SNS.app.Modules;s=w.get("FriendsManage");var x=a.get(y.elFriendsList);u(x)}}})());b.add("FixHoverSupport",(function(){var s={},r={};return{init:function(t,w){i.augmentObject(s,t,true);i.augmentObject(r,w,true);var v=a.get(r.elFriendsList);var u=a.getElementsBy(function(x){return !!x.getAttribute("data-uid")},"LI",v);if(u.length>0){g.fixHover({elements:u,hoverClass:"hover",checkPopuped:true})}}}})())});SNS.add("daren",function(){var f=YAHOO.util,d=f.Dom,a=f.Event,e=YAHOO.lang,c=SNS.sys.Helper;var b=function(h){var g={followUrl:"http://jianghu.{serverHost}/admin/star/followStar.htm?tracelog=dr001",cancelFollowUrl:"http://jianghu.{serverHost}/admin/star/cancelFollow.htm",recommendUrl:"http://jianghu.{serverHost}/admin/json/recommendStar.htm?tracelog=dr004",checkFriendsUrl:"http://jianghu.{serverHost}/json/spell_search_json.htm",maybeFriendsUrl:"http://jianghu.{serverHost}/admin/recommend/friendMaybeBox.htm?size=14",addFriendsUrl:"http://jianghu.{serverHost}/admin/json/addFriends.htm"};this.config=YAHOO.lang.merge(g,h||{});this.init()};b.prototype={init:function(){},follow:function(g){if(!c.checkAndShowLogin({autoCallback:true})){return}var h={url:c.getApiURI(this.config.followUrl),parms:{starId:"",starName:""}};h.success=function(i){switch(i.message){case"-1":var l=c.showMessage("\u64cd\u4f5c\u5931\u8d25");l.onHide=function(){if(h.onFailure){h.onFailure()}};setTimeout(function(){if(l){l.hide()}},2000);break;case"0":var l=c.showMessage("\u60a8\u5df2\u7ecf\u5173\u6ce8\u4e86\u8be5\u8fbe\u4eba");l.onHide=function(){if(h.onSuccess){h.onSuccess()}};setTimeout(function(){if(l){l.hide()}},2000);break;case"1":var l=c.showMessage("\u6210\u529f\u5173\u6ce8\u6b64\u8fbe\u4eba");l.onHide=function(){if(h.onSuccess){h.onSuccess()}};setTimeout(function(){if(l){l.hide()}},2000);break;case"2":var l=c.showMessage("\u65e0\u6cd5\u5173\u6ce8\u81ea\u5df1");setTimeout(function(){if(l){l.hide()}},2000);break}};h=YAHOO.lang.merge(h,g||{});new SNS.sys.BasicDataSource(h).jsonp()},checkFollow:function(h){var g=this;a.onDOMReady(function(){var l,i;i=d.get("Jianghu_follow");if(i){l=i.getElementsByTagName("input")[0].value;switch(l){case"true":g.followAndRecommend(h);break}}})},followAndRecommend:function(h){var g=this;var i={parms:{starId:null,starName:null}};i.onSuccess=function(){var l=d.getAncestorByTagName(d.get("J_follow"),"li");var o=d.getAncestorByTagName(d.get("J_recommendDaren"),"li");d.setStyle(l,"display","none");d.setStyle(o,"display","")};i=YAHOO.lang.merge(i,h||{});g.follow(i)},cancelFollow:function(g){if(!c.checkAndShowLogin({autoCallback:true})){return}var h={url:c.getApiURI(this.config.cancelFollowUrl),starId:""};h.success=function(i){var l;switch(i.message){case"false":l=c.showConfirm("\u64cd\u4f5c\u5931\u8d25");l.onHide=function(){if(h.onFailure){h.onFailure()}};setTimeout(function(){if(l){l.hide()}},2000);break;case"true":l=c.showMessage("\u53d6\u6d88\u5173\u6ce8\u6210\u529f");l.onHide=function(){if(h.onSuccess){h.onSuccess()}};setTimeout(function(){if(l){l.hide()}},2000);break}};h=YAHOO.lang.merge(h,g||{});new SNS.sys.BasicDataSource(h).jsonp()},recommend:function(h){if(!c.checkAndShowLogin({autoCallback:true})){return}var g=this;this.checkFriends(function(){g.recommendAction(h)},function(){g.maybeFriends(h)})},checkFriends:function(h,g){YAHOO.util.Get.script(c.getApiURI(this.config.checkFriendsUrl),{onSuccess:function(){if(typeof _friendJson=="undefined"||!_friendJson){return}if(_friendJson.friendList.length>0){h()}else{g()}},charset:"GBK"})},recommendAction:function(g){var h={url:c.getApiURI(this.config.recommendUrl),handle:"",parms:{starName:"",starId:""}};h.success=function(i){switch(i.type){case"true":var l=c.showMessage(i.message);setTimeout(function(){if(l){l.hide()}},2000);break;case"false":l=c.showMessage(i.message);setTimeout(function(){if(l){l.hide()}},2000);break}};h=YAHOO.lang.merge(h,g);SNS.friendSuggest.decorate(d.get(h.handle),{type:"pop",title:"\u63a8\u8350"+h.parms.starName+"\u7ed9\u597d\u53cb",pos:[0,0],haveCheckAll:true,haveBtn:true,runnow:true,inputType:"checkbox",url:SNS.sys.Helper.getApiURI("http://jianghu.{serverHost}/json/spell_search_json.htm?filterId="+h.parms.starId),func:function(i){h.parms.fId=i;new SNS.sys.BasicDataSource(h).jsonp()}})},maybeFriends:function(i){var q=this,g;var o=function(r){new SNS.sys.BasicDataSource({url:c.getApiURI(q.config.addFriendsUrl),parms:{fId:r},success:function(s){switch(s.message){case"true":c.showMessage("\u60a8\u7684\u597d\u53cb\u7533\u8bf7\u5df2\u53d1\u9001 ");if(g){g.hide()}break;case"false":c.showMessage("\u64cd\u4f5c\u5931\u8d25");break}}}).jsonp()};var p=function(){var r=g.content.getElementsByTagName("input");var t=[];for(var s=0;s<r.length;s++){if(r[s].checked){t.push(d.getAttribute(r[s],"data_userid"))}}if(t.length>0){o(t.join(","))}};var h=function(s){g=SNS.sys.snsCenterPanel(s,{width:"560px"});g.addEvent("confirm","button","click",p);g.addEvent("cancel","button","click",function(){this.hide()});var r=d.getElementsByClassName("skin-blue","span",g.content)[0];a.on(g.content,"click",function(w){var v=a.getTarget(w);if(v.tagName.toLowerCase()=="input"){var t=g.content.getElementsByTagName("input");var x=0;for(var u=0;u<t.length;u++){if(t[u].checked){x++}}if(x>0){r.className="skin-blue"}else{r.className="skin-gray-s"}}})};var l={url:c.getApiURI(q.config.maybeFriendsUrl),success:h};new SNS.sys.BasicDataSource(l).jsonp()},setCityAndCont:function(r){var g={cityId:"J_introCity",contId:"J_introXinZ",city:null,birth:null};var l=YAHOO.lang.merge(g,r||{});var h="---";if(d.get(l.contId)&&l.birth){var i=new Date(l.birth),o=[i.getMonth()+1,i.getDate()];h=SNS.sys.getZodiac(parseInt(o[0],10),parseInt(o[1],10))+"\u5ea7";d.get(l.contId).innerHTML=h}h="---";if(d.get(l.cityId)&&l.city){var q=TB.form.DistrictSelector._tb_ds_data[l.city];if(q){var p=TB.form.DistrictSelector._tb_ds_data[q[1]];h=q[0]}d.get(l.cityId).innerHTML=h}}};SNS.app.Daren=new b()});SNS.add("darenList",function(){var f=YAHOO.util,d=f.Dom,b=f.Event,e=YAHOO.lang,c=SNS.sys.Helper;var a=function(h){var g={id:"J_darenList"};this.config=YAHOO.lang.merge(g,h||{});this.init()};a.prototype={init:function(){var g=d.get(this.config.id);b.on(g,"click",function(r){var q=b.getTarget(r);var p,i,h,o;switch(q.className){case"J_RecDaren":b.preventDefault(r);p=d.getAncestorByClassName(q,"act");i=d.getAttribute(p,"data_userid");h=d.getAttribute(p,"data_usernick");o=d.getAttribute(p,"data_username");var l=q.innerHTML.indexOf("\u5979")?"\u5979":"\u4ed6";SNS.app.Daren.recommend({handle:q,parms:{starId:i,starName:o,ta:l}});break;case"J_CancleFollow":p=d.getAncestorByClassName(q,"act");i=d.getAttribute(p,"data_userid");SNS.app.Daren.cancelFollow({parms:{starId:i},onSuccess:function(){var s=d.getAncestorByTagName(q,"li");if(s){s.style.display="none"}}});break}},this,true)}};SNS.app.DarenList=a});SNS.add("app.Portal",function(f){f.namespace("app.Portal");var o=YAHOO.util,a=o.Dom,s=o.Event,h=YAHOO.lang,i=o.Connect,c=o.Get,p=document;var l={};var e={};var r=SNS.app.Portal,g=SNS.sys.Helper,q=SNS.app.Modules,d=SNS.app.Components;YAHOO.lang.augmentObject(r,{init:function(t){h.augmentObject(t,e);l=t}});var b=g.addModuleSupport(r);b.add("Microblog",(function(){var v={defaultText:"\u6211\u6b63\u5728..."};var w=function(x){g.insertText(v.elText,x.faceId);u=true;t()};var u=false;var t=function(){var x=d.get("FaceSelector").getAllFaces(),A=null;if(x.length>0){var y=[];for(var z=0;z<x.length;++z){y[y.length]="\\"+x[z].code.split("").join("\\")}A=new RegExp(y.join("|"),"g");t=function(){var B=A.test(a.get(v.elText).value)||a.get(v.elFile).value!=="";a.get(v.elSyncSign).disabled=B};t.apply(this,arguments)}else{a.get(v.elSyncSign).disabled=a.get(v.elFile).value!==""}};return{init:function(x){h.augmentObject(v,x,true);s.on(v.elFacesBtn,"click",function(y){d.get("FaceSelector").showDialog({elTrigger:a.get(x.elFacesBtn),callback:w})});s.on(v.elText,"focus",function(y){var z=a.get(v.elText);if(z.value===v.defaultText){z.value=""}new o.Anim(v.elContainer,{height:{to:95}},0.3,o.Easing.easeOut).animate();new o.Anim(v.elText,{height:{to:36}},0.3,o.Easing.easeOut).animate()});s.on(v.elText,"keyup",function(){t()});s.on(document,"click",function(z){var y=s.getTarget(z);if(u||a.isAncestor(v.elContainer,y)||a.hasClass(y,"icon-del")){u=false;return}var A=a.get(v.elText);if(A.value===""){A.value=v.defaultText}new o.Anim(v.elContainer,{height:{to:49}},0.3,o.Easing.easeOut).animate();new o.Anim(v.elText,{height:{to:17}},0.3,o.Easing.easeOut).animate()});s.on(v.elFile,"change",function(z){var y=a.get(v.elFile);if(y.value!==""){var A=y.value;a.get(v.elFileName).innerHTML=TB.common.formatMessage("\u4e0a\u4f20\u4e86\uff1a{fileName}&nbsp;&nbsp;<del class='sns-icon icon-del'></del>",{fileName:A.substr(A.lastIndexOf("\\")===-1?0:A.lastIndexOf("\\"))})}t()});s.on(v.elFileName,"click",function(z){var y=s.getTarget(z);if(y.tagName.toUpperCase()!=="DEL"){return}a.get(v.elFile).value="";a.get(v.elFileName).innerHTML="";t()})}}})());b.add("Feeds",(function(){var w={};var v=null;var u="";var x=function(E,D,C){var B=g.getApiURI(w.apiFeeds);var A=D||a.getElementsByClassName("selected","LI",w.elTabList)[0].getAttribute("data-tab");var z=a.getElementsByClassName("selected","LI",w.elTabList)[0].getAttribute("data-log");u=E;var F=["tab="+A,"type="+(E||"all"),"tracelog="+z].join("&");v&&i.abort(v);v=SNS.app.Modules.get("Feeds").loadFeeds(C||w.elContent,B,F);g.doReflow()};var y=function(z){var A=a.get(z).getElementsByTagName("LI");s.on(A,"click",function(C){var B=s.getTarget(C);B=a.getAncestorByTagName(B,"LI");s.preventDefault(C);if(!g.checkAndShowLogin({autoCallback:true})){return}a.removeClass(A,"selected");a.addClass(B,"selected");x("all")})};var t=function(z){z=a.get(z);var A=z.getElementsByTagName("A");s.on(A,"click",function(C){s.preventDefault(C);var B=s.getTarget(C);var D=a.getElementsByClassName("selected","LI",w.elTabList)[0];a.removeClass(D,"selected");a.addClass(a.getFirstChild(w.elTabList),"selected");if(!g.checkAndShowLogin({autoCallback:true})){return}x(B.parentNode.getAttribute("data-type"))})};return{reload:function(){x(u)},init:function(C){w=C;var F=["/img/feeds_reply_horn.gif","/img/feeds_reply_bg.gif","/img/feeds_balloon.gif"];for(var B=0;B<F.length;++B){var A=document.createElement("IMG");A.src=g.getAssetsURI(F[B])}var E=a.get(w.elTabList),D=a.get(w.elMoreType),z=D.getElementsByTagName("UL")[0];var G=document.createElement("DIV");a.setStyle(G,"display","none");a.addClass(G,"sns-popup popup-translucent popup-moreapptypes");G.innerHTML="<div class='hd naked'></div><div class='bd'></div>";z.parentNode.insertBefore(G,z);G.getElementsByTagName("DIV")[1].appendChild(z);a.removeClass(z,"hidden");E&&y(E);q.get("Feeds").init(w);q.get("Feeds").monitorAll(w.elContent);if(D){t(G);s.on(a.getChildren(D)[0],"click",function(H){s.preventDefault(H)});s.on(D,"click",function(H){a.setStyle(G,"display",a.getStyle(G,"display")==="none"?"block":"none");s.stopEvent(H)});s.on(document,"click",function(H){a.setStyle(G,"display","none")})}s.onDOMReady(function(){x(w.initType,w.initTab)})}}})());b.add("Messages",(function(){var u={apiDelete:"portal:/admin/message/delete_system_message.htm"};var w=0;var v=function(y){var C=a.get(u.elList),B;var x=new o.Anim(C,{height:{from:0,to:w}},0.2,YAHOO.util.Easing.easeOut);x.onComplete.subscribe(function(){a.setStyle(C,"height","auto")});var A=new o.Anim(C,{height:{from:w,to:0},paddingTop:{from:5,to:0},paddingBottom:{from:5,to:0}},0.2,YAHOO.util.Easing.easeOut);A.onComplete.subscribe(function(){a.addClass(C,"hidden")});var z=function(D){D&&s.preventDefault(D);x.attributes.height.to=w;A.attributes.height.from=w;if(a.hasClass(C,"hidden")){a.replaceClass(y,"down","up");a.setStyle(C,"height","0");a.removeClass(C,"hidden");a.setStyle(C,"padding","5px");x.animate()}else{a.replaceClass(y,"up","down");A.animate()}};s.on(y,"click",z)};var t=function(x){s.on(x,"click",function(C){var A=s.getTarget(C);if(A.tagName.toUpperCase()!=="DEL"){var z="http://jianghu.{serverHost}/admin/message/view_system_message.htm";SNS.sys.Helper.regApiServer({local:z});z=SNS.sys.Helper.getApiURI("local:");window.location=z;return}s.preventDefault(C);var y=A.parentNode,B=y.getAttribute("data-id");c.script(g.buildURI(g.getApiURI(u.apiDelete),"msgId="+B,"callback="+g.createCallback(function(E){if(E.state==="1"){y.parentNode.removeChild(y);var D=a.getChildren(u.elList);a.removeClass(D.slice(0,6),"hidden");w=a.getRegion(u.elList).height-10;if(D.length===0){a.setStyle(u.elToggle,"display","none");a.setStyle(u.elList,"display","none")}}else{g.showMessage(E.messgae||"\u5220\u9664\u5931\u8d25")}})))})};return{init:function(x){h.augmentObject(u,x,true);u.elToggle=a.get(u.elToggle);u.elList=a.get(u.elList);w=a.getRegion(u.elList).height-10;v(u.elToggle);t(u.elList)}}})());b.add("UserMission",(function(){var t={};return{loadContent:function(u){if(u&&u.status==="1"&&u.content){a.get(t.elContent).innerHTML=u.content}},init:function(u){t=u;window.UserMission=this;c.script(g.buildURI(g.getApiURI(t.apiMission,"jsoncallback=UserMission.loadContent")))}}})());b.add("FriendsWidget",(function(){var u={};var v=function(){var y=SNS.app.Modules.get("FriendsManage");return y};var w=function(C){var B=s.getTarget(C);if(!a.hasClass(B,"icon-add-friend")){return}s.preventDefault(C);var A=a.getAncestorByTagName(B,"LI");var y=A.getAttribute("data-nick"),z=A.getAttribute("data-uid");v().showAddFriendDialog(0,z,y,{onMsgOK:function(D){if(D.msg==="ALREADY_FIREND"||D.msg==="INVITE_SUCCESS"){x(a.getAncestorByTagName(B,"LI"))}}})};var t=function(C){var B=s.getTarget(C);if(!a.hasClass(B,"icon-del-nob")){return}s.preventDefault(C);var A=a.getAncestorByTagName(B,"LI");var y=A.getAttribute("data-nick"),z=A.getAttribute("data-uid");if(y&&z){A.removeAttribute("data-uid");v().delStranger(z,y,function(D){x(A)})}};var x=function(y){var z=new o.Anim(y,{opacity:{to:0}},0.5);z.onComplete.subscribe(function(){var B=a.getChildren(a.getNextSibling(a.getAncestorByTagName(y,"UL"))),A=B[0];if(A){a.setStyle(A,"opacity","0");y.parentNode.replaceChild(A,y);new o.Anim(A,{opacity:{to:1}},0.5).animate()}else{y.parentNode.removeChild(y)}});z.animate()};return{init:function(y){u=y;window.addSpaceFriend=function(){};window.filterOutStranger=function(){};var z=a.get(u.elContent);g.loadFromServer(z,g.getApiURI(u.apiFriends),null,function(){TB.ww.lightAll(z);s.on(z,"click",w);s.on(z,"click",t)})}}})())});SNS.add("frontInvite",function(){SNS.sys.FrontInvite=function(b){var a={url:"http://jianghu.{serverHost}/json/visite_history.htm",toVisiteId:""};YAHOO.util.Event.onDOMReady(function(){var c=YAHOO.lang.merge(a,b||{});c.url=SNS.sys.Helper.getApiURI(c.url);new SNS.sys.BasicDataSource({url:c.url,parms:{to_visite_id:c.toVisiteId}}).jsonp()})}});SNS.use();SNS.add("app-header",function(h){var o=YAHOO.lang,i=YAHOO.util.Dom,s=YAHOO.util.Event,l=SNS.sys.Helper,r=document,p="",q="",d="";(function(){var u=YAHOO.util.Dom,t=YAHOO.util.Event;t.onDOMReady(function(){var v="http://jianghu.{serverHost}/admin/json/click_plugin.htm";SNS.sys.Helper.regApiServer({htmlURL2:v});v=SNS.sys.Helper.getApiURI("htmlURL2:",false,true);d=document.createElement("img");t.on("J_CustomApp","click",function(x){var w=t.getTarget(x);if(w.tagName=="A"&&w.parentNode.tagName=="LI"&&w.parentNode.getAttribute("plugin-id")){_ajaxclickurl=v+"&_tb_token_="+encodeURIComponent(p)+"&appId="+w.parentNode.getAttribute("plugin-id");d.src=_ajaxclickurl}})})})();var a={init:function(t){this.config=o.merge({htmlURL:"http://jianghu.{serverHost}/admin/json/navplugin.htm",pluginsURL:"http://jianghu.{serverHost}/admin/json/recentPluginsJson.htm",container:"J_CustomApp",more:"JS_MapTrigger",moreOnNav:"JS_MapTriggerNav"},t||{});l.regApiServer({htmlURL:this.config.htmlURL});l.regApiServer({pluginsURL:this.config.pluginsURL});this.config.htmlURL=l.getApiURI("htmlURL:");this.config.pluginsURL=l.getApiURI("pluginsURL:");this.showMorePlugins(this.config.more,[1,1],100);this.showMorePlugins(this.config.moreOnNav,[4,4]);if(!SNS.sys.Helper.checkLogin()){return}this.getHTML()},config:{htmlURL:"http://jianghu.{serverHost}/admin/json/navplugin.htm",pluginsURL:"http://jianghu.{serverHost}/admin/json/recentPluginsJson.htm",container:"J_CustomApp",more:"JS_MapTrigger",moreOnNav:"JS_MapTriggerNav"},getHTML:function(){var v=this;var u=i.get(v.config.container);if(!u){return}var w={};var t=function(C){p=C.token;u.innerHTML=C.appListHtml;u.innerHTML=C.appListHtml;var A=u.getElementsByTagName("li");if(YAHOO.env.ua.ie==6){for(var B=0;B<A.length;B++){s.on(A[B],"mouseover",function(G,F){i.addClass(F,"hover")},A[B],true);s.on(A[B],"mouseout",function(G,F){i.removeClass(F,"hover")},A[B],true)}}SNS.sys.Plugins.init(v.config.container);var E='<img src="http://img05.taobaocdn.com/tps/i5/T1..luXXFMXXXXXXXX-21-9.png" style="width:21px;height:9px"/>';var y=[];if(typeof appIdList!="undefined"&&appIdList.length){for(var B=0;B<appIdList.length;B++){if(appIdList[B]["plugin-id"]&&appIdList[B]["flag"]=="hot"){y.push(appIdList[B]["plugin-id"])}}var z=function(G){for(var F=0;F<y.length;F++){if(y[F]==G){return true}}return false};var D=i.get("J_CustomApp").getElementsByTagName("li");for(var B=0;B<D.length;B++){if(z(D[B].getAttribute("plugin-id"))){i.getFirstChildBy(D[B]).innerHTML=i.getFirstChildBy(D[B]).innerHTML+E}}}};var x=new SNS.sys.BasicDataSource({url:this.config.htmlURL});x.jsonp(w,t)},showMorePlugins:function(u,z,w,x){var B=this,t=false,A={},y=i.get(u);if(!y){return}var v=function(G){dataReady=true;var F="",C="";for(var E=0;E<G.recentplugins.length;E++){F+='<a  href="'+G.recentplugins[E].ahref+'"  appkey="'+G.recentplugins[E].appkey+'" title="'+G.recentplugins[E].text+'"><img src="'+G.recentplugins[E].imgsrc+'"/>'+G.recentplugins[E].text+"</a>"}for(var D=0;D<G.moreplugins.length;D++){C+='<a href="'+G.moreplugins[D].ahref+'" appkey="'+G.moreplugins[D].appkey+'" title="'+G.moreplugins[D].text+'"><img src="'+G.moreplugins[D].imgsrc+'"/>'+G.moreplugins[D].text+"</a>"}B.html='<div class="app-area"><p class="app-head"><span>\u5168\u90e8\u5e94\u7528</span></p><p class="app-lists">'+C+'</p><p class="app-more_n_detail" style="line-height:1px;height:1px;font-size:0;margin:0 15px 0 15px"></p><p class="app-recent-area" style="height:auto">'+F+'</p><p style="height:20px"><a href="http://jianghu.taobao.com/admin/more_plugin.htm" target="_blank" style="float:right;margin-right:10px;">\u5e94\u7528\u5217\u8868</a></p></div>';t=new SNS.sys.snsNearbyPanel(y,B.html,{width:"508px",hideHandle:true,hideMask:true,coordinate:z,offsetTop:w?w:0,offsetLeft:x?x:0});t.show();q="http://jianghu.{serverHost}/admin/json/click_plugin.htm";SNS.sys.Helper.regApiServer({htmlURL1:q});q=SNS.sys.Helper.getApiURI("htmlURL1:",false,true);s.on(t.container,"click",function(I){var H=s.getTarget(I);if(H.tagName=="A"&&(H.parentNode.className=="app-lists"||H.parentNode.className=="app-recent-area")){_ajaxclickurl=q+"&_tb_token_="+encodeURIComponent(p)+"&appId="+H.getAttribute("appkey");d.src=_ajaxclickurl}})};s.on(y,"click",function(F){SNS.sys.Helper.checkAndShowLogin({callback:function(){location.replace(location.href)}});var C=i.getElementsByClassName("panel","div");for(var D=0;D<C.length;D++){if(i.getFirstChild(C[D]).className=="iframeShim"){C[D].style.display="none"}}s.stopEvent(F);if(!B.html){if(!t){var E=new SNS.sys.BasicDataSource({url:B.config.pluginsURL});E.jsonp(A,v)}else{t.show()}}else{if(!t){t=new SNS.sys.snsNearbyPanel(y,B.html,{width:"508px",hideHandle:true,coordinate:z});t.show()}else{t.show()}}})}},g=function(u){for(var w=0,x=u.items.length,B;w<x;w++){B=u.items[w];var A=SNS.sys.appList[B.pluginId];if(A&&A.getAttribute("app-hooked")!="yes"){if(B.pluginId&&SNS.sys.appList[B.pluginId]){var t=r.createElement("sub");t.innerHTML="("+B.title+")";if(B.icon){var z=new Image();z.src=B.icon}var v=r.createDocumentFragment();if("undefined"!=typeof z){v.appendChild(z)}v.appendChild(t);var y=A.getElementsByTagName("a")[0];y.appendChild(v);A.setAttribute("app-hooked","yes")}}}},b=function(t){return{init:function(){var v="http://jianghu."+SNS.sys.Helper.getServerURI("serverHost")+"/admin/json/pluginDataJson.htm?callback=SNS.sys.getRadish";t=i.get(t);if(!t){return}var u=t.getElementsByTagName("li");Array.forEach(u,function(x){var w=x.getAttribute("plugin-id");if(w){SNS.sys.appList[w]=x}});Y.Get.script(v,{data:SNS.sys.appList,charset:"gbk",timeout:3000})}}}(),e=(function(){var t="http://jianghu.{serverHost}/json/unread_message_count.htm",u;SNS.sys.Helper.regApiServer({readMsgURL:t});t=SNS.sys.Helper.getApiURI("readMsgURL:");return{renderNumber:function(w){if(w>0){i.setStyle(u.getElementsByTagName("a"),"padding-right","20px");var v=r.createElement("span");i.addClass(v,"new-message");u.getElementsByTagName("span")[0].innerHTML="\u6d88\u606f("+w+")";u.getElementsByTagName("span")[0].appendChild(v)}else{i.setStyle(u.getElementsByTagName("a"),"padding-right","0px")}},get:function(v){u=i.get(v);if(u){YAHOO.util.Get.script(t+"&callback=SNS.sys.Msg.renderNumber&t="+new Date().getTime())}}}})(),f=function(){return{init:function(){var v=i.get("sns-nav");if(!v){return}var t=v.getElementsByTagName("li")[0],u=i.getRegion(t),w=r.createElement("div");i.setStyle(w,"left",u.left+10+"px");i.setStyle(w,"top",u.bottom+5+"px");w.className="no-login-pop";w.innerHTML='<em></em><p class="tips">\u4f60\u8fd8\u672a\u767b\u5f55,<a href="#">\u7acb\u5373\u767b\u5f55</a></p><span class="sns-icon icon-del-nob"></span>';s.on(w,"click",function(y){s.preventDefault(y);var x=s.getTarget(y);if(i.hasClass(x,"icon-del-nob")){r.body.removeChild(w)}else{if(x.tagName.toLowerCase()=="a"){SNS.sys.Helper.checkAndShowLogin({callback:function(){location.replace(location.href)}})}}});r.body.appendChild(w)}}}(),c=(function(){var x=YAHOO.util,w=x.Dom,u=x.Event,t=YAHOO.util.Anim,v=function(A,z){var B=A.getAttribute("action"),y;if(typeof B=="object"){y=A.removeChild(B);A.setAttribute("action",z);w.insertBefore(y,w.getFirstChild(A))}else{A.setAttribute("action",z)}};return{init:function(){var D=document,C=w.get("channalSearchForm"),E=w.get("channal-search-friend");if(!C){return}var B=w.get("radio-realname"),y=w.get("radio-taobaoname"),A=w.get("find_layer"),z=[C.event_submit_do_search_by_realname,C.event_submit_do_search_by_nick];B.checked="checked";u.on("search-but","click",function(F){u.preventDefault(F);C.submit()});u.on(E,"focus",function(){if(w.getStyle(A,"display")!="inline"){w.setStyle(A,"display","inline")}if(E.value.trim()==E.getAttribute("data-value").trim()){E.value=""}});u.on(D,"click",function(G){var F=u.getTarget(G);if(F!=E&&F!=A&&!w.isAncestor(A,F)){w.setStyle(A,"display","none")}});u.on("find_layer","click",function(H){var F=u.getTarget(H),G;if(F.tagName.toLowerCase()=="input"){G=F.id.indexOf("realname")!=-1?0:1;z[G].removeAttribute("disabled");z[1-G].disabled="disabled";v(C,F.value);if(E.value.trim()!=""){C.submit()}}})}}})();h.app.Plugins=a;h.sys.getRadish=g;h.sys.Msg=e;h.sys.navLookFor=c;h.sys.Plugins=b;h.sys.noticeLogin=f});SNS.add("navToolBar",function(){var b=YAHOO.util.Dom,a=YAHOO.util.Event;var c=function(e){var d={pluginsEl:"JS_MapTriggerNav"};this.config=YAHOO.lang.merge(d,e||{})};c.prototype={init:function(d){this.config=YAHOO.lang.merge(this.config,d||{});this.setNavUserPic(this.config)},setNavUserPic:function(d){if(SNS.sys.Helper.checkLogin()){SNS.sys.ModuleLoader.load("navPic",{url:"http://jianghu.{serverHost}/u/MjU3MDQxNDc=/user/userinfo.htm",mapping:{logUserPic:"J_navUserPic"},parms:{userId:d},callback:function(f,e,g){return'<img  width="16" height="16" src="'+e+'" alt=""/>'}})}},showMorePlugins:function(){var d=this;SNS.use(function(){SNS.app.Plugins.showMorePlugins(b.get(d.config.pluginsEl),[4,4])})}};SNS.sys.NavToolBar=new c();a.onDOMReady(function(){SNS.sys.NavToolBar.init()})});SNS.use(function(){var c=YAHOO.util,a=c.Event,b=c.Dom;a.onDOMReady(function(){if(SNS.sys.Helper.checkLogin()){SNS.sys.Msg.get("J_snsNavMessage")}else{SNS.sys.noticeLogin.init()}SNS.sys.navLookFor.init();SNS.sys.ModuleLoader.load("darentools",{});if(YAHOO.util.Dom.hasClass(document.body,"app-home")){SNS.app.Plugins.init()}new Image().src=SNS.sys.Helper.getApiURI("http://jianghu.{serverHost}/admin/iplog/userIpLog.htm?t="+new Date().getTime())})});(function(){var i=SNS.sys.Class,l=YAHOO.util.Dom,o=SNS.sys.Helper,r=SNS.sys.BasicDataSource;var p=new i({implement:SNS.sys.DataSourceManager,initialize:function(b){this.config={saveMain:{url:"http://share.jianghu.{serverHost}/share/shareMyResource.htm",iframeProxy:"http://share.jianghu.{serverHost}/share/proxy.htm"},saveSub:{url:"http://share.jianghu.{serverHost}/share/shareOtherResource.htm",iframeProxy:"http://share.jianghu.{serverHost}/share/proxy.htm"},previewMainShare:{url:"http://share.jianghu.{serverHost}/share/fetchResource.htm?_input_charset=utf-8"},previewSubShare:{url:"http://share.jianghu.{serverHost}/share/find_feed.htm"},omit:{url:"http://share.jianghu.{serverHost}/share/omitShare.htm"}};for(var a in this.config){if(this.config[a].url){this.config[a].url=o.getApiURI(this.config[a].url,false,true)}if(this.config[a].iframeProxy){this.config[a].iframeProxy=o.getApiURI(this.config[a].iframeProxy,false,true)}}this.config=YAHOO.lang.merge(this.config,b||{});for(var a in this.config){this.registerDataSource(a,this.config[a],this.config.callBackContext)}},saveMainShare:function(b,a){this.getDataSource("saveMain").iframeProxy(b,a)},saveSubShare:function(b,a){this.getDataSource("saveSub").iframeProxy(b,a)},previewMainShare:function(b,a){this.getDataSource("previewMainShare").jsonp(b,a)},previewSubShare:function(b,a){this.getDataSource("previewSubShare").jsonp(b,a)},omitShare:function(b,a){this.getDataSource("omit").jsonp(b,a)}});SNS.sys.ShareDataSource=p;var q=new i({initialize:function(a,b){if(!SNS.sys.Helper.checkAndShowLogin({callback:function(){location.replace(location.href)}})){return}this.dataSource=new p({callBackContext:this});this.parms=a;this.config={zIndex:99,width:"440px",height:"290px",opacity:0.5,success:null,failure:null,hideHandle:true};i.mixin(this.config,b)},getHtml:function(a){return'<div class="share-popup"><div class="logo"></div><div class="sns-tab tab-app"><ul><li class="selected"><a href="#"><span>\u6211\u8981\u5206\u4eab</span></a></li></ul></div><div class="content sns-nf"><div class="subject">'+a+'</div><p class="reason"><label>\u5206\u4eab\u7406\u7531\uff1a</label><textarea class="share-comment" style="vertical-align:top" ></textarea></p><p class="act skin-blue"><span class="btn n-btn"><a herf="#url" >\u7acb\u5373\u5206\u4eab</a></span><span style="margin-left:100px;"><a href="http://share.jianghu.taobao.com/share/hotShareList.htm?resource_type=12" target="_blank">\u770b\u770b\u5927\u5bb6\u5206\u4eab\u4e86\u4ec0\u4e48\u5b9d\u8d1d</a></span></p></div></div>'},getShareUrlHtml:function(a){return'<div class="share-url"><p class="title"><input class="share-title f-txt" value="" type="text"/></p><p class="url" title="'+a.uri+'">'+a.uri+"</p> </div>"},getShareBlogHtml:function(a){return'<div class="share-url"><p class="title"><input class="share-title f-txt" value="" type="text"/></p><p >'+a.other+"</p> </div>"},getShareVideoHtml:function(a){return' <div class="share-video"><div class="pic"><img  src="'+a.coverPath+'"  width="120px" height="80px"/><div class="play-btn"> </div></div><div class="share-txt"><p class="title"><input class="f-txt" value="" type="text"/></p><p class="url" title="'+a.uri+'">'+a.uri+"</p></div>"},getShareAudioHtml:function(a){return'<div class="share-audio"><div class="share-txt"><input type="text" class="f-txt" value=""/></div><embed class="audio"  flashvars="loadMusicFile='+a.uri+'&autoplay=0" wmode="transparent" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+SNS.sys.Helper.getServerURI("assets")+'/img/player.swf" type="application/x-shockwave-flash" width="220" height="50"></embed></div>'},getShareAlbumHtml:function(a){return'<div class="share-album"><div class="pic"><span class="album-bg"><span class="lbg"></span><span class="rbg"></span><span class="img"><img  src="'+a.coverPath+'"/> </span></span></div> <div class="share-txt "><p class="title"><input class=" f-txt" value="" type="text"/></p> <p class="url"></p></div>  </div>'},getShareShopHtml:function(a){var b=a.coverPath||"http://img08.taobaocdn.com/tps/i8/T1RP4vXjxbXXXXXXXX-80-80.png";return'<div class="share-shop"> <div class="pic"><div class="bg"></div> <img class="cover"  src="'+b+'"  width="80px" height="80px"> <div class="intro"> <p>\u638c\u67dc:<a target="_blank" href="'+a.uri+'">'+a.ownerNick+"</a></p> <p>\u4fe1\u7528:"+a.sellerNumPic+'</p></div> </div> <div class="share-txt"> <p class="title"><input class="f-txt" value="" type="text"/> </p><p class="url" title="'+a.uri+'">'+a.uri+"</p>  </div> </div>"},getShareGoodsHtml:function(a){var b=a.coverPath||"http://img06.taobaocdn.com/tps/i6/T1ajNvXcteXXXXXXXX-80-80.png";return'<div class="share-goods"><div class="pic"><img  src="'+b+'"  width="80px" height="80px"/></div><div class="share-txt"> <p class="title"><input class="f-txt" value="" type="text"/></p><p>\uffe5 <span class="price">'+a.price+'</span>\u5143</p><p class="url" title="'+a.uri+'">'+a.uri+"</p></div></div>"},showMain:function(){if(this.dataSource){this.dataSource.previewMainShare(this.parms,this.showPopup);return this}},showSub:function(){if(this.dataSource){this.dataSource.previewSubShare(this.parms,this.showPopup);return this}},showPopup:function(a){if(!a){SNS.sys.Helper.showMessage("\u94fe\u63a5\u4e0d\u53ef\u7528");return}if(a.isBlack){SNS.sys.Helper.showMessage("\u94fe\u63a5\u4e0d\u53ef\u7528\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165!");return}switch(a.resourceType){case"0":this.url(a);break;case"1":this.video(a);break;case"2":this.audio(a);break;case"4":this.album(a);break;case"6":this.blog(a);break;case"7":this.url(a);break;case"9":this.goods(a);break;case"10":this.shop(a);break;case"12":this.goods(a);break;case"13":this.url(a);break}},createPopup:function(c,b){var d=this;this.panel=new SNS.sys.snsCenterPanel(c,this.config);var a=l.getElementsByClassName("f-txt","input",this.panel.content)[0];a.value=b.title;this.panel.addEvent("btn n-btn","span","click",function(){d.saveShare(b,this)});return this.panel},url:function(a){var b=this.getHtml(this.getShareUrlHtml(a));this.createPopup(b,a)},blog:function(a){var b=this.getHtml(this.getShareBlogHtml(a));this.createPopup(b,a)},audio:function(a){var b=this.getHtml(this.getShareAudioHtml(a));this.config.onHide=function(){var c=l.getElementsByClassName("subject","div",this.content)[0];c.innerHTML=""};this.createPopup(b,a)},video:function(a){var b=this.getHtml(this.getShareVideoHtml(a));this.createPopup(b,a)},album:function(a){var b=this.getHtml(this.getShareAlbumHtml(a));this.createPopup(b,a)},goods:function(a){var b=this.getHtml(this.getShareGoodsHtml(a));this.createPopup(b,a)},shop:function(a){var b=this.getHtml(this.getShareShopHtml(a));this.createPopup(b,a)},saveShare:function(d,f){var e=this;var b=f.container.getElementsByTagName("input")[0].value;if(!b){SNS.sys.Helper.showMessage("\u5199\u4e2a\u6807\u9898\u5427\uff0c\u670b\u53cb\u4eec\u4e0d\u77e5\u9053\u662f\u4ec0\u4e48\u4e1c\u4e1c");return}if(b.length>120){SNS.sys.Helper.showMessage("\u6807\u9898\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e120\u4e2a\u5b57\u7b26");return}if(b.replace(/\s/g,"")==""){SNS.sys.Helper.showMessage("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a");return}var a=f.container.getElementsByTagName("textarea")[0].value;if(a.length>210){SNS.sys.Helper.showMessage("\u5206\u4eab\u7406\u7531\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e210\u4e2a\u5b57\u7b26");return}if(this._lock){return}this._lock=true;var c=function(g){this._lock=false;if(!e.config.success&&!e.config.failure){f.hide()}switch(g){case 1:SNS.sys.Helper.showMessage("\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");if(e.config.failure){e.config.failure()}break;case 2:SNS.sys.Helper.showMessage("\u5206\u4eab\u6210\u529f");if(e.config.success){e.config.success.apply(this,arguments)}break;case 3:SNS.sys.Helper.showMessage("\u60a8\u8fd8\u6ca1\u6709\u767b\u5f55\uff0c\u8bf7\u5148\u767b\u5f55");if(e.config.failure){e.config.failure()}break;case 4:SNS.sys.Helper.showMessage("\u94fe\u63a5\u4e0d\u53ef\u7528\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165!");if(e.config.failure){e.config.failure()}break;case 5:SNS.sys.Helper.showMessage("\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");if(e.config.failure){e.config.failure()}break;default:SNS.sys.Helper.showMessage("\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");if(e.config.failure){e.config.failure()}break}};i.mixin(d,{title:b,comment:a});switch(d.isMain){case true:this.dataSource.saveMainShare(d,c);break;case false:this.dataSource.saveSubShare(d,c);break}}});var h=false;SNS.widget.Share={shareMain:function(a,c){var d=function(){h=false};var b;if(c){c.onHide=d;b=c}else{b={onHide:d}}if(!h){var e=new q(a,b).showMain()}h=true;if(!e){h=false}return e},shareSub:function(a,c){var d=function(){h=false};var b;if(c){c.onHide=d;b=c}else{b={onHide:d}}if(!h){var e=new q(a,b).showSub()}h=true;if(!e){h=false}return e},omitShare:function(c,a){var b=new p();b.omitShare(c,a)}}})();
